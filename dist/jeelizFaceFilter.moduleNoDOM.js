 /**
 * Jeeliz Face Filter - https://github.com/jeeliz/jeelizFaceFilter
 *
 * Copyright 2018 Jeeliz ( https://jeeliz.com )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

// BEGIN EMULATE DOM

// import some usefull stuffs
try {
  var Buffer = require('buffer').Buffer;
} catch(err) {
  console.log('Cannot import Buffer package');
}

// emulate global variables:
const navigator = {  
  platform: "Linux x86_64",
  userAgent: "forceWebGL1_noAntialiasing_noDOM"
};

const window = {
  canvas: null,
  innnerWidth: -1,
  innerHeight: -1,
  URL: {
    createObjectURL: function() {
      return null
    }
  },
  addEventListener: function() {},
  removeEventListener: function() {},
  requestAnimationFrame: function(step) {
    if (window.canvas === null){
      setTimeout(step, 1);
      return;
    }
    window.canvas.requestAnimationFrame(step)
  },
  cancelAnimationFrame: function(step) {
    if (window.canvas === null){
      return;
    }
    window.canvas.cancelAnimationFrame(step)
  },
  setCanvas: function(c) {
    window.canvas = c;
  }
};

const document = {
  createElement: function(elementType){
    switch(elementType){
      case 'canvas':
        return null; // return a real canvas
    }
  },
  getElementById: function(elementId){
    return null;
  },
  body: { appendChild: function(element){ return null; }}
};

if(typeof(wx) !== 'undefined'){ //WECHAT
  const systemInfo = wx.getSystemInfoSync()
  window.innnerWidth = systemInfo.windowWidth;
  window.innnerHeight = systemInfo.windowHeight;
}

const FAKEDOM = {
  window: window,
  document: document,
  navigator: navigator
};
// END EMULATE DOM


window.JEEFACEFILTERAPIGEN=function(){function Cb(a){var c=null,d=null,e=null,m=0;this.m=function(f){this.te(f.Qa);e.Ad({Hb:f.Hb,Eb:f.Eb})};this.Sd=function(f){return c[f]};this.te=function(f){var r=null;m=f.length;c=f.map(function(n,h){n=Object.assign({},n,{index:h,parent:this,Xa:r,be:h===m-1});return r=h=0===h?Db.instance(n):Eb.instance(n)});d=c[0];e=c[m-1];c.forEach(function(n,h){0!==h&&n.pe()})};this.M=function(f,r){var n=r;c.forEach(function(h){n=h.M(n,f)});return n};this.Rd=function(){return d.D()};
this.xc=function(){return e.Td()};this.uc=function(){return e.uc()};this.h=function(){c&&(c.forEach(function(f){f.h()}),e=d=c=null,m=0)};"undefined"!==typeof a&&this.m(a)}function bb(a,c){var d=c%8;return a[(c-d)/8]>>7-d&1}function Fb(a){var c=JSON.parse(a);a=c.ne;var d=c.nf,e=c.n;var m="undefined"===typeof btoa?Buffer.from(c.data,"base64").toString("latin1"):atob(c.data);var f=m.length;c=new Uint8Array(f);for(var r=0;r<f;++r)c[r]=m.charCodeAt(r);m=new Float32Array(e);f=new Float32Array(d);r=a+d+
1;for(var n=0;n<e;++n){for(var h=r*n,v=0===bb(c,h)?1:-1,k=h+1,g=1,u=0,l=k+a-1;l>=k;--l)u+=g*bb(c,l),g*=2;k=u;h=h+1+a;g=f.length;u=0;for(l=h;l<h+g;++l)f[u]=bb(c,l,!0),++u;for(g=h=0;g<d;++g)h+=f[g]*Math.pow(2,-g-1);m[n]=0===h&&0===k?0:v*(1+h)*Math.pow(2,1+k-Math.pow(2,a-1))}return m}function Ua(){return-1!==[ba.ready,ba.play,ba.pause].indexOf(ia)}function Gb(a){if(ia!==ba.pause){var c=ia===ba.play?K.Ba:Y.od;Va=setTimeout(ob.bind(null,a),c)}}function cb(){if(ia===ba.play)return!1;ia=ba.play;Ma&&window.cancelAnimationFrame(Ma);
ob(0)}function pb(){if(ia!==ba.play)return!1;Va&&(clearTimeout(Va),Va=null);Ma&&(window.cancelAnimationFrame(Ma),Ma=null);ia=ba.pause;return!0}function Ea(a,c,d,e,m){a=4*(3*c+a)+d;return e+(V.buffer[a]/255+V.buffer[a+12]/65025)*(m-e)}function db(){b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1);sa.Z();S.reset();X.reset();y.L();y.ic();b.disable(b.DEPTH_TEST);b.disable(b.BLEND);S.ta();y.ma()}function ob(){if(ia!==ba.pause){y.ic();S.reset();S.ta();b.disable(b.DEPTH_TEST);b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,
!1);sa.Z();y.ma();if(!x.zb)a:{if(x.Na){if(!x.element.needsUpdate)break a;x.W.Je(x.element.arrayBuffer);x.element.needsUpdate=!1}else{var a=x.element.currentTime,c=a-x.Ya;0>c&&(x.Ya=a);if(1E3*c<Y.Le)break a;x.Ya+=c;x.W.refresh()}y.set("s50");x.X.P();x.W.b(0);S.g(!1,!1)}a=za.vc();if(H.O.length>a)H.O.splice(0,H.O.length-a);else for(;H.O.length<a;)H.O.push(0);if(1!==H.i)if(oa.every(eb)){for(var d=0,e=c=0;e<oa.length;++e)oa[e].detected>d&&(d=oa[e].detected,c=0);for(d=0;d<a;++d)H.O[d]=c}else{c=H.Lc;d=0;
for(e=!1;d<a;++d){if(eb(oa[c]))if(e){do++c===H.i&&(c=0);while(eb(oa[c]))}else e=!0;H.O[d]=c++;c>=H.i&&(c=0)}H.Lc=c}for(a=0;a<za.vc();++a)H.ga=H.O[a],H.Db=(.5+H.ga)/H.i,H.Gc=H.O.lastIndexOf(H.ga)===a,y.set("s51"),c=oa[H.ga],y.B("u37",1+Na.Kb*(Math.cos(c.ry)-1)),K.ja&&y.B("u36",c.rz),1!==H.i&&y.B("u35",H.Db),T.la.P(),x.X.b(0),V.oa.b(1),S.g(!1,!1),T.la.b(0),Oa.M(!1,T.la);za.Ee();sa.J();b.viewport(0,0,3,2*H.i);y.set("s49");V.oa.b(0);S.g(!1,!1);b.readPixels(0,0,3,2*H.i,b.RGBA,b.UNSIGNED_BYTE,V.buffer);
for(a=0;a<H.i;++a)if(-1!==H.O.indexOf(a)){var m=a;c=Sa[m];var f=[m];d=oa[m];e=fb[m];var r=2*m;c.Fa=Ea(1,r,3,0,1);d.detected=pa.S(d.detected,c.Fa,Y.ld);if(c.Fa<Y.Nc)K.ja&&(d.rz=0,d.ry=0);else{var n=V.ya;c.x=Ea(0,r,1,-1,1);c.y=Ea(0,r,2,-1,1);c.V=Ea(0,r,3,0,1);c.Ib=Ea(1,r,0,-n[0],n[0]);c.Jb=Ea(1,r,1,-n[1],n[1]);c.za=Ea(1,r,2,-n[2],n[2]);for(n=0;n<V.T;++n)c.pc[n]=V.xa[n](Ea(2,r,n,0,1));f.pb=c.x-d.xRaw;f.qb=c.y-d.yRaw;f.ob=c.V-d.sRaw;f.lb=c.Ib-d.rx;f.mb=c.Jb-d.ry;f.nb=K.ja?c.za:c.za-d.rz;r=za.Od();f=(1-
Wa.Ra(ta.translationFactorRange[0],ta.translationFactorRange[1],Math.sqrt(f.pb*f.pb+f.qb*f.qb+f.ob*f.ob)/r))*(1-Wa.Ra(ta.rotationFactorRange[0],ta.rotationFactorRange[1],Math.sqrt(f.lb*f.lb+f.mb*f.mb+f.nb*f.nb)/r))*Wa.Ra(ta.qualityFactorRange[0],ta.qualityFactorRange[1],c.Fa);m=e[++gb[m]%e.length]=f;for(r=0;r<e.length;++r)m=Math.min(m,e[r]);m=Math.max(.5,m);f=Math.min(m,f);e=pa.S(ta.alphaRange[1],ta.alphaRange[0],Math.pow(f,Y.nd));d.xRaw=pa.S(d.xRaw,c.x,e);d.yRaw=pa.S(d.yRaw,c.y,e);d.sRaw=pa.S(d.sRaw,
c.V,e);d.rx=pa.S(d.rx,c.Ib,e);d.ry=pa.S(d.ry,c.Jb,e);d.rz=K.ja?d.rz+e*c.za:pa.S(d.rz,c.za,e);m=d.sRaw*Na.kb*Math.sin(d.ry);f=Math.sin(d.rz)*m/Pa;d.x=d.xRaw+Math.cos(d.rz)*m;d.y=d.yRaw+f;d.s=d.sRaw;e=Math.max(e,Y.md);for(m=0;m<V.T;++m)d.expressions[m]=pa.S(d.expressions[m],c.pc[m],e);++c.Ua}}sa.He();sa.reset();X.reset();b.enable(b.DEPTH_TEST);K.Ea&&(1===H.i?K.Ea(oa[0]):K.Ea(oa));b.disable(b.BLEND);ia===ba.play&&(Ma=window.requestAnimationFrame(Gb))}}function qb(){x.X||(x.X=X.instance({isPot:!1,isLinear:!0,
isFloat:!1,width:T.C,height:T.A}));T.la=X.instance({isPot:!0,isFloat:!1,width:Oa.Rd()});for(var a=Y.cd,c=H.i,d=new Float32Array([0,.5,.5,0,0,0,0,0,0,0,0,0]),e=new Float32Array(d.length*H.i),m=0,f;m<H.i;++m)for(f=0;f<d.length;++f)e[m*d.length+f]=d[f];V.oa=Hb.instance({width:a,height:c,isFloat:!0,isPot:!1,array:e})}function Ib(){function a(c){for(var d=[],e=0;e<H.i;++e)d.push(JSON.parse(JSON.stringify(c)));return d}V.buffer=new Uint8Array(8*Y.cd*H.i);Sa=a({Fa:0,x:0,y:0,V:1,Ib:0,Jb:0,za:0,pc:new Float32Array(V.T),
Ua:0});oa=a({detected:0,x:0,y:0,s:1,xRaw:0,yRaw:0,sRaw:1,rx:0,ry:0,rz:0,expressions:new Float32Array(V.T)});a({pb:0,qb:0,ob:0,lb:0,mb:0,nb:0})}function hb(){y.N("s51",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u33",value:1},{type:"2f",name:"u34",value:T.u},{type:"1f",name:"u35",value:.5},{type:"1f",name:"u36",value:0}]);y.N("s52",[{type:"1i",name:"u38",value:0},{type:"1i",name:"u33",value:1},{type:"1f",name:"u41",value:Y.Fe},{type:"1f",name:"u42",value:na.threshold},{type:"3f",name:"u40",value:[V.I[0]*
T.u[0],V.I[1]*T.u[1],V.I[2]]},{type:"1f",name:"u35",value:.5},{type:"1f",name:"u43",value:1},{type:"1f",name:"u36",value:0}]);var a=[{type:"1i",name:"u38",value:0}];y.N("s53",a);y.N("s54",a);y.N("s49",[{type:"1i",name:"u33",value:0},{type:"1f",name:"u46",value:T.u[0]},{type:"2f",name:"u45",value:[0,.5/H.i]}])}function ib(){T.u[0]=1;T.u[1]=T.C/T.A;rb.m({Wa:na.overlapFactors,Rc:na.nScaleLevels,C:T.C,A:T.A,Xc:na.scale0Factor,I:V.I,Yc:na.scanCenterFirst})}function Jb(a){if(K.pa)sb("string"===typeof K.pa?
JSON.parse(K.pa):K.pa,a);else{var c=K.Ub;"JSON"!==c.toUpperCase().split(".").pop()&&(c+=Y.neuralNetworkPath);tb.get(c,function(d){d=JSON.parse(d);sb(d,a)})}}function sb(a,c){if(a.exportData){var d=a.exportData;d.rotationEulerAnglesFactors&&(V.ya=d.rotationEulerAnglesFactors);d.translationScalingFactors&&(V.I=d.translationScalingFactors);"undefined"!==typeof d.nExpressions&&(V.T=d.nExpressions);Na.Kb=.4;Na.kb=.7;"undefined"!==typeof d.fgScaleXFactor&&(Na.Kb=d.fgScaleXFactor);"undefined"!==typeof d.fgDisplaceXFactor&&
(Na.kb=d.fgDisplaceXFactor)}V.T||(V.T=Y.Qc);if(!V.xa)for(V.xa=[],d=0;d<V.T;++d)V.xa.push(Y.Id);c(a)}function Kb(){if(Qa.m({hb:K.$,width:T.C,height:T.A,debug:!1,Sc:function(){Ga("GLCONTEXT_LOST")},antialias:K.antialias,premultipliedAlpha:!0}))return!0;Ga("GL_INCOMPATIBLE");return!1}function eb(a){return a.detected<=Y.Nc}function ub(a,c,d,e){return d>a?Math.max(0,a+c/2-(d-e/2)):Math.max(0,d+e/2-(a-c/2))}function Lb(){return Sa.some(function(a,c){if(c===H.ga)return!1;c=Sa[H.ga];if(c.Ua>a.Ua||3>a.Ua||
ub(c.x,c.V,a.x,a.V)<Y.Oc*c.V)return!1;var d=T.C/T.A;return ub(c.y,c.V*d,a.y,a.V*d)>Y.Oc*c.V*d})}function Mb(){var a=H.ga;V.oa.we(1);1!==H.i&&(b.viewport(0,0,3,H.i),y.set("s0"),y.bd("u1",1),S.g(!1,!1),y.bd("u1",0));b.viewport(0,a,1,1);y.set("s52");K.ja&&y.B("u36",oa[a].rz);1!==H.i&&y.B("u35",H.Db);if(1<H.i){var c=Lb()?0:1;y.B("u43",c)}y.ye("u39",rb.get());S.g(!1,!1);H.Gc&&(b.viewport(1,a,1,1),y.set("s53"),S.g(!1,!1),b.viewport(2,a,1,1),y.set("s54"),S.g(!1,!1))}function vb(){x.W&&x.W.remove();x.Na=
x.element.isFakeVideo?!0:!1;if(x.Na){var a=wb();a={isFlipY:!1,array:x.element.arrayBuffer,width:a.w,height:a.ka,isKeepArray:!0}}else a={H:x.element};x.W=X.instance(Object.assign({isPot:!1,isLinear:!0,isFloat:!1},a))}function Ha(){y.N("s50",[{type:"1i",name:"u1",value:0},{type:"mat2",name:"u32",value:x.o}])}function Ia(){x.G[0]=.5;x.G[1]=.5;var a=x.u[1]/x.u[0];Pa=Qa.R()/Qa.D();90===Math.abs(ma.rotate)&&(a=1/a);a>Pa?x.G[1]*=Pa/a:x.G[0]*=a/Pa;y.N("s52",[{name:"u44",type:"1f",value:Pa}]);x.o[0]=0;x.o[1]=
0;x.o[2]=0;x.o[3]=0;switch(ma.rotate){case 0:x.o[0]=x.G[0];x.o[3]=x.G[1];break;case 180:x.o[0]=-x.G[0];x.o[3]=-x.G[1];break;case 90:x.o[1]=x.G[0];x.o[2]=-x.G[1];break;case -90:x.o[1]=-x.G[0],x.o[2]=x.G[1]}ma.flipX&&(x.o[0]*=-1,x.o[2]*=-1)}function wb(){var a={w:x.element.videoWidth||x.element.width,ka:x.element.videoHeight||x.element.height};if(!a.w||!a.ka||4>a.w||4>a.ka)throw Error("INVALID VIDEO DIMENSIONS - width = "+a.w+" height = "+a.ka);return a}function jb(){var a=wb(),c=x.u[0]!==a.w||x.u[1]!==
a.ka;c&&(x.u[0]=a.w,x.u[1]=a.ka);return c}function Xa(a,c){if(ia===ba.error)return!1;x.element=a;jb();c&&c();return!0}function xb(a,c,d){a&&a();x.va={video:{facingMode:{exact:ma.facingMode},width:{min:ma.minWidth,max:ma.maxWidth,ideal:ma.idealWidth},height:{min:ma.minHeight,max:ma.maxHeight,ideal:ma.idealHeight}},audio:!1};ma.deviceId&&(x.va.deviceId=ma.deviceId);U.get(x.element?x.element:U.Vd(),function(e){c&&c(e);d(e)},function(){Ga("WEBCAM_UNAVAILABLE")},x.va)}function Ga(a){ia!==ba.error&&(ia=
ba.error,K.ua&&K.ua(a))}var pa={Hf:function(a){return Math.ceil(Math.log2(a))},fe:function(a){return Math.log2(a)},Vf:function(a){return 0===Math.log2(a)%1},Ue:function(a){var c=[0,0,0,0];a.forEach(function(d){c[0]+=d[0];c[1]+=d[1];c[2]+=d[2];c[3]+=d[3]});return c},Ve:function(a,c,d){return Math.min(Math.max(a,c),d)},Ye:function(a){return a*Math.PI/180},ag:function(a,c){c=Math.pow(10,c);return Math.round(a*c)/c},bg:function(a){return Math.round(1E6*a)/1E6},If:function(a,c){return(100*a/c).toFixed(3)},
S:function(a,c,d){return a*(1-d)+c*d},Ed:function(a,c){return pa.yd(a-c)},yd:function(a){for(;a>Math.PI;)a-=2*Math.PI;for(;a<=-Math.PI;)a+=2*Math.PI;return a},$e:function(a,c){return Math.abs(pa.Ed(a,c))},Me:function(a,c){return Math.atan2(Math.sin(a)+Math.sin(c),Math.cos(a)+Math.cos(c))}},tb={get:function(a,c,d){var e=new XMLHttpRequest;e.open("GET",a,!0);e.withCredentials=!1;e.onreadystatechange=function(){4===e.readyState&&(200===e.status||0===e.status?c(e.responseText):"undefined"!==typeof d&&
d(e.status))};e.send()},Ef:function(a,c){tb.get(a,function(d){c(JSON.parse(d))})},Zf:function(a,c,d){var e=new XMLHttpRequest;e.open("POST",a,!0);e.setRequestHeader("Content-type","application/x-www-form-urlencoded");e.onreadystatechange=function(){4!==e.readyState||200!==e.status&&0!==e.status||d(e.responseText)};e.send(c)},tf:function(a,c){var d=new XMLHttpRequest;d.open("POST",a,!0);d.responseType="arraybuffer";d.onload=function(){c(d.response)};d.send()}},kb={ib:function(a,c){if(0===c||"object"!==
typeof a)return a;a=Object.assign({},a);c=void 0===c||-1===c?-1:c-1;for(var d in a)a[d]=kb.ib(a[d],c);return a}},Wa={mg:function(a,c,d){a=Math.min(Math.max((d-a)/(c-a),0),1);return a*a*(3-2*a)},Ra:function(a,c,d){return Math.min(Math.max((d-a)/(c-a),0),1)},lf:function(a,c,d,e){return Math.pow(Math.min(Math.max((e-a)/(c-a),0),1),d)},qg:function(){return 0},Yf:function(){return 1},Xf:function(a){return a},hf:function(a){return a*a},pf:function(a){return a*(2-a)},ef:function(a){return.5>a?2*a*a:-1+(4-
2*a)*a},cf:function(a){return a*a*a},mf:function(a){return--a*a*a+1},df:function(a){return.5>a?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1},jf:function(a){return a*a*a*a},qf:function(a){return 1- --a*a*a*a},ff:function(a){return.5>a?8*a*a*a*a:1-8*--a*a*a*a},kf:function(a){return a*a*a*a*a},rf:function(a){return 1+--a*a*a*a*a},gf:function(a){return.5>a?16*a*a*a*a*a:1+16*--a*a*a*a*a}},Nb={Kd:function(a,c,d){switch(a){case "relu":return d+"=max(vec4(0.,0.,0.,0.),"+c+");";case "elu":return d+"=mix(exp(-abs("+c+"))-vec4(1.,1.,1.,1.),"+
c+",step(0.,"+c+"));";case "elu01":return d+"=mix(0.1*exp(-abs("+c+"))-vec4(0.1,0.1,0.1,0.1),"+c+",step(0.,"+c+"));";case "arctan":return d+"=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}},y=function(){function a(w,t,A){t=w.createShader(t);w.shaderSource(t,A);w.compileShader(t);return w.getShaderParameter(t,w.COMPILE_STATUS)?t:!1}function c(w,t,A){t=a(w,w.VERTEX_SHADER,t);A=a(w,w.FRAGMENT_SHADER,A);w===b&&r.push(t,A);var N=w.createProgram();w.attachShader(N,
t);w.attachShader(N,A);w.linkProgram(N);return N}function d(w,t){void 0===t.ia&&(t.ia="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");void 0===t.Ca&&(t.Ca=["a0"]);void 0===t.ra&&(t.ra=[2]);if(void 0===t.precision||"highp"===t.precision)t.precision=g;t.id=v++;void 0!==t.Zc&&(t.Zc.forEach(function(N,B){t.a=t.a.replace(N,t.Za[B])}),t.Zc.splice(0));t.Tb=0;t.ra.forEach(function(N){t.Tb+=4*N});t.ha=c(w,t.ia,"precision "+t.precision+
" float;\n"+t.a);t.j={};t.c.forEach(function(N){t.j[N]=w.getUniformLocation(t.ha,N)});t.attributes={};t.sa=[];t.Ca.forEach(function(N){var B=w.getAttribLocation(t.ha,N);t.attributes[N]=B;t.sa.push(B)});if(t.f){w.useProgram(t.ha);h=t;n=t.id;for(var A in t.f)w.uniform1i(t.j[A],t.f[A])}t.yb=!0}function e(w){ua.xe(W);n!==w.id&&(W.L(),n=w.id,h=w,b.useProgram(w.ha),w.sa.forEach(function(t){0!==t&&b.enableVertexAttribArray(t)}))}function m(w,t,A){d(w,t,A);w.useProgram(t.ha);w.enableVertexAttribArray(0);
n=-1;return h=t}function f(){return{a:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",c:["u1"],f:{u1:0}}}var r=[],n=-1,h=null,v=0,k=!1,g="highp",u=["u1"],l=["u0"],D={u1:0},F={u0:0},I={u1:0,u2:1},O={u3:0},C={s0:f(),s1:{a:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",c:u,f:D,precision:"lowp"},s2:{a:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",c:["u1",
"u2"],f:I},s3:{a:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",c:u,f:D},s4:{a:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",c:["u1","u2"],f:I},s5:{a:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",c:u,f:D},s6:{a:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",
c:u,f:D},s7:{a:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u4;}",c:["u0","u4"],f:F},s8:{a:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;const vec4 f=vec4(.25,.25,.25,.25),g=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u4,f);gl_FragColor=b*g;}",c:["u0","u4"],f:F},s9:{a:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",
c:u,f:D},s10:{a:"uniform sampler2D u1,u5;uniform float u6;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u5,vv0);gl_FragColor=mix(b,a,u6*f);}",c:["u1","u5","u6"],f:{u1:0,u5:1}},s11:{a:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u7)+texture2D(u1,vv0+u7*vec2(1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,1.)));}",c:["u1","u7"],f:D},s12:{a:"uniform sampler2D u1;uniform vec4 u8;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 j(float a){if(a==0.)return vec4(0.,0.,0.,0.);float k=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),l=c+127.,b=(a/exp2(c)-1.)*8388608.,d=l/2.,m=fract(d)*2.,n=floor(d),o=e(b,0.,8.),p=e(b,8.,16.),q=m*128.+e(b,16.,23.),r=k+n;return vec4(o,p,q,r)/255.;}void main(){float a=dot(texture2D(u1,vv0),u8);gl_FragColor=j(a);}",
c:["u1","u8"],f:D},s13:{a:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",c:l,f:F},s14:{a:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(f,a);}",c:l,f:F},s15:{a:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-f,a,step(0.,a));}",c:l,f:F},s16:{a:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-f;gl_FragColor=mix(.1*b,a,step(0.,a));}",
c:l,f:F},s17:{a:"uniform sampler2D u0,u6,u9;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u6,vv0),d=texture2D(u9,vv0),b=a/d;gl_FragColor=c*mix(exp(-abs(b))-f,b,step(0.,a));}",c:["u0","u6","u9"],f:{u0:0,u6:1,u9:2}},s18:{a:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",c:l,f:F},s19:{a:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=log(f+a);gl_FragColor=b;}",
c:l,f:F},s20:{a:"uniform sampler2D u0,u10;uniform float u11;const vec2 e=vec2(.5,.5);const float f=1e-5;const vec4 g=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u10,e);float b=u11*u11;vec4 c=max(b*a,f*g);gl_FragColor=texture2D(u0,vv0)/c;}",c:["u0","u10","u11"],f:{u0:0,u10:1}},s21:{a:"uniform sampler2D u1;uniform vec2 u12;varying vec2 vv0;void main(){float a=u12.x*u12.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u12.y),f=floor(u12.x*fract(b*u12.y)),g=(f*u12.y+d)/a;gl_FragColor=texture2D(u1,g+c/a);}",
c:["u1","u12"],f:D},s22:{a:"uniform sampler2D u13,u14,u15;varying vec2 vv0;void main(){vec4 a=texture2D(u15,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u13,b),f=texture2D(u14,c);gl_FragColor=d*f;}",c:["u13","u14","u15"],f:{u14:0,u13:1,u15:2}},s23:{a:"uniform float u16;uniform sampler2D u13,u14;varying vec2 vv0;void main(){vec2 a=fract(vv0*u16);vec4 b=texture2D(u13,vv0),c=texture2D(u14,a);gl_FragColor=b*c;}",c:["u14","u13","u16"],f:{u14:0,u13:1}},s24:{a:"uniform float u16;uniform sampler2D u13,u14,u17,u18,u19,u20;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 h=vv0*u16,l=floor(h),c=h-l;vec4 m=texture2D(u13,vv0),d=texture2D(u14,c),a=texture2D(u20,vv0);a=a*255.;vec4 n=texture2D(u17,c),o=texture2D(u18,c),p=texture2D(u19,c),i=step(-g,-a),b=e-i,j=b*step(-e-g,-a);b*=e-j;vec4 k=b*step(-2.*e-g,-a);b*=e-k;vec4 q=b;d=i*d+j*n+k*o+q*p,gl_FragColor=m*d;}",
c:"u13 u14 u16 u20 u17 u18 u19".split(" "),f:{u14:0,u13:1,u20:3,u17:4,u18:5,u19:6}},s25:{a:"uniform sampler2D u13,u14,u21;uniform float u16,u22,u23,u24;varying vec2 vv0;const vec2 j=vec2(1.,1.);void main(){vec2 a=floor(u22*vv0),b=u22*vv0-a;float c=u16/u22;vec2 d=floor(b*c),f=b*c-d,g=(a+f)/u22;float k=u22*u24/u16;vec2 l=k*d,h=(l+f*u23)/u24,i=step(h,j);vec4 m=texture2D(u13,g),n=texture2D(u14,h),o=m*n*i.x*i.y,p=texture2D(u21,g);gl_FragColor=o*u23*u23+p;}",c:"u13 u14 u16 u22 u23 u24 u21".split(" "),f:{u14:0,
u13:1,u21:2}},s26:{a:"uniform sampler2D u13,u14;varying vec2 vv0;void main(){vec4 a=texture2D(u13,vv0),b=texture2D(u14,vv0);gl_FragColor=a*b;}",c:["u13","u14"],f:{u14:0,u13:1}},s27:{a:"uniform sampler2D u1,u21;uniform float u25;varying vec2 vv0;void main(){gl_FragColor=texture2D(u21,vv0)+u25*texture2D(u1,vv0);}",c:["u1","u21","u25"],f:{u1:0,u21:1}},s28:{a:"varying vec2 vv0;uniform sampler2D u1;const vec4 f=vec4(1.,1.,1.,1.),g=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,g)*f;}",
c:u,f:D,precision:"lowp"},s29:{a:"varying vec2 vv0;uniform sampler2D u1;uniform float u26;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u26)).rgb,c=texture2D(u1,vv0+vec2(u26,u26)).rgb,d=texture2D(u1,vv0+vec2(u26,0.)).rgb;gl_FragColor=vec4(dot(a,f),dot(b,f),dot(c,f),dot(d,f));}",c:["u1","u26"],f:D,precision:"lowp"},s30:{a:"varying vec2 vv0;uniform sampler2D u1;uniform float u26;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u26)).rgb,c=texture2D(u1,vv0+vec2(u26,u26)).rgb,d=texture2D(u1,vv0+vec2(u26,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
c:["u1","u26"],f:D,precision:"lowp"},s31:{a:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u27;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u27,vv0.y-u27))*1.,a-=texture2D(u1,vec2(vv0.x-u27,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u27,vv0.y+u27))*1.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y-u27))*1.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y+u27))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u27,vv0.y-u27))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u27))*2.,b-=texture2D(u1,vec2(vv0.x+u27,vv0.y-u27))*1.,b+=texture2D(u1,vec2(vv0.x-u27,vv0.y+u27))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u27))*2.,b+=texture2D(u1,vec2(vv0.x+u27,vv0.y+u27))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),g=texture2D(u2,vv0);gl_FragColor=g.a*e.r*f;}",
c:["u1","u2","u27"],f:I},s32:{a:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u27;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float h=0.;vec2 l=k*u27,a,b;float c,d,i=0.;for(float e=-4.;e<=4.;e+=1.)for(float f=-4.;f<=4.;f+=1.)a=vec2(e,f),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,h+=d*texture2D(u1,b).r,i+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-h/i)*j;}",c:["u1","u2","u27"],f:I},s33:{a:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 g=vec2(.5,.5),h=vec2(1.,0.),i=vec2(0.,1.);void main(){vec2 a=vv0-u7*g;vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*h),d=texture2D(u3,a+u7*i),j=texture2D(u3,a+u7),k=e(b,c),l=e(d,j);gl_FragColor=e(k,l);}",
c:["u3","u7"],f:O},s34:{a:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;const vec2 k=vec2(1.,0.),l=vec2(0.,1.),m=vec2(2.,0.),n=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*k),d=texture2D(u3,a+u7*l),g=texture2D(u3,a+u7),h=e(b,c),i=e(d,g);return e(h,i);}void main(){vec2 a=vv0+u7*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u7*m),d=f(a+u7*2.),g=f(a+u7*n),h=e(b,c),i=e(d,g);gl_FragColor=e(h,i);}",c:["u3","u7"],f:O},s35:{a:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",
c:["u1"],f:D,precision:"lowp"},s36:{a:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;const float e=15444.;void main(){vec4 a=1001./e*texture2D(u1,vv0-3.*u7)+2002./e*texture2D(u1,vv0-2.*u7)+3003./e*texture2D(u1,vv0-u7)+3432./e*texture2D(u1,vv0)+3003./e*texture2D(u1,vv0+u7)+2002./e*texture2D(u1,vv0+2.*u7)+1001./e*texture2D(u1,vv0+3.*u7);gl_FragColor=a;}",c:["u7","u1"],f:D,precision:"lowp"},s37:{a:"uniform sampler2D u1,u28,u29;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);const float g=.1;void main(){vec4 a=texture2D(u28,vv0),b=texture2D(u29,vv0),c=texture2D(u1,vv0),d=max(f*g,b-a*a),h=sqrt(d);gl_FragColor=(c-a)/h;}",
c:["u1","u28","u29"],f:{u1:0,u28:1,u29:2}}},G={s38:{a:"uniform float u16,u30;uniform sampler2D u13,u14,u21;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-5,1e-5);void main(){vec4 sum=texture2D(u21,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u16,xyTo=floor(vv0*u16+eps2);float weightSize=toSparsity*u16;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u30*(xyPatch-halfFromSparsity))/u16,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u13,uvWeight)*texture2D(u14,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
c:["u16","u13","u14","u21","u30"],Za:["1.1111","gl_FragColor\\*=2.2222;"]},s39:{a:"uniform float u16,u30,u24;uniform sampler2D u13,u14,u21;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u21,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u24,xyTo=floor(vv0*u16+eps2);float weightSize=fromSparsity*u24;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u16;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u30*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u24,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u13,uvWeight)*texture2D(u14,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
c:"u16 u24 u13 u14 u21 u30".split(" "),Za:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},E=null,aa=null,W={Pa:function(){return k},m:function(){if(!k){E=kb.ib(C,2);aa=kb.ib(G,2);g="highp";for(var w in E)d(b,E[w],w);y.set("s0");b.enableVertexAttribArray(0);k=!0}},kd:function(w){w.forEach(function(t){W.Wb(t)})},Wb:function(w){E[w.id]=w;d(b,w,w.id)},zc:function(w,t,A){t||(t=w);E[t]=Object.create(aa[w]);E[t].ae=!0;aa[w].Za&&aa[w].Za.forEach(function(N,B){E[t].a=E[t].a.replace(new RegExp(N,"g"),A[B])});
d(b,E[t],t)},set:function(w){e(E[w])},$a:function(w){return m(w,f(),"s40")},Lb:function(w){return m(w,{a:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",c:[],precision:"highp"},"s41")},Hd:function(w){return"undefined"===typeof E[w]?!1:E[w].yb},L:function(){-1!==n&&(n=-1,h.sa.forEach(function(w){0!==w&&b.disableVertexAttribArray(w)}))},Nb:function(){var w=0;h.sa.forEach(function(t,A){A=h.ra[A];b.vertexAttribPointer(t,A,b.FLOAT,!1,h.Tb,w);w+=4*A})},ic:function(){b.enableVertexAttribArray(0)},ma:function(){W.ab(b)},
ab:function(w){w.vertexAttribPointer(h.sa[0],2,w.FLOAT,!1,8,0)},bd:function(w,t){b.uniform1i(h.j[w],t)},B:function(w,t){b.uniform1f(h.j[w],t)},Aa:function(w,t,A){b.uniform2f(h.j[w],t,A)},gg:function(w,t){b.uniform2fv(h.j[w],t)},ye:function(w,t){b.uniform3fv(h.j[w],t)},hg:function(w,t,A,N){b.uniform3f(h.j[w],t,A,N)},ig:function(w,t,A,N,B){b.uniform4f(h.j[w],t,A,N,B)},Mb:function(w,t){b.uniform4fv(h.j[w],t)},jg:function(w,t){b.uniformMatrix2fv(h.j[w],!1,t)},kg:function(w,t){b.uniformMatrix3fv(h.j[w],
!1,t)},lg:function(w,t){b.uniformMatrix4fv(h.j[w],!1,t)},N:function(w,t){W.set(w);t.forEach(function(A){switch(A.type){case "4f":b.uniform4fv(h.j[A.name],A.value);break;case "3f":b.uniform3fv(h.j[A.name],A.value);break;case "2f":b.uniform2fv(h.j[A.name],A.value);break;case "1f":b.uniform1f(h.j[A.name],A.value);break;case "1i":b.uniform1i(h.j[A.name],A.value);break;case "mat2":b.uniformMatrix2fv(h.j[A.name],!1,A.value);break;case "mat3":b.uniformMatrix3fv(h.j[A.name],!1,A.value);break;case "mat4":b.uniformMatrix4fv(h.j[A.name],
!1,A.value)}})},Gf:function(){return"lowp"},h:function(){b.disableVertexAttribArray(0);W.L();for(var w in E){var t=E[w];t.yb&&(t.yb=!1,b.deleteProgram(t.ha));t.ae&&delete E[w]}r.forEach(function(A){b.deleteShader(A)});r.splice(0);v=0;k=!1;h=null;n=-1}};return W}(),b=null,Qa=function(){function a(g){console.log("ERROR in ContextFF: ",g);return!1}function c(g){function u(){Aa.h();D.getExtension("WEBGL_lose_context").loseContext()}if(navigator.userAgent&&-1!==navigator.userAgent.indexOf("forceWebGL1"))return!1;
var l=document.createElement("canvas");l.setAttribute("width",1);l.setAttribute("height",1);var D=null;try{D=l.getContext("webgl2",g)}catch(F){return!1}if(!D)return!1;d(D);ca.jc(D);g=ca.jb(D);if(!g.aa&&!g.ba)return u(),!1;g=Aa.$b(D,g);u();return g?!0:!1}function d(g){g.clearColor(0,0,0,0);g.disable(g.DEPTH_TEST);g.disable(g.BLEND);g.disable(g.DITHER);g.disable(g.STENCIL_TEST);g.disable(g.CULL_FACE);g.GENERATE_MIPMAP_HINT&&g.hint(g.GENERATE_MIPMAP_HINT,g.FASTEST);g.disable(g.SAMPLE_ALPHA_TO_COVERAGE);
g.disable(g.SAMPLE_COVERAGE);g.depthFunc(g.LEQUAL);g.clearDepth(1)}var e=null,m=null,f=null,r=null,n=!0,h=null,v=null,k={D:function(){return e.width},R:function(){return e.height},xf:function(){return e},vf:function(){return b},ca:function(){return n},flush:function(){b.flush()},Nd:function(){h||(h=new Uint8Array(e.width*e.height*4));b.readPixels(0,0,e.width,e.height,b.RGBA,b.UNSIGNED_BYTE,h);return h},zf:function(){return e.toDataURL("image/jpeg")},Af:function(){sa.J();m||(m=document.createElement("canvas"),
f=m.getContext("2d"));m.width=e.width;m.height=e.height;for(var g=k.Nd(),u=f.createImageData(m.width,m.height),l=m.width,D=m.height,F=u.data,I=0;I<D;++I)for(var O=D-I-1,C=0;C<l;++C){var G=4*(I*l+C),E=4*(O*l+C);F[G]=g[E];F[G+1]=g[E+1];F[G+2]=g[E+2];F[G+3]=g[E+3]}f.putImageData(u,0,0);return m.toDataURL("image/png")},yf:function(g){!m&&g&&(m=document.createElement("canvas"),f=m.getContext("2d"));var u=g?m:document.createElement("canvas");u.width=e.width;u.height=e.height;(g?f:u.getContext("2d")).drawImage(e,
0,0);return u},m:function(g){g.Bd&&!g.hb?e=document.getElementById(g.Bd):g.hb&&(e=g.hb);e||(e=document.createElement("canvas"));e.width=g&&void 0!==g.width?g.width:512;e.height=g&&void 0!==g.height?g.height:512;"undefined"===typeof g&&(g={});void 0===g.premultipliedAlpha&&(g.premultipliedAlpha=!1);void 0===g.Dc&&(g.Dc=!0);void 0===g.antialias&&(g.antialias=!1);if(b)n=b instanceof WebGL2RenderingContext;else{n=!0;var u={antialias:g.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:g.premultipliedAlpha,
stencil:!1,depth:g.Dc};navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("noAntialiasing")&&(u.antialias=!1);var l=c(u);!l&&u.antialias&&(u.antialias=!1,l=c(u));l&&(b=e.getContext("webgl2",u));b?n=!0:((b=e.getContext("webgl",u))||(b=e.getContext("experimental-webgl",u)),n=!1)}if(!b)return a("WebGL1 and 2 are not enabled");(r=b.getExtension("WEBGL_lose_context"))&&g.Sc&&(v=g.Sc,e.addEventListener("webglcontextlost",v,!1));if(!ca.m())return a("Not enough GL capabilities");d(b);y.m();
S.m();return Aa.$b(b,ca.Md())?!0:a("Cannot filter float textures")},h:function(){b&&(ca.h(),Aa.h());r&&v&&(e.removeEventListener("webglcontextlost",v,!1),r=v=null);b=h=f=m=e=null}};return k}(),ua=function(){function a(){null===c&&("undefined"!==typeof y?c=y:"undefined"!==typeof JEShaders&&(c=JEShaders))}var c=null;a();return{xe:function(d){c!==d&&(c&&c.L(),c=d)},Pa:function(){return c.Pa()},ma:function(){return c.ma()},ab:function(d){return c.ab(d)},Nb:function(){return c.Nb()},L:function(){return c.L()},
set:function(d){return c.set(d)},$a:function(d){a();return c.$a(d)},Lb:function(d){a();return c.Lb(d)},h:function(){return c.h()}}}(),Da=function(){function a(p){b.bindTexture(b.TEXTURE_2D,p)}function c(p){t[0]=p;p=A[0];var L=p>>16&32768,J=p>>12&2047,q=p>>23&255;return 103>q?L:142<q?L|31744|((255==q?0:1)&&p&8388607):113>q?(J|=2048,L|(J>>114-q)+(J>>113-q&1)):L=(L|q-112<<10|J>>1)+(J&1)}function d(p){var L=new Uint16Array(p.length);p.forEach(function(J,q){L[q]=c(J)});return L}function e(){if(null!==
N.vb)return N.vb;var p=f(d([1,1,1,1]));return null===p?!0:N.vb=p}function m(){if(null!==N.wb)return N.wb;var p=f(new Uint8Array([255,255,255,255]));return null===p?!0:N.wb=p}function f(p){if(!ua.Pa()||!F)return null;var L=null;try{var J=b.getError();if("FUCKING_BIG_ERROR"===J)return!1;L=B.instance({isFloat:!1,K:!0,array:p,width:1});J=b.getError();if(J!==b.NO_ERROR)return!1}catch(q){return!1}ka.J();b.viewport(0,0,1,1);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT);ua.set("s0");L.Yb(0);la.g(!0,!0);
p=new Uint8Array(4);b.readPixels(0,0,1,1,b.RGBA,b.UNSIGNED_BYTE,p);p=.9<p[0];L.remove();ka.Z();return p}var r=0,n=null,h=0,v=null,k=null,g=null,u=null,l=null,D=null,F=!1,I=[],O={isFloat:!1,isPot:!0,isLinear:!1,isMipmap:!1,isAnisotropicFiltering:!1,isMirrorX:!1,isMirrorY:!1,isSrgb:!1,isKeepArray:!1,isFlipY:null,width:0,height:0,url:null,array:null,data:null,H:null,$d:!1,K:!1,fa:null,Ta:4,Ab:0},C=!1,G=null,E=null,aa=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],W=!1,w=!1,t=new Float32Array(1),A=new Int32Array(t.buffer),
N={vb:null,wb:null},B={m:function(){F||(l=[b.RGB,null,b.RGB,b.RGBA],D=[b.RGB,null,b.RGB,b.RGBA],n=[b.TEXTURE0,b.TEXTURE1,b.TEXTURE2,b.TEXTURE3,b.TEXTURE4,b.TEXTURE5,b.TEXTURE6,b.TEXTURE7],W="undefined"!==typeof JEContext,w="undefined"!==typeof ca,W&&JEContext.Wf()&&n.push(b.TEXTURE8,b.TEXTURE9),v=[-1,-1,-1,-1,-1,-1,-1,-1],u=[b.UNSIGNED_BYTE,b.FLOAT,b.FLOAT],F=!0)},Xd:function(){if(!k){for(var p=new Float32Array(16384),L=0;16384>L;++L)p[L]=2*Math.random()-1;k={random:B.instance({isFloat:!0,isPot:!0,
array:p,width:64}),gd:B.instance({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}B.Ke()},Nf:function(){return k.gd},Ke:function(){u[1]=ca.tb(b)},ue:function(){D=l=[b.RGBA,b.RGBA,b.RGBA,b.RGBA]},$f:function(p,L){y.set("s1");ka.J();var J=p.D(),q=p.R();b.viewport(0,0,J,q);p.b(0);la.g(!1,!1);b.readPixels(0,0,J,q,b.RGBA,b.UNSIGNED_BYTE,L)},rc:function(p,L,J,q,ea,va,Ba){p.activeTexture(p.TEXTURE0);var qa=p.createTexture();p.bindTexture(p.TEXTURE_2D,qa);ea=ea instanceof Float32Array?ea:new Float32Array(ea);
0!==pa.fe(ea.length)%1&&(p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE));p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST);p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST);p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,va);p.texImage2D(p.TEXTURE_2D,0,p.RGBA,J,q,0,p.RGBA,p.FLOAT,ea);p.bindTexture(p.TEXTURE_2D,null);p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,!1);Ba&&(ka.Z(),y.set("s0"));p.viewport(0,0,J,q);p.framebufferTexture2D(p.FRAMEBUFFER,
p.COLOR_ATTACHMENT0,p.TEXTURE_2D,L,0);p.bindTexture(p.TEXTURE_2D,qa);Ba?la.g(!0,!0):S.Ja(p);p.deleteTexture(qa);F&&(v[0]=-1,g=null,r=0)},instance:function(p){function L(z){var M=b.getError();if("FUCKING_BIG_ERROR"===M)return!1;b.texImage2D(b.TEXTURE_2D,0,fa,da,ha,z);M=b.getError();M!==b.NO_ERROR&&da!==b.RGBA&&(da=b.RGBA,b.texImage2D(b.TEXTURE_2D,0,fa,da,ha,z));return!0}function J(){if(!yb){a(ra);wa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,wa);q.isPot?(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,q.isMirrorX?
b.MIRRORED_REPEAT:b.REPEAT),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,q.isMirrorY?b.MIRRORED_REPEAT:b.REPEAT)):(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE));q.isAnisotropicFiltering&&"undefined"!==typeof JESETTINGS&&b.texParameterf(b.TEXTURE_2D,JEContext.Bf().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.Ne);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,q.isLinear?b.LINEAR:b.NEAREST);q.isLinear?b.texParameteri(b.TEXTURE_2D,
b.TEXTURE_MIN_FILTER,q.isMipmap&&!Ja?b.NEAREST_MIPMAP_LINEAR:b.LINEAR):b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,q.isMipmap&&!Ja?b.NEAREST_MIPMAP_NEAREST:b.NEAREST);da=l[q.Ta-1];fa=D[q.Ta-1];ha=u[va];if(ca.ca()){var z=b.RGBA32F;da===b.RGBA&&ha===b.FLOAT?q.isMipmap||q.isLinear?fa=Aa.Pd(b):ca.ac()?z&&(fa=z):fa=b.RGBA16F||b.RGBA:da===b.RGB&&ha===b.FLOAT&&z&&(fa=z,da=b.RGBA)}if(q.K&&!q.isFloat||q.isFloat&&q.isMipmap&&Aa.ee())(z=b.RGBA16F)&&(fa=z),ha=ca.tb(b);q.Ab&&(Ya=q.Ab);q.isSrgb&&4===q.Ta&&
(da=JEContext.Lf());if(q.H)L(q.H);else if(q.url)L(Fa);else if(xa){z=xa;try{"FUCKING_BIG_ERROR"!==b.getError()&&(b.texImage2D(b.TEXTURE_2D,0,fa,P,Q,0,da,ha,z),b.getError()!==b.NO_ERROR&&(b.texImage2D(b.TEXTURE_2D,0,fa,P,Q,0,da,ha,null),b.getError()!==b.NO_ERROR&&b.texImage2D(b.TEXTURE_2D,0,b.RGBA,P,Q,0,b.RGBA,b.UNSIGNED_BYTE,null)))}catch(Zb){b.texImage2D(b.TEXTURE_2D,0,fa,P,Q,0,da,ha,null)}q.isKeepArray||(xa=null)}else z=b.getError(),"FUCKING_BIG_ERROR"!==z&&(b.texImage2D(b.TEXTURE_2D,0,fa,P,Q,0,
da,ha,null),z=b.getError(),z!==b.NO_ERROR&&(da=b.RGBA,q.K&&ha!==b.FLOAT&&(ha=b.FLOAT,b.texImage2D(b.TEXTURE_2D,0,fa,P,Q,0,da,ha,null))));if(q.isMipmap)if(!Ja&&Z)Z.sb(),Za=!0;else if(Ja){z=Math.log2(Math.min(P,Q));Ra=Array(1+z);Ra[0]=ra;for(var M=1;M<=z;++M){var ja=Math.pow(2,M),R=P/ja;ja=Q/ja;var Ka=b.createTexture();a(Ka);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texImage2D(b.TEXTURE_2D,0,fa,R,ja,0,da,ha,null);a(null);
Ra[M]=Ka}Za=!0}a(null);v[r]=-1;wa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1);$a=!0;q.fa&&Z&&(q.fa(Z),q.fa=null)}}var q=Object.assign({},O,p),ea=h++;null===q.isFlipY&&(q.isFlipY=q.url||q.array?!0:!1);q.data&&(q.array="string"===typeof q.data?Fb(q.data):q.isFloat?new Float32Array(q.data):new Uint8Array(q.data),q.isFlipY=!1);var va=0,Ba=q.H?!0:!1,qa=null,lb=null,zb=!1,mb=null;q.K=q.K||q.isFloat;q.K&&(va=1);q.$d||ca.ca()||!q.isFloat||!w||ca.ac()||(q.isFloat=!1);q.isFloat&&(va=2);q.isAnisotropicFiltering&&
W&&!JEContext.Qf()&&(q.isAnisotropicFiltering=!1);var ra=b.createTexture(),Fa=null,xa=!1,P=0,Q=0,$a=!1,yb=!1,ab=!1,ya=null,Ca=null,nb=null,Ta=null,fa=null,da=null,ha=null,wa=q.isFlipY,Ob=(p=q.K&&q.isMipmap)&&Aa.ud(),Ja=p&&Ob?!0:!1,Ra=null,Ya=-1,Za=!1,La={Hc:!1,Zb:null,sc:null};q.width&&(P=q.width,Q=q.height?q.height:P);var Z={get:function(){return ra},D:function(){return P},R:function(){return Q},Of:function(){return q.url},Rf:function(){return q.isFloat},Tf:function(){return q.K},Uf:function(){return q.isLinear},
sb:function(){b.generateMipmap(b.TEXTURE_2D)},sd:function(z,M){Ja?(z||(z=Z.wc()),Z.eb(M),a(Ra[z]),v[M]=-1):Z.b(M)},wc:function(){-1===Ya&&(Ya=Math.log(P)/Math.log(2));return Ya},Jd:function(z){if(Ja){z||(z=Z.wc());y.set("s11");Z.eb(0);for(var M=P,ja=Q,R=1;R<=z;++R)M/=2,ja/=2,y.Aa("u7",.25/M,.25/ja),b.viewport(0,0,M,ja),a(Ra[R-1]),b.framebufferTexture2D(ka.Ma(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,Ra[R],0),la.g(!1,1===R);v[0]=-1}else Z.sb()},eb:function(z){z!==r&&(b.activeTexture(n[z]),r=z)},b:function(z){if(!$a)return!1;
Z.eb(z);if(v[z]===ea)return!1;a(ra);v[z]=ea;return!0},Yb:function(z){b.activeTexture(n[z]);r=z;a(ra);v[z]=ea},l:function(){g=Z;b.framebufferTexture2D(ka.Ma(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,ra,0)},P:function(){g=Z;b.viewport(0,0,P,Q);b.framebufferTexture2D(ka.Ma(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,ra,0)},Sb:B.Sb,resize:function(z,M){P=z;Q=M;J()},clone:function(z){z=B.instance({width:P,height:Q,K:q.K,isFloat:q.isFloat,isLinear:q.isLinear,isMirrorY:q.isMirrorY,isFlipY:z?!wa:wa,isPot:q.isPot});ua.set("s0");
ka.Z();z.l();b.viewport(0,0,P,Q);Z.b(0);la.g(!0,!0);return z},ze:function(){b.viewport(0,0,P,Q)},remove:function(){b.deleteTexture(ra);yb=!0;I.splice(I.indexOf(Z),1);Z=null},refresh:function(){Z.Yb(0);wa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);Ba?b.texImage2D(b.TEXTURE_2D,0,fa,da,b.UNSIGNED_BYTE,q.H):b.texImage2D(b.TEXTURE_2D,0,fa,P,Q,0,da,ha,xa);wa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},fc:function(){var z=P*Q*4;Ca=[new Uint8Array(z),new Uint8Array(z),new Uint8Array(z),new Uint8Array(z)];ya=
[new Float32Array(Ca[0].buffer),new Float32Array(Ca[1].buffer),new Float32Array(Ca[2].buffer),new Float32Array(Ca[3].buffer)];nb=new Uint8Array(4*z);Ta=new Float32Array(nb.buffer);ab=!0},Wc:function(){ab||Z.fc();b.readPixels(0,0,P,4*Q,b.RGBA,b.UNSIGNED_BYTE,nb);for(var z=P*Q,M=2*z,ja=3*z,R=0;R<z;++R)ya[0][R]=Ta[R],ya[1][R]=Ta[R+z],ya[2][R]=Ta[R+M],ya[3][R]=Ta[R+ja];return ya},re:function(){La.Hc||(La.Zb=new Uint8Array(P*Q*4),La.sc=new Float32Array(La.buffer),La.Hc=!0);b.readPixels(0,0,P,Q,b.RGBA,
b.UNSIGNED_BYTE,La.Zb);return La.sc},hc:function(z){ka.J();y.set("s12");Z.b(0);if(z)b.viewport(0,0,P,Q),y.Mb("u8",.25,.25,.25,.25),la.g(!1,!0);else for(z=0;4>z;++z)b.viewport(0,Q*z,P,Q),y.Mb("u8",aa[z]),la.g(!1,0===z)},Je:function(z){var M=ha===u[0]&&!m();a(ra);wa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);M?(zb||(qa=document.createElement("canvas"),qa.width=P,qa.height=Q,lb=qa.getContext("2d"),mb=lb.createImageData(P,Q),zb=!0),mb.data.set(z),lb.putImageData(mb,0,0),b.texImage2D(b.TEXTURE_2D,0,fa,da,
ha,qa)):b.texImage2D(b.TEXTURE_2D,0,fa,P,Q,0,da,ha,z);v[r]=ea;wa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},pg:function(z,M){a(ra);M&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);b.texImage2D(b.TEXTURE_2D,0,fa,da,ha,z);v[r]=ea;M&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},eg:function(z,M){var ja=P*Q,R=4*ja;z=q.K?z?"RGBE":"JSON":"RGBA";M&&(z=M);M=ca.ca()&&!1;var Ka=null;switch(z){case "RGBE":Ka="s42";break;case "JSON":Ka=M?"s0":"s12";break;case "RGBA":case "RGBAARRAY":Ka="s6"}ab||("RGBA"===z||"RGBE"===z||
"RGBAARRAY"===z?(Ca=new Uint8Array(R),ab=!0):"JSON"!==z||M||Z.fc());ka.J();y.set(Ka);Z.b(0);R=null;if("RGBA"===z||"RGBE"===z||"RGBAARRAY"===z){b.viewport(0,0,P,Q);la.g(!0,!0);b.readPixels(0,0,P,Q,b.RGBA,b.UNSIGNED_BYTE,Ca);if("RGBAARRAY"===z)return{data:Ca};C||(G=document.createElement("canvas"),E=G.getContext("2d"),C=!0);G.width=P;G.height=Q;ja=E.createImageData(P,Q);ja.data.set(Ca);E.putImageData(ja,0,0);R=G.toDataURL("image/png")}else if("JSON"===z)if(M)R=new Float32Array(ja),b.viewport(0,0,P,
Q),la.g(!0,!0),b.readPixels(0,0,P,Q,b.RGBA,b.FLOAT,R);else{for(R=0;4>R;++R)b.viewport(0,Q*R,P,Q),y.Mb("u8",aa[R]),la.g(!R,!R);Z.Wc();R=Array(ja);for(M=0;M<ja;++M)R[4*M]=ya[0][M],R[4*M+1]=ya[1][M],R[4*M+2]=ya[2][M],R[4*M+3]=ya[3][M]}return{format:z,data:R,width:P,height:Q,isMirrorY:q.isMirrorY,isFlipY:"RGBA"===z?q.isFlipY:!q.isFlipY}}};q.isMipmap&&!Ja&&$a&&!Za&&(Z.sb(),Za=!0);if(q.url)a(ra),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,1,1,0,b.RGBA,b.UNSIGNED_BYTE,null),Fa=new Image,Fa.Ze="Anonymous",Fa.crossOrigin=
"Anonymous",Fa.src=q.url,Fa.onload=function(){P=Fa.width;Q=Fa.height;J()};else if(q.H){var Ab=function(){P=void 0!==q.H.videoWidth?q.H.videoWidth:q.H.width;Q=void 0!==q.H.videoHeight?q.H.videoHeight:q.H.height;P?J():setTimeout(Ab,1)};Ab()}else q.array?(q.K&&!q.isFloat?q.array instanceof Uint16Array?(xa=q.array,J()):e()?(xa=d(q.array),J()):(J(),B.rc(b,ra,Z.D(),Z.R(),q.array,wa,!0)):(xa=q.isFloat?q.array instanceof Float32Array?q.array:new Float32Array(q.array):q.array instanceof Uint8Array?q.array:
new Uint8Array(q.array),J()),q.isKeepArray||(xa&&xa!==q.array&&(xa=null),delete q.array)):J();Z.Kf=Z.D;q.fa&&$a&&(q.fa(Z),q.fa=null);I.push(Z);return Z},J:function(p){p!==r&&(b.activeTexture(n[p]),r=p);v[p]=-1;a(null)},Qe:function(p){k.random.b(p)},Sb:function(){g=null;b.framebufferTexture2D(ka.Ma(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0)},reset:function(){for(var p=0;p<n.length;++p)v[p]=-1;r=-1},cg:function(){r=-1},Ge:function(){for(var p=0;p<n.length;++p)B.J(p)},tc:function(){k&&(k.random.remove(),
k.gd.remove())},og:function(p,L){if("RGBA"===p.format||"RGBE"===p.format){var J=new Image;J.src=p.data;J.onload=function(){B.instance({isMirrorY:p.isMirrorY,isFlipY:p.isFlipY,isFloat:!1,H:J,fa:function(q){if("RGBA"===p.format)L(q);else{var ea=p.width,va=p.height,Ba=B.instance({isMirrorY:p.isMirrorY,isFloat:!0,width:ea,height:va,isFlipY:p.isFlipY});ka.Z();b.viewport(0,0,ea,va);y.set("s43");Ba.l();q.b(0);la.g(!0,!0);B.J(0);L(Ba);b.flush();setTimeout(q.remove,50)}}})}}else"JSON"===p.format?L(B.instance({isFloat:!0,
isFlipY:p.isFlipY,width:p.width,height:p.height,array:new Float32Array(p.data)})):L(!1)},h:function(){g&&(sa.Z(),B.Sb(),sa.J());B.Ge();I.slice(0).forEach(function(p){p.remove()});I.splice(0);F=!1;h=0;"undefined"!==typeof Aa&&Aa.h();k=null}};return B}(),Hb=function(){return{instance:function(a){var c=[Da.instance(a),Da.instance(a)],d=[c[1],c[0]],e=d,m={we:function(f){e[1].l();e[0].b(f);m.dd()},fg:function(f){e[1].P();e[0].b(f);m.dd()},dd:function(){e=e===c?d:c},refresh:function(){e[0].refresh();e[1].refresh()},
b:function(f){e[0].b(f)},Pe:function(f){e[1].b(f)},Ff:function(){return e[0]},remove:function(){e[0].remove();e[1].remove();e=null}};return m}}}(),la=function(){function a(h){var v={Y:null,F:null};v.Y=h.createBuffer();h.bindBuffer(h.ARRAY_BUFFER,v.Y);h.bufferData(h.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),h.STATIC_DRAW);v.F=h.createBuffer();h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,v.F);h.bufferData(h.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),h.STATIC_DRAW);return v}var c=null,d=0,e=!1,m=[],
f=-2,r=-2,n={reset:function(){r=f=-2},m:function(){e||(c=a(b),n.ta(),e=!0)},instance:function(h){var v=d++,k=h.F?h.F.length:0,g="undefined"===typeof h.mode?b.STATIC_DRAW:h.mode,u=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,u);b.bufferData(b.ARRAY_BUFFER,h.Y instanceof Float32Array?h.Y:new Float32Array(h.Y),g);f=v;var l=null,D=null,F=null;if(h.F){l=b.createBuffer();b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,l);var I=null;65536>h.F.length?(I=Uint16Array,D=b.UNSIGNED_SHORT,F=2):(I=Uint32Array,D=b.UNSIGNED_INT,
F=4);I=h.F instanceof I?h.F:new I(h.F);b.bufferData(b.ELEMENT_ARRAY_BUFFER,I,g);r=v}var O={td:function(C){f!==v&&(b.bindBuffer(b.ARRAY_BUFFER,u),f=v);C&&ua.Nb()},qd:function(){r!==v&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,l),r=v)},bind:function(C){O.td(C);O.qd()},af:function(){b.drawElements(b.TRIANGLES,k,D,0)},bf:function(C,G){b.drawElements(b.TRIANGLES,C,D,G*F)},remove:function(){b.deleteBuffer(u);h.F&&b.deleteBuffer(l);O=null}};m.push(O);return O},ta:function(){-1!==f&&(b.bindBuffer(b.ARRAY_BUFFER,
c.Y),f=-1);-1!==r&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,c.F),r=-1)},g:function(h,v){h&&la.ta();v&&ua.ma();b.drawElements(b.TRIANGLES,3,b.UNSIGNED_SHORT,0)},Ja:function(h){h=h||b;var v=a(h);h.bindBuffer(h.ARRAY_BUFFER,v.Y);h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,v.F);ua.ab(h);h.drawElements(h.TRIANGLES,3,h.UNSIGNED_SHORT,0);h.deleteBuffer(v.Y);h.deleteBuffer(v.F);n.reset();e&&(n.ta(),ua.ma())},tc:function(){var h=b,v=c;h.deleteBuffer(v.Y);h.deleteBuffer(v.F)},h:function(){n.tc();m.forEach(function(h){h.remove()});
b.bindBuffer(b.ARRAY_BUFFER,null);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,null);n.reset();e=!1;m.splice(0);d=0}};return n}(),ka=function(){var a=null,c=null,d=null,e=!1,m=[],f={v:-2,qc:1},r={Pa:function(){return e},m:function(){if(!e){a=b.createFramebuffer();var n=ca.ca();c=n&&b.DRAW_FRAMEBUFFER?b.DRAW_FRAMEBUFFER:b.FRAMEBUFFER;d=n&&b.READ_FRAMEBUFFER?b.READ_FRAMEBUFFER:b.FRAMEBUFFER;e=!0}},Cf:function(){return c},Qd:function(){return d},Ma:function(){return b.FRAMEBUFFER},Jf:function(){return f},uf:function(){return a},
instance:function(n){void 0===n.Cc&&(n.Cc=!1);var h=n.W?n.W:null,v=n.width,k=void 0!==n.height?n.height:n.width,g=a,u=null,l=!1,D=!1,F=0;h&&(v=v?v:h.D(),k=k?k:h.R());var I={$c:function(){l||(g=b.createFramebuffer(),l=!0,F=f.qc++)},jd:function(){I.$c();I.l();u=b.createRenderbuffer();b.bindRenderbuffer(b.RENDERBUFFER,u);b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,v,k);b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,u);b.clearDepth(1)},bind:function(O,C){F!==f.v&&(b.bindFramebuffer(c,
g),f.v=F);h&&h.l();C&&b.viewport(0,0,v,k);O&&b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)},Oe:function(){F!==f.v&&(b.bindFramebuffer(c,g),f.v=F)},clear:function(){b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)},We:function(){b.clear(b.COLOR_BUFFER_BIT)},Xe:function(){b.clear(b.DEPTH_BUFFER_BIT)},ze:function(){b.viewport(0,0,v,k)},l:function(){F!==f.v&&(b.bindFramebuffer(c,g),f.v=F)},rtt:function(O){h=O;f.v!==F&&(b.bindFramebuffer(b.FRAMEBUFFER,g),f.v=F);O.l()},J:function(){b.bindFramebuffer(c,null);
f.v=-1},resize:function(O,C){v=O;k=C;u&&(b.bindRenderbuffer(b.RENDERBUFFER,u),b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,v,k))},remove:function(){g===a||D||(b.bindFramebuffer(c,g),b.framebufferTexture2D(c,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0),u&&b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,null),b.bindFramebuffer(c,null),b.deleteFramebuffer(g),u&&b.deleteRenderbuffer(u));D=!0}};n.Cc&&I.jd();m.push(I);return I},J:function(){b.bindFramebuffer(c,null);f.v=-1},He:function(){b.bindFramebuffer(c,
null);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);b.viewport(0,0,ca.D(),ca.R());f.v=-1},reset:function(){f.v=-2},Z:function(){0!==f.v&&(b.bindFramebuffer(c,a),f.v=0)},clear:function(){b.viewport(0,0,ca.D(),ca.R());b.clear(b.COLOR_BUFFER_BIT)},h:function(){r.J();m.forEach(function(n){n.remove()});b.deleteFramebuffer(a);r.reset();e=!1;m.splice(0);f.v=-2;f.qc=1}};return r}(),ca=function(){function a(){d="undefined"===typeof Qa?JEContext:Qa;e=!0}function c(k,g){for(var u=0;u<k.length;++u){var l=g.getExtension(k[u]);
if(l)return l}return null}var d=null,e=!1,m={Ec:!1,Ob:null,Pb:null,Ic:!1,ce:!1,Qb:null,Jc:!1,Rb:null,Fc:!1,fb:null,Yd:!1,gb:null,Zd:!1},f=null,r={aa:!0,ba:!0,rb:!0},n=null,h="undefined"===typeof window?{}:window,v={m:function(){if(e)return!0;f=Object.assign({},m);n=Object.assign({},r);e||a();var k=b;if(!f.Ec){f.Ob=v.mc(k);h.GL_EXT_FLOAT=f.Ob;f.Ic=f.Ob?!0:!1;if(f.Ic||v.ca())f.Pb=v.nc(k),f.ce=f.Pb?!0:!1,h.GL_EXT_FLOATLINEAR=f.Pb;f.Ec=!0}if(!f.Fc){f.Qb=v.Ia(k);f.Qb&&(f.Jc=!0,h.GL_EXT_HALFFLOAT=f.Qb);
if(f.Jc||v.ca())f.Rb=v.oc(k),h.GL_EXT_HALFFLOATLINEAR=f.Rb;f.Pf=f.Rb?!0:!1;f.Fc=!0}f.fb=v.kc(k);f.Yd=f.fb?!0:!1;h.GL_EXT_COLORBUFFERFLOAT=f.fb;f.gb=v.lc(k);f.Zd=f.gb?!0:!1;h.GL_EXT_COLORBUFFERHALFFLOAT=f.gb;ka.m();Da.m();if(!v.Cd())return!1;la.m();Da.Xd();return!0},D:function(){e||a();return d.D()},R:function(){e||a();return d.R()},ca:function(){e||a();return d.ca()},jc:function(k){v.kc(k);v.lc(k);v.mc(k);v.nc(k);v.Ia(k);v.oc(k)},kc:c.bind(null,["EXT_color_buffer_float","WEBGL_color_buffer_float",
"OES_color_buffer_float"]),lc:c.bind(null,["EXT_color_buffer_half_float","WEBGL_color_buffer_half_float","OES_color_buffer_half_float"]),mc:c.bind(null,["OES_texture_float","MOZ_OES_texture_float","WEBKIT_OES_texture_float"]),nc:c.bind(null,["OES_texture_float_linear","MOZ_OES_texture_float_linear","WEBKIT_OES_texture_float_linear"]),Ia:c.bind(null,["OES_texture_half_float","MOZ_OES_texture_half_float","WEBKIT_OES_texture_half_float"]),oc:c.bind(null,["OES_texture_half_float_linear","MOZ_OES_texture_half_float_linear",
"WEBKIT_OES_texture_half_float_linear"]),tb:function(k){var g=v.Ia(k);return g&&g.HALF_FLOAT_OES?g.HALF_FLOAT_OES:k.HALF_FLOAT||k.FLOAT},Md:function(){return n},ac:function(){return n.aa},Se:function(){return n.ba},Re:function(){return n.rb},bb:function(k,g,u){function l(){k.bindTexture(k.TEXTURE_2D,null);k.bindFramebuffer(D,null);k.deleteTexture(O);k.deleteFramebuffer(I)}var D=k.FRAMEBUFFER,F=k.NEAREST,I=k.createFramebuffer();k.bindFramebuffer(D,I);var O=k.createTexture();k.bindTexture(k.TEXTURE_2D,
O);k.pixelStorei(k.UNPACK_FLIP_Y_WEBGL,!1);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,F);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,F);k.texImage2D(k.TEXTURE_2D,0,g,1,1,0,k.RGBA,u,null);k.framebufferTexture2D(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_2D,O,0);if(k.checkFramebufferStatus(k.READ_FRAMEBUFFER||k.FRAMEBUFFER)!==k.FRAMEBUFFER_COMPLETE)return l(),!1;ua.Lb(k);k.clearColor(0,0,0,0);k.viewport(0,0,1,1);k.disable(k.DEPTH_TEST);k.clear(k.COLOR_BUFFER_BIT);la.Ja(k);k.bindFramebuffer(D,
null);ua.$a(k);k.activeTexture(k.TEXTURE0);k.bindTexture(k.TEXTURE_2D,O);la.Ja(k);g=new Uint8Array(4);k.readPixels(0,0,1,1,k.RGBA,k.UNSIGNED_BYTE,g);l();return 3<Math.abs(g[0]-127)?!1:!0},jb:function(k){var g={aa:!1,ba:!1};k.disable(k.BLEND);k.clearColor(0,0,0,0);k.clear(k.COLOR_BUFFER_BIT);k.RGBA32F&&v.bb(k,k.RGBA32F,k.FLOAT)&&(g.aa=!0);!g.aa&&v.bb(k,k.RGBA,k.FLOAT)&&(g.aa=!0);var u=v.tb(k);k.RGBA16F&&v.bb(k,k.RGBA16F,u)&&(g.ba=!0);!g.ba&&v.bb(k,k.RGBA,u)&&(g.ba=!0);return g},Dd:function(){var k=
ka.instance({width:1});k.$c();var g=Da.instance({width:1,isFloat:!0,Ta:3});k.l();g.l();b.flush();b.checkFramebufferStatus(ka.Qd())!==b.FRAMEBUFFER_COMPLETE?(Da.ue(),n.rb=!1):n.rb=!0;k.remove();g.remove()},Cd:function(){var k=v.jb(b);Object.assign(n,k);if(!n.aa&&!n.ba)return!1;v.Dd();return!0},h:function(){Da.h();ua.h();ka.h();la.h();e=!1}};return v}(),S=la,sa=ka,X=Da,Aa=function(){function a(C,G,E,aa){l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,aa?l.NEAREST_MIPMAP_NEAREST:l.LINEAR);var W=null;
if(null!==E)try{W=l.getError();if("FUCKING_BIG_ERROR"===W)return!1;l.texImage2D(l.TEXTURE_2D,0,C,2,2,0,l.RGBA,G,E);W=l.getError();if(W!==l.NO_ERROR)return!1}catch(w){return!1}aa&&l.generateMipmap(l.TEXTURE_2D);l.clear(l.COLOR_BUFFER_BIT);S.Ja(l);W=l.getError();if("FUCKING_BIG_ERROR"===W)return!1;l.readPixels(0,0,1,1,l.RGBA,l.UNSIGNED_BYTE,k);W=l.getError();W===l.INVALID_OPERATION&&"undefined"!==typeof l.PIXEL_PACK_BUFFER&&(l.bindBuffer(l.PIXEL_PACK_BUFFER,null),l.readPixels(0,0,1,1,l.RGBA,l.UNSIGNED_BYTE,
k),W=l.getError());if(W!==l.NO_ERROR)return!1;if(E=0!==k[0])h.Uc=G,h.Bc=C;return E}function c(C,G){return D.aa&&a(C,l.FLOAT,new Float32Array(u),G)?(n=r.Vb,!0):!1}function d(C,G,E){if(!D.ba)return!1;var aa=ca.Ia(l);if(aa&&aa.HALF_FLOAT_OES&&a(C,aa.HALF_FLOAT_OES,new Uint16Array(u),G)||l.HALF_FLOAT&&a(C,l.HALF_FLOAT,new Uint16Array(u),G)||a(C,l.FLOAT,new Float32Array(u),G))return n=r.qa,!0;l.bindTexture(l.TEXTURE_2D,E);l.texImage2D(l.TEXTURE_2D,0,l.RGBA,1,1,0,l.RGBA,l.UNSIGNED_BYTE,null);l.bindFramebuffer(h.Ga,
O);Da.rc(l,E,1,1,new Float32Array(u),!1,!1);l.bindFramebuffer(h.Ga,null);l.bindTexture(l.TEXTURE_2D,E);return a(C,null,null,G)?(n=r.qa,!0):!1}function e(C,G,E){v=!0;if(d(C,!0,E)||c(G,!0))return!0;v=!1;return d(C,!1,E)||c(G,!1)?!0:!1}function m(C){if(n===r.L){l=C||b;n=r.RGBA8;v=!0;ca.jc(l);D||(D=ca.jb(l));sa.reset();O=l.createFramebuffer();h.Ga=l.DRAW_FRAMEBUFFER||l.FRAMEBUFFER;l.bindFramebuffer(h.Ga,null);l.clearColor(0,0,0,0);l.viewport(0,0,1,1);y.L();F=y.$a(l);C=l.createTexture();l.activeTexture(l.TEXTURE0);
l.bindTexture(l.TEXTURE_2D,C);l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.REPEAT);l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.REPEAT);l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.NEAREST);I=C;var G=C=l.RGBA,E=l.RGBA16F,aa=l.RGBA32F;aa&&(C=aa);E&&(G=E);if((E||aa)&&e(G,C,I))return f(),!0;C=G=l.RGBA;if(e(G,C,I))return f(),!0;n=r.RGBA8;f();return!1}}function f(){l.deleteProgram(F.ha);l.deleteTexture(I);I=F=null}var r={L:-1,Vb:3,qa:2,RGBA8:0},n=r.L,h={Uc:null,Bc:null,Ga:null},v=!0,k=new Uint8Array(4),
g=[.8,1,.8,1],u=g.concat(g,g,g),l=null,D=null,F=null,I=null,O=null;return{ud:function(C){m(C);return v},$b:function(C,G){n===r.L&&(typeof("undefined"!==G)&&(D=G),m(C));return n!==r.RGBA8},Sf:function(C){m(C);return n===r.Vb},ee:function(C){m(C);return n===r.qa},Df:function(C){m(C);return h.Uc},Pd:function(C){m(C);return h.Bc},h:function(){l=null;v=!0;n=r.L;D=null}}}(),Pb=function(){return{instance:function(a){var c=X.instance(a.alpha),d=X.instance(a.beta);return{Fd:function(){c.b(1);d.b(2)}}}}}(),
Db=function(){return{instance:function(a){var c=null,d=!1,e=!1,m=null,f=!1,r=!1,n=null,h="undefined"===typeof a.preprocessing?!1:a.preprocessing,v="undefined"===typeof a.preprocessingSize?a.size:a.preprocessingSize;a.mask&&(d=!0,Y&&void 0!==Y.pd&&(a.mask=Y.pd+a.mask),c=X.instance({isFloat:!1,url:a.mask}));var k=!1;a.customInputShader&&(k="s44",y.Wb({name:"_",id:k,a:a.customInputShader,ng:["uSource"],precision:"lowp"}),y.N(k,[{type:"1i",name:"_",value:0}]));switch(h){case "sobel":n="s31";f=!0;break;
case "meanNormalization":n="s32";f=!0;break;case "grayScale":n="s28";f=!1;break;case "grayScaleTilt":n="s29";r=!0;f=!1;break;case "rgbGrayTilt":n="s30";r=!0;f=!1;break;case "copy":n=k?k:"s0";break;case "inputLightRegulation":n=k?k:"s28";m=Qb.instance({Ac:v,Tc:a.size,Pc:a.nBlurPass,de:!1});e=!0;break;case "direct":case "none":n=!1;break;default:n="s3"}r&&y.N(n,[{name:"u26",type:"1f",value:a.tilt}]);d&&(n+="Mask");var g=X.instance({isFloat:!1,isPot:!1,width:a.size}),u={D:function(){return v},ub:function(){return u.D()},
Td:function(){return e?m.xc():g},M:function(){sa.Z();n&&(y.set(n),f&&y.B("u27",1/a.size),g.P(),d&&c.b(1),S.g(!1,!1),g.b(0),e&&m.process(g))},h:function(){g.remove();d&&c.remove()}};return u}}}(),Eb=function(){return{instance:function(a){"undefined"===typeof a.normalize&&(a.normalize=!1);var c={input:null,Da:null,xb:null,U:null,Va:null,Fb:null,Gb:null},d=null,e=[],m=[],f=!1,r=null,n=!0,h=-1,v=a.isReorganize?a.isReorganize:!1,k=a.kernelsCount?!0:!1,g=a.dynPelu?Pb.instance(a.dynPelu):!1,u=g?!0:!1,l=
{isEnabled:!1};a.be?(a.sparsity="undefined"!==typeof a.sparsity?a.sparsity:a.Xa.ub(),n=!1):"full"===a.connectivityUp&&(a.sparsity=a.Xa.ub());var D={elu:"s15",elu01:"s16",relu:"s14",arctan:"s18",sigmoid:"s13",copy:"s0",softplus:"s19",dynPelu:"s17"}[a.activation],F=a.sparsity*a.sparsity,I=!1,O=a.size,C="";if(a.maxPooling){switch(a.maxPooling.size){case 2:C="s33";break;case 4:C="s34"}I=!0;O/=a.maxPooling.size;c.Fb=X.instance({isFloat:!0,isPot:!1,width:O})}var G=void 0!==a.le&&a.le?!0:!1,E=null,aa=null,
W=null;if(G){E="s45"+a.index.toString();y.zc("s45",E,[((a.normalization.n-1)/2).toFixed(1)]);y.N(E,[{type:"1i",name:"u1",value:0},{type:"2f",name:"u7",value:[1/a.size,1/a.size]},{type:"1f",name:"u6",value:a.normalization.alpha},{type:"1f",name:"u9",value:a.normalization.beta},{type:"1f",name:"u31",value:a.normalization.k}]);var w={isFloat:!0,isPot:!0,width:a.size};aa=X.instance(w);W=X.instance(w)}var t=-1,A=null;n&&(c.U=X.instance({isFloat:!0,isPot:!1,width:a.size}));c.Da=X.instance(a.bias);var N=
{D:function(){return a.size},ub:function(){return O},uc:function(){return a.classesCount},rd:function(B){d.b(B)},pe:function(){a.remap&&a.remap.isEnabled&&(l={isEnabled:!0,he:X.instance({isFloat:!1,isFlipY:!1,array:new Uint8Array(a.remap.maskTexture.data),width:a.remap.maskTexture.width,isPot:!1}),Qa:a.remap.layers.map(function(B){return a.parent.Sd(B)}),depth:a.remap.depth})},ve:function(){switch(a.connectivityUp){case "direct":A=Rb.instance(a.connectivity);break;case "square":A=Sb.instance(a.connectivity);
break;case "squareFast":A=Tb.instance(a.connectivity,a.activation);break;case "full":A=Ub.instance(a.connectivity);break;case "conv":h=a.kernelsCount,A=Vb.instance(a.connectivity),v&&(c.Va=X.instance({width:O,isFloat:!0,isFlipY:!1,isPot:!1}))}if(A.na){var B=a.size*a.sparsity;t=Math.log(B/a.size)/Math.log(2);c.input=X.instance({isMipmap:!0,isFloat:!0,isPot:!0,width:B,Ab:t});c.xb=X.instance({isFloat:!0,isPot:!0,width:a.size})}},M:function(B){d=B;A.na?(c.input.P(),k&&c.Da.b(2),A.M(l),c.input.b(0),c.input.Jd(t),
c.xb.P(),k?y.set("s0"):(y.set("s27"),y.B("u25",F),c.Da.b(1)),c.input.sd(t,0),S.g(!1,!1),y.set(D),G?aa.l():c.U.l(),c.xb.b(0),u&&g.Fd(),S.g(!1,!1)):(c.U.P(),c.Da.b(1),A.M());G&&(y.set(E),W.l(),aa.b(0),S.g(!1,!1),y.set("s46"),y.B("u6",1),c.U.l(),W.b(1),S.g(!1,!1));if(n)return I?(c.Fb.P(),c.U.b(0),y.set(C),y.Aa("u7",1/a.size,1/a.size),S.g(!1,!1),B=c.Fb):B=c.U,B.b(0),v&&(c.Va.l(),y.set("s21"),y.Aa("u12",h,O/h),S.g(!1,!1),B=c.Va,c.Va.b(0)),B;B=c.U;a.normalize&&(y.set("gpuRawAvg"===f?"s8":"s7"),y.B("u4",
1/a.size),c.Gb.P(),c.U.b(0),S.g(!1,!1),B=c.Gb);switch(f){case "cpuRGBA2Float":B.hc(!1);B=N.qe(B);r(B);break;case "cpuMeanFloat":B.hc(!0);B=B.re();r(B);break;case "gpuRawAvg":case "gpuRaw":B.b(0);case "none":null!==r&&r(B)}return!1},Ad:function(B){B&&(f=B.Hb||"none",r=B.Eb||null);c.U=X.instance({isFloat:!0,isPot:!0,isMipmap:!1,width:a.size});B="undefined"!==typeof a.classesCount&&a.classesCount?a.classesCount:a.size*a.size;for(var p=0,L=0,J=0;p<B;++p)e.push(L+(a.size-1-J)*a.size),m.push([-1,-1,-1,
-1]),++L,L===a.size&&(L=0,++J);a.normalize&&(c.Gb=X.instance({isFloat:!0,isPot:!0,width:a.size}))},qe:function(B){var p=B.Wc();e.forEach(function(L,J){m[J][0]=p[0][L];m[J][1]=p[1][L];m[J][2]=p[2][L];m[J][3]=p[3][L]});return m},h:function(){for(var B in c){var p=c[B];p&&p.remove()}A&&(A.h(),A=null)}};a.Xa&&N.ve(a.Xa);return N}}}(),Rb=function(){return{instance:function(a){var c=X.instance(a.weights);return{na:!0,La:function(){return 1},h:function(){c.remove()},Wd:function(){return c},M:function(){y.set("s26");
c.b(1);S.g(!1,!1)}}}}}(),Ub=function(){return{instance:function(a){var c=a.fromLayerSize,d=X.instance(a.weights);return{na:!0,La:function(){return c},h:function(){d.remove()},M:function(e){if(e.isEnabled){y.set("s24");e.he.b(3);var m,f=Math.min(e.Qa.length,e.depth);for(m=0;m<f;++m)e.Qa[m].rd(4+m)}else y.set("s23");y.B("u16",a.toLayerSize);d.b(1);S.g(!1,!1)}}}}}(),Sb=function(){return{instance:function(a){for(var c=a.fromLayerSize,d=a.toLayerSize,e=a.toSparsity,m=e*d,f=m/c,r=c/d,n=0,h=0,v=0,k=Array(e*
d*e*d*4),g=Array(e*d*e*d*4),u=Array(c*c),l=0;l<u.length;++l)u[l]=0;l=Math.floor(e/2);for(var D=.5/d,F=.5/c,I=.5/m,O=0;O<d;++O)for(var C=Math.round(O*r),G=0;G<d;++G){var E=Math.round(G*r),aa=O/d,W=G/d;aa+=D;W+=D;for(var w=0;w<e;++w){var t=C+w-l;0>t&&(t+=c);t>=c&&(t-=c);for(var A=0;A<e;++A){var N=n/m,B=h/m,p=E+A-l;0>p&&(p+=c);p>=c&&(p-=c);var L=t/c,J=p/c;B=1-B-1/m;L+=F;J+=F;N+=I;B+=I;var q=O*e+w,ea=G*e+A;ea=d*e-ea-1;q=ea*d*e+q;k[4*q]=N;k[4*q+1]=B;k[4*q+2]=L;k[4*q+3]=J;J=u[p*c+t]++;q=J%f;L=t*f+q;p=p*
f+(J-q)/f;p=c*f-1-p;p=p*c*f+L;g[4*p]=N;g[4*p+1]=B;g[4*p+2]=aa;g[4*p+3]=W;++n>=m&&(n=0,++h);++v}}}u=null;var va=X.instance(a.weights);delete a.weights.data;var Ba=X.instance({width:m,isFloat:!0,array:new Float32Array(g),isPot:!0});g=null;var qa=X.instance({width:m,isFloat:!0,array:new Float32Array(k),isPot:!0});k=null;return{na:!0,La:function(){return f},h:function(){Ba.remove();qa.remove();va.remove()},M:function(){y.set("s22");va.b(1);qa.b(2);S.g(!1,!1)}}}}}(),Vb=function(){return{instance:function(a){var c=
a.kernelsCount,d=a.toSparsity,e=d*a.toLayerSize/a.fromLayerSize,m=X.instance(a.weights);return{na:!0,La:function(){return e},Mf:function(){return d},Wd:function(){return m},h:function(){m.remove()},M:function(){y.set("s25");y.B("u22",c);y.B("u23",d);y.B("u16",a.toLayerSize);y.B("u24",a.fromLayerSize);m.b(1);S.g(!1,!1)}}}}}(),Tb=function(){return{instance:function(a,c){var d=a.fromLayerSize,e=a.toLayerSize,m=a.toSparsity,f=a.stride?a.stride:1,r=m*e/d,n=e<d,h=d/e,v=X.instance(a.weights),k="s47"+[d.toString(),
e.toString(),m.toString(),f.toString(),c].join("_");y.Hd(k)||(a=Nb.Kd(c,"gl_FragColor","gl_FragColor"),e=[{type:"1f",name:"u16",value:e},{type:"1f",name:"u30",value:f}],n&&e.push({type:"1f",name:"u24",value:d}),d=[(n?r:m).toFixed(1),a],n&&d.push(h.toFixed(1)),y.zc(n?"s39":"s38",k,d),y.N(k,e.concat([{type:"1i",name:"u14",value:0},{type:"1i",name:"u21",value:1},{type:"1i",name:"u13",value:3}])));return{na:!1,La:function(){return r},h:function(){v.remove()},M:function(){y.set(k);v.b(3);S.g(!1,!1)}}}}}(),
Qb=function(){return{instance:function(a){var c=a.Pc?a.Pc:3,d=a.Ac?a.Ac:64,e=a.Tc?a.Tc:64,m=a.de?!0:!1;a={isFloat:!1,width:d,isPot:!1,isFlipY:!1};var f=X.instance(a),r=X.instance(a),n=X.instance(a),h=X.instance(a),v=X.instance({isFloat:!0,width:e,isPot:!1,isFlipY:!1}),k=1/d;return{process:function(g){y.set("s35");h.l();S.g(m,!1);y.set("s36");for(var u=0;u<c;++u)f.l(),y.Aa("u7",k,0),S.g(m,!1),n.l(),h.b(0),S.g(m,!1),r.l(),f.b(0),y.Aa("u7",0,k),S.g(m,!1),h.l(),n.b(0),S.g(m,!1),u!==c-1&&r.b(0);y.set("s37");
v.l();g.b(0);r.b(1);h.b(2);S.g(m,!1);v.b(0)},xc:function(){return v}}}}}(),U={Vd:function(){return U.ec()?document.createElement("video"):!1},wa:function(a,c){a[c]=!0;a.setAttribute(c,"true")},xd:function(){var a=!1,c=navigator.userAgent||navigator.vendor||window.opera;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(c)||
/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(c.substr(0,
4)))a=!0;return a},bc:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},Ld:function(){var a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return 2<a.length?[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3]||0,10)]:[0,0,0]},Kc:function(){try{return window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(a){return window.innerHeight>window.innerWidth}},wd:function(){return U.cc()||U.bc()},cc:function(){var a=navigator.userAgent.toLowerCase();return-1!==
a.indexOf("safari")&&-1===a.indexOf("chrome")?!0:!1},sf:function(){return U.xd()?U.Kc()?window.innerHeight/window.innerWidth*45:45:45},ec:function(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?!0:!1},pause:function(a){a.pause()},dg:function(a){a.play()},release:function(a){a.pause();a.videoStream&&a.videoStream.stop();a.videoStream=null},dc:function(a){if(!a)return a;var c=!1;if(a.video){var d=function(e){var m={};"undefined"!==typeof e.min&&(m.min=e.min);"undefined"!==typeof e.max&&
(m.max=e.max);"undefined"!==typeof e.ideal&&(m.ideal=e.ideal);return m};c={};"undefined"!==typeof a.video.width&&(c.width=d(a.video.width));"undefined"!==typeof a.video.height&&(c.height=d(a.video.height));"undefined"!==typeof a.video.facingMode&&(c.facingMode=a.video.facingMode)}c={audio:a.audio,video:c};"undefined"!==typeof a.deviceId&&(c.deviceId=a.deviceId);return c},ed:function(a){var c=a.video.width;a.video.width=a.video.height;a.video.height=c;return a},zd:function(a){function c(g){return[480,
576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(u,l){return Math.abs(u-g)-Math.abs(l-g)})}function d(g){var u=U.dc(a);u=g(u);e.push(u);u.video&&u.video.facingMode&&u.video.facingMode.exact&&(g=u.video.facingMode.exact,u=U.dc(u),delete u.video.facingMode.exact,u.video.facingMode.ideal=g,e.push(u))}var e=[];if(!a||!a.video)return e;if(a.video.width&&a.video.height){if(a.video.width.ideal&&a.video.height.ideal){var m=c(a.video.width.ideal).slice(0,3),f=c(a.video.height.ideal).slice(0,
3),r={},n=0;for(r.ea=void 0;n<m.length;r={ea:r.ea},++n){r.ea=m[n];var h={},v=0;for(h.da=void 0;v<f.length;h={da:h.da},++v)if(h.da=f[v],r.ea!==a.video.width.ideal||h.da!==a.video.height.ideal){var k=Math.max(r.ea,h.da)/Math.min(r.ea,h.da);k<4/3-.1||k>16/9+.1||d(function(g,u){return function(l){l.video.width.ideal=g.ea;l.video.height.ideal=u.da;return l}}(r,h))}}}d(function(g){return U.ed(g)})}a.video.width&&a.video.height&&(a.video.width.ideal&&a.video.height.ideal&&d(function(g){delete g.video.width.ideal;
delete g.video.height.ideal;return g}),d(function(g){delete g.video.width;delete g.video.height;return g}));a.video.facingMode&&(d(function(g){delete g.video.facingMode;return g}),a.video.width&&a.video.height&&d(function(g){U.ed(g);delete g.video.facingMode;return g}));e.push({audio:a.audio,video:!0});return e},De:function(a){if(U.Kc()){if(!a||!a.video)return!1;var c=a.video.width,d=a.video.height;if(!c||!d)return!1;if(c.ideal&&d.ideal&&c.ideal>d.ideal)return a.video.height=c,a.video.width=d,!0}return!1},
Sa:function(a){a.volume=0;U.wa(a,"muted");if(U.cc()){if(1===a.volume){var c=function(){a.volume=0;window.removeEventListener("mousemove",c,!1);window.removeEventListener("touchstart",c,!1)};window.addEventListener("mousemove",c,!1);window.addEventListener("touchstart",c,!1)}setTimeout(function(){a.volume=0;U.wa(a,"muted")},5)}},fd:function(a,c,d){return new Promise(function(e,m){if(a.srcObject&&a.srcObject.getVideoTracks){var f=a.srcObject.getVideoTracks();1!==f.length?m("INVALID_TRACKNUMBER"):(f=
f[0],c?U.get(a,e,m,d):(f.stop(),e()))}else m("BAD_IMPLEMENTATION")})},yc:function(a,c,d,e){function m(r){f||(f=!0,d(r))}var f=!1;return navigator.mediaDevices.getUserMedia(e).then(function(r){function n(){setTimeout(function(){if(a.currentTime){var h=a.videoWidth,v=a.videoHeight;if(0===h||0===v)m("VIDEO_NULLSIZE");else{h&&(a.style.width=h.toString()+"px");v&&(a.style.height=v.toString()+"px");h={vd:null,Ae:null,ie:null};try{var k=r.getVideoTracks()[0];k&&(h.ie=k,h.vd=k.getCapabilities(),h.Ae=k.getSettings())}catch(g){}U.wd()?
a.parentNode&&null!==a.parentNode?(f||c(a,r,h),setTimeout(function(){a.play()},100)):(document.body.appendChild(a),U.Sa(a),f||c(a,r,h),setTimeout(function(){a.style.transform="scale(0.0001,0.0001)";a.style.position="fixed";a.style.bottom="0px";a.style.right="0px";U.Sa(a);setTimeout(function(){a.play()},100)},80)):f||c(a,r,h)}}else m("VIDEO_NOTSTARTED")},700)}"undefined"!==typeof a.srcObject?a.srcObject=r:(a.src=window.URL.createObjectURL(r),a.videoStream=r);U.Sa(a);a.addEventListener("loadeddata",
function(){var h=a.play();U.Sa(a);"undefined"===typeof h?n():h.then(function(){n()}).catch(function(){m("VIDEO_PLAYPROMISEREJECTED")})},!1)}).catch(function(r){m(r)})},get:function(a,c,d,e){if(!a)return d&&d("VIDEO_NOTPROVIDED"),!1;if(!U.ec())return d&&d("MEDIASTREAMAPI_NOTFOUND"),!1;if(e&&e.video){if(U.bc()){var m=U.Ld();(12>m[0]||12===m[0]&&2>m[1])&&U.De(e)}e.video.width&&e.video.width.ideal&&(a.style.width=e.video.width.ideal+"px");e.video.height&&e.video.height.ideal&&(a.style.height=e.video.height.ideal+
"px")}U.wa(a,"autoplay");U.wa(a,"playsinline");e&&e.audio?a.volume=0:U.wa(a,"muted");U.yc(a,c,function(){function f(n){if(0===n.length)d("INVALID_FALLBACKCONSTRAINTS");else{var h=n.shift();U.yc(a,c,function(){f(n)},h)}}var r=U.zd(e);f(r)},e)},Ud:function(a){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return a(!1,"NOTSUPPORTED"),!1;navigator.mediaDevices.enumerateDevices().then(function(c){(c=c.filter(function(d){return d.kind&&-1!==d.kind.toLowerCase().indexOf("video")&&d.label&&
d.deviceId}))&&c.length&&0<c.length?a(c,!1):a(!1,"NODEVICESFOUND")}).catch(function(){a(!1,"PROMISEREJECTED")})},Te:function(a,c,d){var e={};e[c]=d;c=[];c.push(e);a.applyConstraints({advanced:c}).catch(function(){})}},za=function(){var a={n:5,Bb:1,Mc:0,Ka:[30,45],Ha:[2,200],k:.7,Ie:200,oe:.05},c=-1,d=null,e=-1,m=-1,f=0,r=-1,n=-1,h=0,v=0,k=a.Ha[1],g={vc:function(){switch(c){case -1:return-1;case 0:return n+d.Mc;case 1:return h}},wf:function(u){return Math.pow(Math.min(Math.max(r,0),d.n-1)/(d.n-1),
u||1)},m:function(u){d=Object.assign({},a,u);r=n=d.Bb;c=0;g.reset()},Ee:function(u){u=("undefined"===typeof u?Date.now():u)||0;var l=Math.min(Math.max(u-v,d.Ha[0]),d.Ha[1]);k=l;v=u;var D=-1===e?0:d.k;e=Math.min(Math.max(1E3/l,5),120)*(1-D)+e*D;u-m>d.Ie&&5<++f&&(l=d.k,r=r*(1-l)+(e<d.Ka[0]?n-1:e>d.Ka[1]?n+1:n)*l,Math.abs(r-n)>1-d.oe&&(l=Math.min(Math.max(Math.round(r),0),d.n-1),l!==n&&(r=n=l,e=(d.Ka[1]-d.Ka[0])/2)),m=u)},ad:function(u){h=u;c=1},hd:function(){c=0;g.reset()},reset:function(){k=a.Ha[1];
m=e=-1;f=0},Od:function(){return k}};return g}(),rb=function(){var a={Rc:4,Wa:[1.5,1.5,2],I:[.1,.1,.1],Xc:1,C:-1,A:-1,Ce:2,me:1,Yc:!0,Gd:.8},c=null,d=[],e=0,m=[.5,.5,1];return{m:function(f){c=Object.assign({},a,f);d.splice(0);f=c.Wa[0]*c.I[0];var r=c.Wa[1]*c.I[1],n=1/(1+c.Wa[2]*c.I[2]),h=c.Xc*Math.min(c.C,c.A),v=h/c.C;h/=c.A;var k=.5*c.Gd;k*=k;for(var g=0;g<c.Rc;++g){var u=Math.pow(n,g),l=v*u,D=h*u;u=l*f;var F=D*r,I=l/2;D/=2;for(var O=1+(1-I-I)/u,C=1+(1-D-D)/F,G=0;G<C;++G)for(var E=D+G*F,aa=E-.5,
W=0;W<O;++W){var w=I+W*u,t=w-.5;t*t+aa*aa>k||d.push([w,E,l*c.me])}}c.Yc&&d.sort(function(A,N){var B=A[0]-.5;A=A[1]-.5;var p=N[0]-.5;N=N[1]-.5;return B*B+A*A-(p*p+N*N)})},get:function(){var f=d.length;if(0===f)return m;e>=f&&(e=0);var r=d[Math.floor(e)];e=(e+1/c.Ce)%f;return r}}}(),Y={neuralNetworkPath:"NN_DEFAULT.json",Xb:0,od:25,cb:[2,7],se:{threshold:1,nScaleLevels:3,scale0Factor:.8,overlapFactors:[2,2,3],scanCenterFirst:!0,nDetectsPerLoop:-1},Fe:50,
Oc:.5,Nc:.4,je:8,Be:{translationFactorRange:[.0015,.005],rotationFactorRange:[.003,.02],qualityFactorRange:[.9,.98],alphaRange:[.05,1]},ya:[.65,1,.262],I:[.092,.092,.3],ld:.2,nd:2,md:.1,ke:8,Qc:1,Id:Wa.Ra.bind(null,.3,.7),Le:20,cd:3},ma={facingMode:"user",idealWidth:800,idealHeight:600,minWidth:480,maxWidth:1280,minHeight:480,maxHeight:1280,rotate:0,flipX:!1},ba={Cb:-3,ge:-1,error:-2,ready:1,play:2,pause:3},ia=ba.Cb,x=null,Wb={zb:!1,element:null,W:null,X:null,u:[0,0],G:[.5,.5],o:[.5,0,0,.5],Ya:0,
va:null,Na:!1},K=null,Xb={ua:null,Ea:null,antialias:!0,Ub:"./",pa:null,$:null,Ba:Y.Xb,Vc:Y.Xb,Oa:!1,ja:!0},Oa=null,na=null,ta=null,Pa=1,Na={Kb:-1,kb:-1},T=null,Yb={C:0,A:0,u:[0,0],la:null},V={oa:null,buffer:null,I:null,ya:null,T:Y.Qc,xa:null},Sa=null,oa=null,Va=null,Ma=null,H={i:1,ga:0,O:null,Gc:!1,Lc:0,Db:0},fb=[],gb=[],Bb={VERSION:"1.3.6",init:function(a){function c(){ia!==ba.error&&2===++e&&(Ia(),vb(),Ha(),K.ua&&(ia=ba.ready,K.ua(!1,{GL:b,canvasElement:K.$,videoTexture:x.X.get(),maxFacesDetected:H.i,
videoElement:x.element}),db()),cb())}if(ia!==ba.Cb)return a.callbackReady&&a.callbackReady("ALREADY_INITIALIZED"),!1;ia=ba.ge;x=Object.assign({},Wb);K=Object.assign({},Xb);T=Object.assign({},Yb);H.O=[0];V.I=Y.I.slice(0);V.ya=Y.ya.slice(0);"undefined"!==typeof a.antialias&&(K.antialias=a.antialias);a.callbackReady&&(K.ua=a.callbackReady);a.callbackTrack&&(K.Ea=a.callbackTrack);a.nExpressions&&(V.T=a.nExpressions);a.expressionsEasings&&(V.xa=a.expressionsEasings);"undefined"!==typeof a.animateDelay&&
(K.Ba=a.animateDelay);"undefined"!==typeof a.NNCPath&&(K.Ub=a.NNCPath);"undefined"!==typeof a.NNC&&(K.pa=a.NNC);"undefined"!==typeof a.maxFacesDetected&&(H.i=Math.max(1,a.maxFacesDetected));"undefined"!==typeof a.followZRot&&(K.ja=a.followZRot?!0:!1);if(H.i>Y.je)return Ga("MAXFACES_TOOHIGH"),!1;if(!a.canvasId&&!a.canvas)return Ga("NO_CANVASID"),!1;K.$=a.canvas?a.canvas:document.getElementById(a.canvasId);if(!K.$)return Ga("INVALID_CANVASID"),!1;T.C=K.$.width;T.A=K.$.height;if(!T.C||!T.A)return Ga("INVALID_CANVASDIMENSIONS"),
!1;for(var d=0;d<H.i;++d)fb.push(new Float32Array(Y.ke)),gb.push(0);za.m({Bb:0,n:Y.cb[1]-Y.cb[0]+1,Mc:Y.cb[0]});na=Object.create(Y.se);a.scanSettings&&(Object.assign(na,a.scanSettings),-1!==na.nDetectsPerLoop?za.ad(na.nDetectsPerLoop):za.hd());ta=Object.create(Y.Be);a.stabilizationSettings&&Object.assign(ta,a.stabilizationSettings);var e=0;a.videoSettings&&a.videoSettings.videoElement?Xa(a.videoSettings.videoElement,c):(a.videoSettings&&Object.assign(ma,a.videoSettings),xb(a.onWebcamAsk,a.onWebcamGet,
function(m){Xa(m,c)}));Jb(function(m){if(!Kb())return!1;Oa=new Cb({Qa:m.layers,Hb:"gpuRawAvg",Eb:Mb});y.kd([{id:"s50",name:"_",ia:"attribute vec2 a0;uniform mat2 u32;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=vec2(.5,.5)+u32*a0*vec2(1.,-1.);}",Ca:["a0"],ra:[2],a:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",c:["u1","u32"],precision:"lowp"},{id:"s51",name:"_",a:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",
ia:"attribute vec2 a0;uniform sampler2D u33;uniform vec2 u34;uniform float u35,u36,u37;varying vec2 vv0;void main(){vec4 a=texture2D(u33,vec2(.17,u35));vec2 f=a.gb,g=a.a*u34,b=a0;b.x*=u37;float c=cos(u36),d=sin(u36);vec2 h=mat2(c,d,-d,c)*b;vv0=f+h*.5*g,gl_Position=vec4(a0,0.,1.);}",Ca:["a0"],ra:[2],c:"u1 u33 u34 u35 u36 u37".split(" "),precision:"lowp"},{id:"s52",name:"_",a:"uniform sampler2D u38,u33;uniform vec3 u39,u40;uniform float u41,u42,u35,u43,u36,u44;const vec4 e=vec4(.25,.25,.25,.25);void main(){vec4 d=texture2D(u38,vec2(.625,.625)),f=texture2D(u38,vec2(.875,.625)),a=texture2D(u33,vec2(.17,u35));float g=dot(d-f,e);bool h=g>u42;h?a.r=2.:a.r>u41?a.r=0.:a.r>1.9?a.r+=1.:0.,a.r*=u43;if(a.r<.9)a=vec4(1.,u39);else{a.r*=step(1.9,a.r);float i=dot(e,texture2D(u38,vec2(.875,.875))),j=dot(e,texture2D(u38,vec2(.125,.625))),k=dot(e,texture2D(u38,vec2(.375,.625))),b=cos(u36),c=sin(u36);vec2 l=mat2(b,c*u44,-c/u44,b)*vec2(i,j);a.gba+=vec3(l,k)*u40*a.a;}gl_FragColor=a;}",
ia:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",c:"u38 u33 u39 u41 u40 u43 u36 u44 u42 u35".split(" ")},{id:"s53",name:"_",ia:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",a:"uniform sampler2D u38;const vec4 e=vec4(.25,.25,.25,.25);const vec3 f=vec3(.5,.5,.5);void main(){float a=dot(e,texture2D(u38,vec2(.125,.875))),b=dot(e,texture2D(u38,vec2(.375,.875))),c=dot(e,texture2D(u38,vec2(.625,.875))),d=dot(e,texture2D(u38,vec2(.625,.625)));vec3 g=vec3(a,b,c)*.5+f;gl_FragColor=vec4(g,d);}",
c:["u38"]},{id:"s54",name:"_",ia:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",a:"uniform sampler2D u38;const vec4 e=vec4(.25,.25,.25,.25);void main(){float a=dot(e,texture2D(u38,vec2(.375,.375))),b=dot(e,texture2D(u38,vec2(.625,.375))),c=dot(e,texture2D(u38,vec2(.875,.375))),d=dot(e,texture2D(u38,vec2(.125,.125)));gl_FragColor=vec4(a,b,c,d);}",c:["u38"]},{id:"s49",name:"_",a:"uniform sampler2D u33;uniform vec2 u45;uniform float u46;varying vec2 vv0;void main(){float f=step(.5,mod(gl_FragCoord.y+1.5,2.)),c=step(.33,vv0.x);vec4 a=texture2D(u33,vv0+u45);a.a=mix(a.a*u46,a.a,c);vec4 d=floor(255.*a),g=255.*(255.*a-d),b=mix(d,g,f)/255.;b.x=mix(step(a.x,1.5),b.x,c),gl_FragColor=b;}",
c:["u33","u46","u45"]}]);qb();Ib();ib();hb();c()});return!0},destroy:function(){return new Promise(function(a,c){Bb.toggle_pause(!0,!0).catch(function(){c()}).then(function(){Oa&&Oa.h();Qa.h();Oa=oa=Sa=null;fb.splice(0);gb.splice(0);T.la=null;V.oa=null;x.W=null;ia=ba.Cb;a()})})},toggle_pause:function(a,c){if(!Ua())return Promise.reject();var d=null;d=x.Na?Promise.resolve():c?U.fd(x.element,!a,x.va):Promise.resolve();a?pb():d.then(function(){cb()});return d},update_videoSettings:function(a){pb();return new Promise(function(c){U.fd(x.element,
!1,x.va).then(function(){Object.assign(ma,a);xb(null,null,function(d){Xa(d,function(){Ia();Ha();cb();c()})})})})},toggle_slow:function(a){Ua()&&ia===ba.play&&(a&&!K.Oa?(K.Vc=K.Ba,na.nDetectsPerLoop=1,this.set_animateDelay(100),K.Oa=!0):!a&&K.Oa&&(na.nDetectsPerLoop=-1,this.set_animateDelay(K.Vc),K.Oa=!1))},set_animateDelay:function(a){K.Ba=a},resize:function(){if(!Ua())return!1;var a=K.$.width,c=K.$.height;if(!jb()&&a===T.C&&c===T.A)return!1;T.C=a;T.A=c;ib();hb();Ia();Ha();x.X&&x.X.resize(T.C,T.A);
return!0},set_inputTexture:function(a,c,d){x.u[0]=c;x.u[1]=d;x.zb=!0;Ia();db();Ha();y.set("s50");x.X.P();b.activeTexture(b.TEXTURE0);b.bindTexture(b.TEXTURE_2D,a);S.g(!0,!0)},reset_GLState:function(){db();T.la.remove();V.oa.remove();qb()},render_video:function(){sa.J();y.set("s1");b.viewport(0,0,T.C,T.A);x.X.b(0);S.g(!0,!0)},reset_inputTexture:function(){jb();x.zb=!1;Ia();Ha()},get_videoDevices:function(a){return U.Ud(a)},set_scanSettings:function(a){Object.assign(na,a);-1!==na.nDetectsPerLoop?za.ad(na.nDetectsPerLoop):
za.hd();ib();hb()},set_stabilizationSettings:function(a){Object.assign(ta,a)},set_videoOrientation:function(a,c){Ua()&&(ma.flipX=c,ma.rotate=a,Ia(),Ha())},update_videoElement:function(a,c){Xa(a?a:x.element,function(){vb();Ia();Ha();c&&c()})}};return Bb};window.JEEFACEFILTERAPI=window.JEEFACEFILTERAPIGEN();
if(typeof(module)!=='undefined'){module.exports=window.JEEFACEFILTERAPI;}
window.JEEFACEFILTERAPI.FAKEDOM=FAKEDOM;