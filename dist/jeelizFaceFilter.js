 /**
 * Jeeliz Face Filter - https://github.com/jeeliz/jeelizFaceFilter
 *
 * Copyright 2018 Jeeliz ( https://jeeliz.com )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

var JEEFACEFILTERAPI=(function(){/*
 SharedContext.is_webgl2() &&*/
window.JEELIZFACEFILTERGEN=function(){function Hb(a){var c=null,d=null,e=null,h=0;this.A=function(l){this.df(l.gb);e.de({ec:l.ec,bc:l.bc})};this.Ae=function(l){return c[l]};this.df=function(l){var m=null;h=l.length;c=l.map(function(p,f){p=Object.assign({},p,{index:f,parent:this,nb:m,Ke:f===h-1});return m=f=0===f?Ib.instance(p):Jb.instance(p)});d=c[0];e=c[h-1];c.forEach(function(p,f){0!==f&&p.Ve()})};this.V=function(l){var m=l;c.forEach(function(p){m=p.V(m,!1)});return m};this.ze=function(){return d.F()};
this.Nb=function(){return e.Be()};this.Wc=function(){return e.Wc()};this.m=function(){c&&(c.forEach(function(l){l.m()}),e=d=c=null,h=0)};"undefined"!==typeof a&&this.A(a)}function cb(a,c){var d=c%8;return a[(c-d)/8]>>7-d&1}function Kb(a){var c=JSON.parse(a);a=c.ne;var d=c.nf,e=c.n;var h="undefined"===typeof btoa?Buffer.from(c.data,"base64").toString("latin1"):atob(c.data);var l=h.length;c=new Uint8Array(l);for(var m=0;m<l;++m)c[m]=h.charCodeAt(m);h=new Float32Array(e);l=new Float32Array(d);m=a+d+
1;for(var p=0;p<e;++p){for(var f=m*p,v=0===cb(c,f)?1:-1,B=f+1,q=1,n=0,x=B+a-1;x>=B;--x)n+=q*cb(c,x),q*=2;B=n;f=f+1+a;q=l.length;n=0;for(x=f;x<f+q;++x)l[n]=cb(c,x,!0),++n;for(q=f=0;q<d;++q)f+=l[q]*Math.pow(2,-q-1);h[p]=0===f&&0===B?0:v*(1+f)*Math.pow(2,1+B-Math.pow(2,a-1))}return h}function Xa(){return-1!==[fa.ready,fa.play,fa.pause].indexOf(ma)}function db(){if(ma===fa.play)return!1;ma=fa.play;Ma.stop();qb(0)}function rb(){if(ma!==fa.play)return!1;Ma.stop();ma=fa.pause;return!0}function Fa(a,c,d,
e,h){a=4*(3*c+a)+d;return e+(X.buffer[a]/255+X.buffer[a+12]/65025)*(h-e)}function eb(){b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1);ta.da();U.reset();Y.reset();A.R();A.Kc();b.disable(b.DEPTH_TEST);b.disable(b.BLEND);U.Ea();A.xa()}function sb(){ta.P();b.viewport(0,0,3,2*L.o);A.set("s52");X.za.g(0);U.l(!1,!1);return ba.pb(0,0,3,2*L.o,X.buffer)}function qb(){ma!==fa.pause&&(A.Kc(),U.reset(),U.Ea(),b.disable(b.DEPTH_TEST),b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1),A.xa(),Z.fe?sb().then(function(){tb();ub()}).catch(fb):
(tb(),sb().then(ub).catch(fb)))}function tb(){ta.da();if(!z.bb)if(z.ab)z.element.needsUpdate&&(z.N.vf(z.element.arrayBuffer),z.element.needsUpdate=!1);else{var a=z.element.currentTime,c=a-z.ob;0>c&&(z.ob=a);1E3*c<Z.xf||(z.ob+=c,z.N.refresh())}a=qa.Xc();if(L.W.length>a)L.W.splice(0,L.W.length-a);else for(;L.W.length<a;)L.W.push(0);if(1!==L.o)if(pa.every(gb)){for(var d=0,e=c=0;e<pa.length;++e)pa[e].detected>d&&(d=pa[e].detected,c=0);for(d=0;d<a;++d)L.W[d]=c}else{c=L.md;d=0;for(e=!1;d<a;++d){if(gb(pa[c]))if(e){do++c===
L.o&&(c=0);while(gb(pa[c]))}else e=!0;L.W[d]=c++;c>=L.o&&(c=0)}L.md=c}for(a=0;a<qa.Xc();++a)L.la=L.W[a],L.ac=(.5+L.la)/L.o,L.hd=L.W.lastIndexOf(L.la)===a,A.set("s54"),c=pa[L.la],A.H("u41",1+Na.ic*(Math.cos(c.ry)-1)),O.qa&&A.H("u40",c.rz),1!==L.o&&A.H("u39",L.ac),aa.ua.aa(),z.N.g(0),X.za.g(1),U.l(!1,!1),aa.ua.g(0),Oa.V(aa.ua);qa.qf()}function ub(){for(var a=0;a<L.o;++a)if(-1!==L.W.indexOf(a)){var c=a,d=Sa[c],e=[c],h=pa[c],l=hb[c],m=2*c;d.Sa=Fa(1,m,3,0,1);h.detected=ua.X(h.detected,d.Sa,Z.Od);if(d.Sa<
Z.od)O.qa&&(h.rz=0,h.ry=0);else{var p=X.Ka;d.x=Fa(0,m,1,-1,1);d.y=Fa(0,m,2,-1,1);d.$=Fa(0,m,3,0,1);d.fc=Fa(1,m,0,-p[0],p[0]);d.hc=Fa(1,m,1,-p[1],p[1]);d.La=Fa(1,m,2,-p[2],p[2]);for(p=0;p<X.Y;++p)d.Rc[p]=X.Ia[p](Fa(2,m,p,0,1));e.Hb=d.x-h.xRaw;e.Ib=d.y-h.yRaw;e.Gb=d.$-h.sRaw;e.Db=d.fc-h.rx;e.Eb=d.hc-h.ry;e.Fb=O.qa?d.La:d.La-h.rz;m=qa.ue();e=(1-Ya.hb(va.translationFactorRange[0],va.translationFactorRange[1],Math.sqrt(e.Hb*e.Hb+e.Ib*e.Ib+e.Gb*e.Gb)/m))*(1-Ya.hb(va.rotationFactorRange[0],va.rotationFactorRange[1],
Math.sqrt(e.Db*e.Db+e.Eb*e.Eb+e.Fb*e.Fb)/m))*Ya.hb(va.qualityFactorRange[0],va.qualityFactorRange[1],d.Sa);c=l[++ib[c]%l.length]=e;for(m=0;m<l.length;++m)c=Math.min(c,l[m]);c=Math.max(.5,c);e=Math.min(c,e);l=ua.X(va.alphaRange[1],va.alphaRange[0],Math.pow(e,Z.Qd));h.xRaw=ua.X(h.xRaw,d.x,l);h.yRaw=ua.X(h.yRaw,d.y,l);h.sRaw=ua.X(h.sRaw,d.$,l);h.rx=ua.X(h.rx,d.fc,l);h.ry=ua.X(h.ry,d.hc,l);h.rz=O.qa?h.rz+l*d.La:ua.X(h.rz,d.La,l);c=h.sRaw*Na.Cb*Math.sin(h.ry);e=Math.sin(h.rz)*c/Pa;h.x=h.xRaw+Math.cos(h.rz)*
c;h.y=h.yRaw+e;h.s=h.sRaw;l=Math.max(l,Z.Pd);for(c=0;c<X.Y;++c)h.expressions[c]=ua.X(h.expressions[c],d.Rc[c],l);++d.kb}}ta.tf();ta.reset();Y.reset();b.enable(b.DEPTH_TEST);O.Ra&&(1===L.o?O.Ra(pa[0]):O.Ra(pa));b.disable(b.BLEND);fb()}function fb(){ma===fa.play&&Ma.af(qb)}function vb(){aa.ua=Y.instance({isPot:!0,isFloat:!1,width:Oa.ze()});for(var a=Z.Gd,c=L.o,d=new Float32Array([0,.5,.5,0,0,0,0,0,0,0,0,0]),e=new Float32Array(d.length*L.o),h=0,l;h<L.o;++h)for(l=0;l<d.length;++l)e[h*d.length+l]=d[l];
X.za=Lb.instance({width:a,height:c,isFloat:!0,isPot:!1,array:e})}function Mb(){function a(c){for(var d=[],e=0;e<L.o;++e)d.push(JSON.parse(JSON.stringify(c)));return d}X.buffer=new Uint8Array(8*Z.Gd*L.o);Sa=a({Sa:0,x:0,y:0,$:1,fc:0,hc:0,La:0,Rc:new Float32Array(X.Y),kb:0});pa=a({detected:0,x:0,y:0,s:1,xRaw:0,yRaw:0,sRaw:1,rx:0,ry:0,rz:0,expressions:new Float32Array(X.Y)});a({Hb:0,Ib:0,Gb:0,Db:0,Eb:0,Fb:0})}function jb(){A.T("s54",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u37",value:1},{type:"2f",
name:"u38",value:aa.G},{type:"1f",name:"u39",value:.5},{type:"1f",name:"u40",value:0}]);A.T("s55",[{type:"1i",name:"u42",value:0},{type:"1i",name:"u37",value:1},{type:"1f",name:"u45",value:Z.rf},{type:"1f",name:"u46",value:oa.threshold},{type:"3f",name:"u44",value:[X.O[0]*aa.G[0],X.O[1]*aa.G[1],X.O[2]]},{type:"1f",name:"u39",value:.5},{type:"1f",name:"u47",value:1},{type:"1f",name:"u40",value:0}]);var a=[{type:"1i",name:"u42",value:0}];A.T("s56",a);A.T("s57",a);A.T("s52",[{type:"1i",name:"u37",value:0},
{type:"1f",name:"u50",value:aa.G[0]},{type:"2f",name:"u49",value:[0,.5/L.o]}])}function kb(){aa.G[0]=1;aa.G[1]=aa.D/aa.M;wb.A({mb:oa.overlapFactors,sd:oa.nScaleLevels,D:aa.D,M:aa.M,Bd:oa.scale0Factor,O:X.O,Cd:oa.scanCenterFirst})}function Nb(a){if(O.Aa)xb("string"===typeof O.Aa?JSON.parse(O.Aa):O.Aa,a);else{var c=O.vc;"JSON"!==c.toUpperCase().split(".").pop()&&(c+=Z.neuralNetworkPath);yb.get(c,function(d){d=JSON.parse(d);xb(d,a)})}}function xb(a,c){if(a.exportData){var d=a.exportData;d.rotationEulerAnglesFactors&&
(X.Ka=d.rotationEulerAnglesFactors);d.translationScalingFactors&&(X.O=d.translationScalingFactors);"undefined"!==typeof d.nExpressions&&(X.Y=d.nExpressions);Na.ic=.4;Na.Cb=.7;"undefined"!==typeof d.fgScaleXFactor&&(Na.ic=d.fgScaleXFactor);"undefined"!==typeof d.fgDisplaceXFactor&&(Na.Cb=d.fgDisplaceXFactor)}X.Y||(X.Y=Z.rd);if(!X.Ia)for(X.Ia=[],d=0;d<X.Y;++d)X.Ia.push(Z.oe);c(a)}function Ob(){if(Qa.A({zb:O.ea,width:aa.D,height:aa.M,debug:!1,td:function(){Ha("GLCONTEXT_LOST")},antialias:O.antialias,
premultipliedAlpha:!0}))return!0;Ha("GL_INCOMPATIBLE");return!1}function gb(a){return a.detected<=Z.od}function zb(a,c,d,e){return d>a?Math.max(0,a+c/2-(d-e/2)):Math.max(0,d+e/2-(a-c/2))}function Pb(){return Sa.some(function(a,c){if(c===L.la)return!1;c=Sa[L.la];if(c.kb>a.kb||3>a.kb||zb(c.x,c.$,a.x,a.$)<Z.pd*c.$)return!1;var d=aa.D/aa.M;return zb(c.y,c.$*d,a.y,a.$*d)>Z.pd*c.$*d})}function Qb(){var a=L.la;X.za.cf(1);1!==L.o&&(b.viewport(0,0,3,L.o),A.set("s0"),A.Fd("u1",1),U.l(!1,!1),A.Fd("u1",0));b.viewport(0,
a,1,1);A.set("s55");O.qa&&A.H("u40",pa[a].rz);1!==L.o&&A.H("u39",L.ac);if(1<L.o){var c=Pb()?0:1;A.H("u47",c)}A.hf("u43",wb.get());U.l(!1,!1);L.hd&&(b.viewport(1,a,1,1),A.set("s56"),U.l(!1,!1),b.viewport(2,a,1,1),A.set("s57"),U.l(!1,!1))}function Ab(){z.N&&z.N.remove();z.ab=z.element.isFakeVideo?!0:!1;if(z.ab){var a=Bb();a={isFlipY:!1,array:z.element.arrayBuffer,width:a.w,height:a.ta,isKeepArray:!0}}else a={L:z.element};z.nc=Y.instance(Object.assign({isPot:!1,isLinear:!0,isFloat:!1},a));z.N=z.nc}function Ia(){var a=
[{type:"mat2",name:"u36",value:z.v}];A.T("s53",[{type:"1i",name:"u1",value:0}].concat(a));A.T("s54",a)}function Ja(){z.K[0]=.5;z.K[1]=.5;var a=z.G[1]/z.G[0];Pa=Qa.U()/Qa.F();90===Math.abs(na.rotate)&&(a=1/a);a>Pa?z.K[1]*=Pa/a:z.K[0]*=a/Pa;A.T("s55",[{name:"u48",type:"1f",value:Pa}]);z.v[0]=0;z.v[1]=0;z.v[2]=0;z.v[3]=0;switch(na.rotate){case 0:z.v[0]=z.K[0];z.v[3]=z.K[1];break;case 180:z.v[0]=-z.K[0];z.v[3]=-z.K[1];break;case 90:z.v[1]=z.K[0];z.v[2]=-z.K[1];break;case -90:z.v[1]=-z.K[0],z.v[2]=z.K[1]}na.flipX&&
(z.v[0]*=-1,z.v[2]*=-1);z.bb||(z.v[1]*=-1,z.v[3]*=-1)}function Bb(){var a={w:z.element.videoWidth||z.element.width,ta:z.element.videoHeight||z.element.height};if(!a.w||!a.ta||4>a.w||4>a.ta)throw Error("INVALID VIDEO DIMENSIONS - width = "+a.w+" height = "+a.ta);return a}function lb(){var a=Bb(),c=z.G[0]!==a.w||z.G[1]!==a.ta;c&&(z.G[0]=a.w,z.G[1]=a.ta);return c}function Za(a,c){if(ma===fa.error)return!1;z.element=a;lb();c&&c();return!0}function Cb(a,c,d){a&&a();z.Ga={video:{facingMode:{exact:na.facingMode},
width:{min:na.minWidth,max:na.maxWidth,ideal:na.idealWidth},height:{min:na.minHeight,max:na.maxHeight,ideal:na.idealHeight}},audio:!1};W.xc(z.Ga,na.deviceId);W.get(z.element?z.element:W.De(),function(e){c&&c(e);d(e)},function(){Ha("WEBCAM_UNAVAILABLE")},z.Ga)}function Ha(a){ma!==fa.error&&(ma=fa.error,O.Fa&&O.Fa(a))}var ua={rg:function(a){return Math.ceil(Math.log2(a))},Kg:function(a){return Math.log2(a)},Gg:function(a){return 0===Math.log2(a)%1},Hf:function(a){var c=[0,0,0,0];a.forEach(function(d){c[0]+=
d[0];c[1]+=d[1];c[2]+=d[2];c[3]+=d[3]});return c},If:function(a,c,d){return Math.min(Math.max(a,c),d)},Lf:function(a){return a*Math.PI/180},Pg:function(a,c){c=Math.pow(10,c);return Math.round(a*c)/c},Qg:function(a){return Math.round(1E6*a)/1E6},sg:function(a,c){return(100*a/c).toFixed(3)},X:function(a,c,d){return a*(1-d)+c*d},je:function(a,c){return ua.ae(a-c)},ae:function(a){for(;a>Math.PI;)a-=2*Math.PI;for(;a<=-Math.PI;)a+=2*Math.PI;return a},Nf:function(a,c){return Math.abs(ua.je(a,c))},yf:function(a,
c){return Math.atan2(Math.sin(a)+Math.sin(c),Math.cos(a)+Math.cos(c))}},yb={get:function(a,c,d){var e=new XMLHttpRequest;e.open("GET",a,!0);e.withCredentials=!1;e.onreadystatechange=function(){4===e.readyState&&(200===e.status||0===e.status?c(e.responseText):"undefined"!==typeof d&&d(e.status))};e.send()},og:function(a,c){yb.get(a,function(d){c(JSON.parse(d))})},Mg:function(a,c,d){var e=new XMLHttpRequest;e.open("POST",a,!0);e.setRequestHeader("Content-type","application/x-www-form-urlencoded");e.onreadystatechange=
function(){4!==e.readyState||200!==e.status&&0!==e.status||d(e.responseText)};e.send(c)},dg:function(a,c){var d=new XMLHttpRequest;d.open("POST",a,!0);d.responseType="arraybuffer";d.onload=function(){c(d.response)};d.send()}},mb={Ab:function(a,c){if(0===c||"object"!==typeof a)return a;a=Object.assign({},a);c=void 0===c||-1===c?-1:c-1;for(var d in a)a[d]=mb.Ab(a[d],c);return a}},Ya={ah:function(a,c,d){a=Math.min(Math.max((d-a)/(c-a),0),1);return a*a*(3-2*a)},hb:function(a,c,d){return Math.min(Math.max((d-
a)/(c-a),0),1)},Yf:function(a,c,d,e){return Math.pow(Math.min(Math.max((e-a)/(c-a),0),1),d)},fh:function(){return 0},Lg:function(){return 1},Jg:function(a){return a},Vf:function(a){return a*a},$f:function(a){return a*(2-a)},Sf:function(a){return.5>a?2*a*a:-1+(4-2*a)*a},Qf:function(a){return a*a*a},Zf:function(a){return--a*a*a+1},Rf:function(a){return.5>a?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1},Wf:function(a){return a*a*a*a},ag:function(a){return 1- --a*a*a*a},Tf:function(a){return.5>a?8*a*a*a*a:1-8*--a*
a*a*a},Xf:function(a){return a*a*a*a*a},bg:function(a){return 1+--a*a*a*a*a},Uf:function(a){return.5>a?16*a*a*a*a*a:1+16*--a*a*a*a*a}},Rb={qe:function(a,c,d){switch(a){case "relu":return d+"=max(vec4(0.,0.,0.,0.),"+c+");";case "elu":return d+"=mix(exp(-abs("+c+"))-vec4(1.,1.,1.,1.),"+c+",step(0.,"+c+"));";case "elu01":return d+"=mix(0.1*exp(-abs("+c+"))-vec4(0.1,0.1,0.1,0.1),"+c+",step(0.,"+c+"));";case "arctan":return d+"=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";
default:return!1}}},A=function(){function a(u,t,D){t=u.createShader(t);u.shaderSource(t,D);u.compileShader(t);return u.getShaderParameter(t,u.COMPILE_STATUS)?t:!1}function c(u,t,D){t=a(u,u.VERTEX_SHADER,t);D=a(u,u.FRAGMENT_SHADER,D);u===b&&m.push(t,D);var K=u.createProgram();u.attachShader(K,t);u.attachShader(K,D);u.linkProgram(K);return K}function d(u,t){t.C=t.C?!0:!1;if(!t.C){void 0===t.pa&&(t.pa="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");
void 0===t.Pa&&(t.Pa=["a0"]);void 0===t.Ca&&(t.Ca=[2]);if(void 0===t.precision||"highp"===t.precision)t.precision=q;t.id=v++;void 0!==t.Dd&&(t.Dd.forEach(function(K,P){t.h=t.h.replace(K,t.qb[P])}),t.Dd.splice(0));t.uc=0;t.Ca.forEach(function(K){t.uc+=4*K});t.na=c(u,t.pa,"precision "+t.precision+" float;\n"+t.h);t.B={};t.i.forEach(function(K){t.B[K]=u.getUniformLocation(t.na,K)});t.attributes={};t.Da=[];t.Pa.forEach(function(K){var P=u.getAttribLocation(t.na,K);t.attributes[K]=P;t.Da.push(P)});if(t.j){u.useProgram(t.na);
f=t;p=t.id;for(var D in t.j)u.uniform1i(t.B[D],t.j[D])}t.ma=!0}}function e(u){wa.gf(J);p!==u.id&&(J.R(),p=u.id,f=u,b.useProgram(u.na),u.Da.forEach(function(t){0!==t&&b.enableVertexAttribArray(t)}))}function h(u,t,D){d(u,t,D);u.useProgram(t.na);u.enableVertexAttribArray(0);p=-1;return f=t}function l(){return{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],j:{u1:0}}}var m=[],p=-1,f=null,v=0,B=!1,q="highp",n=["u1"],x=["u0"],y={u1:0},k={u0:0},r={u1:0,u2:1},
H={u3:0},G={s0:l(),s1:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:n,j:y,precision:"lowp"},s2:{h:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",i:["u1","u2"],j:r},s3:{h:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",i:n,j:y},s4:{h:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",
i:["u1","u2"],j:r},s5:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",i:n,j:y},s6:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",i:n,j:y},s7:{h:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u4;}",i:["u0","u4"],j:k},s8:{h:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;const vec4 f=vec4(.25,.25,.25,.25),g=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u4,f);gl_FragColor=b*g;}",
i:["u0","u4"],j:k},s9:{h:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",i:n,j:y},s10:{h:"uniform sampler2D u1,u5;uniform float u6;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u5,vv0);gl_FragColor=mix(b,a,u6*f);}",i:["u1","u5","u6"],j:{u1:0,u5:1}},s11:{h:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u7)+texture2D(u1,vv0+u7*vec2(1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,1.)));}",
i:["u1","u7"],j:y},s12:{h:"uniform sampler2D u1;uniform vec4 u8;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 j(float a){if(a==0.)return vec4(0.,0.,0.,0.);float k=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),l=c+127.,b=(a/exp2(c)-1.)*8388608.,d=l/2.,m=fract(d)*2.,n=floor(d),o=e(b,0.,8.),p=e(b,8.,16.),q=m*128.+e(b,16.,23.),r=k+n;return vec4(o,p,q,r)/255.;}void main(){float a=dot(texture2D(u1,vv0),u8);gl_FragColor=j(a);}",
i:["u1","u8"],j:y},s13:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",i:x,j:k,C:!0},s14:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(f,a);}",i:x,j:k},s15:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-f,a,step(0.,a));}",i:x,j:k},
s16:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-f;gl_FragColor=mix(.1*b,a,step(0.,a));}",i:x,j:k},s17:{h:"uniform sampler2D u0,u6,u9;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u6,vv0),d=texture2D(u9,vv0),b=a/d;gl_FragColor=c*mix(exp(-abs(b))-f,b,step(0.,a));}",i:["u0","u6","u9"],j:{u0:0,u6:1,u9:2},C:!0},s18:{h:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",
i:x,j:k},s19:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=log(f+a);gl_FragColor=b;}",i:x,j:k,C:!0},s20:{h:"uniform sampler2D u0,u10;uniform float u11;const vec2 e=vec2(.5,.5);const float f=1e-5;const vec4 g=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u10,e);float b=u11*u11;vec4 c=max(b*a,f*g);gl_FragColor=texture2D(u0,vv0)/c;}",i:["u0","u10","u11"],j:{u0:0,u10:1},C:!0},s21:{h:"uniform sampler2D u1;uniform vec2 u12;varying vec2 vv0;void main(){float a=u12.x*u12.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u12.y),f=floor(u12.x*fract(b*u12.y)),g=(f*u12.y+d)/a;gl_FragColor=texture2D(u1,g+c/a);}",
i:["u1","u12"],j:y},s22:{h:"uniform sampler2D u13,u14,u15;varying vec2 vv0;void main(){vec4 a=texture2D(u15,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u13,b),f=texture2D(u14,c);gl_FragColor=d*f;}",i:["u13","u14","u15"],j:{u14:0,u13:1,u15:2},C:!0},s23:{h:"uniform float u16;uniform sampler2D u13,u14;varying vec2 vv0;void main(){vec2 a=fract(vv0*u16);vec4 b=texture2D(u13,vv0),c=texture2D(u14,a);gl_FragColor=b*c;}",i:["u14","u13","u16"],j:{u14:0,u13:1}},s24:{h:"uniform float u16;uniform sampler2D u13,u14,u17,u18,u19,u20;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 h=vv0*u16,l=floor(h),c=h-l;vec4 m=texture2D(u13,vv0),d=texture2D(u14,c),a=texture2D(u20,vv0);a=a*255.;vec4 n=texture2D(u17,c),o=texture2D(u18,c),p=texture2D(u19,c),i=step(-g,-a),b=e-i,j=b*step(-e-g,-a);b*=e-j;vec4 k=b*step(-2.*e-g,-a);b*=e-k;vec4 q=b;d=i*d+j*n+k*o+q*p,gl_FragColor=m*d;}",
i:"u13 u14 u16 u20 u17 u18 u19".split(" "),j:{u14:0,u13:1,u20:3,u17:4,u18:5,u19:6},C:!0},s25:{h:"uniform sampler2D u13,u14,u21;uniform float u16,u22,u23,u24;varying vec2 vv0;const vec2 j=vec2(1.,1.);void main(){vec2 a=floor(u22*vv0),b=u22*vv0-a;float c=u16/u22;vec2 d=floor(b*c),f=b*c-d,g=(a+f)/u22;float k=u22*u24/u16;vec2 l=k*d,h=(l+f*u23)/u24,i=step(h,j);vec4 m=texture2D(u13,g),n=texture2D(u14,h),o=m*n*i.x*i.y,p=texture2D(u21,g);gl_FragColor=o*u23*u23+p;}",i:"u13 u14 u16 u22 u23 u24 u21".split(" "),
j:{u14:0,u13:1,u21:2}},s26:{h:"uniform sampler2D u13,u14;varying vec2 vv0;void main(){vec4 a=texture2D(u13,vv0),b=texture2D(u14,vv0);gl_FragColor=a*b;}",i:["u13","u14"],j:{u14:0,u13:1},C:!0},s27:{h:"uniform sampler2D u1,u21;uniform float u25;varying vec2 vv0;void main(){gl_FragColor=texture2D(u21,vv0)+u25*texture2D(u1,vv0);}",i:["u1","u21","u25"],j:{u1:0,u21:1}},s28:{h:"varying vec2 vv0;uniform sampler2D u1;const vec4 f=vec4(1.,1.,1.,1.),g=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,g)*f;}",
i:n,j:y,precision:"lowp"},s29:{h:"varying vec2 vv0;uniform sampler2D u1;uniform float u26;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u26)).rgb,c=texture2D(u1,vv0+vec2(u26,u26)).rgb,d=texture2D(u1,vv0+vec2(u26,0.)).rgb;gl_FragColor=vec4(dot(a,f),dot(b,f),dot(c,f),dot(d,f));}",i:["u1","u26"],j:y,precision:"lowp"},s30:{h:"varying vec2 vv0;uniform sampler2D u1;uniform float u26;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u26)).rgb,c=texture2D(u1,vv0+vec2(u26,u26)).rgb,d=texture2D(u1,vv0+vec2(u26,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
i:["u1","u26"],j:y,precision:"lowp"},s31:{h:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u27;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u27,vv0.y-u27))*1.,a-=texture2D(u1,vec2(vv0.x-u27,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u27,vv0.y+u27))*1.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y-u27))*1.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y+u27))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u27,vv0.y-u27))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u27))*2.,b-=texture2D(u1,vec2(vv0.x+u27,vv0.y-u27))*1.,b+=texture2D(u1,vec2(vv0.x-u27,vv0.y+u27))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u27))*2.,b+=texture2D(u1,vec2(vv0.x+u27,vv0.y+u27))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),g=texture2D(u2,vv0);gl_FragColor=g.a*e.r*f;}",
i:["u1","u2","u27"],j:r,C:!0},s32:{h:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u27;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float h=0.;vec2 l=k*u27,a,b;float c,d,i=0.;for(float e=-4.;e<=4.;e+=1.)for(float f=-4.;f<=4.;f+=1.)a=vec2(e,f),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,h+=d*texture2D(u1,b).r,i+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-h/i)*j;}",i:["u1","u2","u27"],j:r,C:!0},s33:{h:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 g=vec2(.5,.5),h=vec2(1.,0.),i=vec2(0.,1.);void main(){vec2 a=vv0-u7*g;vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*h),d=texture2D(u3,a+u7*i),j=texture2D(u3,a+u7),k=e(b,c),l=e(d,j);gl_FragColor=e(k,l);}",
i:["u3","u7"],j:H},s34:{h:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;const vec2 k=vec2(1.,0.),l=vec2(0.,1.),m=vec2(2.,0.),n=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*k),d=texture2D(u3,a+u7*l),g=texture2D(u3,a+u7),h=e(b,c),i=e(d,g);return e(h,i);}void main(){vec2 a=vv0+u7*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u7*m),d=f(a+u7*2.),g=f(a+u7*n),h=e(b,c),i=e(d,g);gl_FragColor=e(h,i);}",i:["u3","u7"],j:H,C:!0},
s35:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",i:["u1"],j:y,precision:"lowp",C:!0},s36:{h:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;const float e=15444.;void main(){vec4 a=1001./e*texture2D(u1,vv0-3.*u7)+2002./e*texture2D(u1,vv0-2.*u7)+3003./e*texture2D(u1,vv0-u7)+3432./e*texture2D(u1,vv0)+3003./e*texture2D(u1,vv0+u7)+2002./e*texture2D(u1,vv0+2.*u7)+1001./e*texture2D(u1,vv0+3.*u7);gl_FragColor=a;}",i:["u7","u1"],j:y,precision:"lowp",
C:!0},s37:{h:"uniform sampler2D u1,u10,u28;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);const float g=.1;void main(){vec4 a=texture2D(u10,vv0),b=texture2D(u28,vv0),c=texture2D(u1,vv0),d=max(f*g,b-a*a),h=sqrt(d);gl_FragColor=(c-a)/h;}",i:["u1","u10","u28"],j:{u1:0,u10:1,u28:2},C:!0}},M={s38:{h:"uniform float u16,u29;uniform sampler2D u13,u14,u21;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-5,1e-5);void main(){vec4 sum=texture2D(u21,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u16,xyTo=floor(vv0*u16+eps2);float weightSize=toSparsity*u16;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u29*(xyPatch-halfFromSparsity))/u16,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u13,uvWeight)*texture2D(u14,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:["u16","u13","u14","u21","u29"],qb:["1.1111","gl_FragColor\\*=2.2222;"]},s39:{h:"uniform float u16,u29,u24;uniform sampler2D u13,u14,u21;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u21,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u24,xyTo=floor(vv0*u16+eps2);float weightSize=fromSparsity*u24;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u16;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u29*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u24,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u13,uvWeight)*texture2D(u14,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:"u16 u24 u13 u14 u21 u29".split(" "),qb:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},N=null,F=null,J={fb:function(){return B},A:function(){if(!B){N=mb.Ab(G,2);F=mb.Ab(M,2);q="highp";for(var u in N)d(b,N[u],u);A.set("s0");b.enableVertexAttribArray(0);B=!0}},zc:function(u){u.forEach(function(t){J.yc(t)})},yc:function(u){N[u.id]=u;d(b,u,u.id)},$c:function(u,t,D){t||(t=u);N[t]=Object.create(F[u]);N[t].Je=!0;F[u].qb&&F[u].qb.forEach(function(K,P){N[t].h=N[t].h.replace(new RegExp(K,"g"),D[P])});d(b,
N[t],t)},set:function(u){u=N[u];u.C&&(u.C=!1,d(b,u,u.id));e(u)},Ma:function(u){return h(u,l(),"s40")},kc:function(u){return h(u,{h:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",i:[],precision:"highp"},"s41")},me:function(u){return"undefined"===typeof N[u]?!1:N[u].ma},R:function(){-1!==p&&(p=-1,f.Da.forEach(function(u){0!==u&&b.disableVertexAttribArray(u)}))},mc:function(){var u=0;f.Da.forEach(function(t,D){D=f.Ca[D];b.vertexAttribPointer(t,D,b.FLOAT,!1,f.uc,u);u+=4*D})},Kc:function(){b.enableVertexAttribArray(0)},
xa:function(){J.rb(b)},rb:function(u){u.vertexAttribPointer(f.Da[0],2,u.FLOAT,!1,8,0)},Fd:function(u,t){b.uniform1i(f.B[u],t)},H:function(u,t){b.uniform1f(f.B[u],t)},oa:function(u,t,D){b.uniform2f(f.B[u],t,D)},Vg:function(u,t){b.uniform2fv(f.B[u],t)},hf:function(u,t){b.uniform3fv(f.B[u],t)},Wg:function(u,t,D,K){b.uniform3f(f.B[u],t,D,K)},Xg:function(u,t,D,K,P){b.uniform4f(f.B[u],t,D,K,P)},lc:function(u,t){b.uniform4fv(f.B[u],t)},Yg:function(u,t){b.uniformMatrix2fv(f.B[u],!1,t)},Zg:function(u,t){b.uniformMatrix3fv(f.B[u],
!1,t)},$g:function(u,t){b.uniformMatrix4fv(f.B[u],!1,t)},T:function(u,t){J.set(u);t.forEach(function(D){switch(D.type){case "4f":b.uniform4fv(f.B[D.name],D.value);break;case "3f":b.uniform3fv(f.B[D.name],D.value);break;case "2f":b.uniform2fv(f.B[D.name],D.value);break;case "1f":b.uniform1f(f.B[D.name],D.value);break;case "1i":b.uniform1i(f.B[D.name],D.value);break;case "mat2":b.uniformMatrix2fv(f.B[D.name],!1,D.value);break;case "mat3":b.uniformMatrix3fv(f.B[D.name],!1,D.value);break;case "mat4":b.uniformMatrix4fv(f.B[D.name],
!1,D.value)}})},qg:function(){return"lowp"},m:function(){b.disableVertexAttribArray(0);J.R();for(var u in N){var t=N[u];t.ma&&(t.ma=!1,b.deleteProgram(t.na));t.Je&&delete N[u]}m.forEach(function(D){b.deleteShader(D)});m.splice(0);v=0;B=!1;f=null;p=-1}};return J}(),b=null,Qa=function(){function a(q){console.log("ERROR in ContextFF: ",q);return!1}function c(q){function n(){Ca.m();ba.reset();y.getExtension("WEBGL_lose_context").loseContext()}if(navigator.userAgent&&-1!==navigator.userAgent.indexOf("forceWebGL1"))return!1;
var x=document.createElement("canvas");x.setAttribute("width",5);x.setAttribute("height",5);var y=null;try{y=x.getContext("webgl2",q)}catch(k){return!1}if(!y)return!1;d(y);ba.Lc(y);q=ba.Bb(y);if(!q.fa&&!q.ga)return n(),!1;q=Ca.Cc(y,q);n();return q?!0:!1}function d(q){q.clearColor(0,0,0,0);q.disable(q.DEPTH_TEST);q.disable(q.BLEND);q.disable(q.DITHER);q.disable(q.STENCIL_TEST);q.disable(q.CULL_FACE);q.GENERATE_MIPMAP_HINT&&q.hint(q.GENERATE_MIPMAP_HINT,q.FASTEST);q.disable(q.SAMPLE_ALPHA_TO_COVERAGE);
q.disable(q.SAMPLE_COVERAGE);q.depthFunc(q.LEQUAL);q.clearDepth(1)}var e=null,h=null,l=null,m=null,p=!0,f=null,v=null,B={F:function(){return e.width},U:function(){return e.height},hg:function(){return e},fg:function(){return b},ha:function(){return p},flush:function(){b.flush()},te:function(){f||(f=new Uint8Array(e.width*e.height*4));b.readPixels(0,0,e.width,e.height,b.RGBA,b.UNSIGNED_BYTE,f);return f},jg:function(){return e.toDataURL("image/jpeg")},kg:function(){ta.P();h||(h=document.createElement("canvas"),
l=h.getContext("2d"));h.width=e.width;h.height=e.height;for(var q=B.te(),n=l.createImageData(h.width,h.height),x=h.width,y=h.height,k=n.data,r=0;r<y;++r)for(var H=y-r-1,G=0;G<x;++G){var M=4*(r*x+G),N=4*(H*x+G);k[M]=q[N];k[M+1]=q[N+1];k[M+2]=q[N+2];k[M+3]=q[N+3]}l.putImageData(n,0,0);return h.toDataURL("image/png")},ig:function(q){!h&&q&&(h=document.createElement("canvas"),l=h.getContext("2d"));var n=q?h:document.createElement("canvas");n.width=e.width;n.height=e.height;(q?l:n.getContext("2d")).drawImage(e,
0,0);return n},A:function(q){q.ee&&!q.zb?e=document.getElementById(q.ee):q.zb&&(e=q.zb);e||(e=document.createElement("canvas"));e.width=q&&void 0!==q.width?q.width:512;e.height=q&&void 0!==q.height?q.height:512;"undefined"===typeof q&&(q={});void 0===q.premultipliedAlpha&&(q.premultipliedAlpha=!1);void 0===q.dd&&(q.dd=!0);void 0===q.antialias&&(q.antialias=!1);if(b)p=b instanceof WebGL2RenderingContext;else{p=!0;var n={antialias:q.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:q.premultipliedAlpha,
stencil:!1,depth:q.dd};navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("noAntialiasing")&&(n.antialias=!1);var x=c(n);!x&&n.antialias&&(n.antialias=!1,x=c(n));x&&(b=e.getContext("webgl2",n));b?p=!0:((b=e.getContext("webgl",n))||(b=e.getContext("experimental-webgl",n)),p=!1)}if(!b)return a("WebGL1 and 2 are not enabled");(m=b.getExtension("WEBGL_lose_context"))&&q.td&&(v=q.td,e.addEventListener("webglcontextlost",v,!1));if(!ba.A())return a("Not enough GL capabilities");d(b);A.A();
U.A();return Ca.Cc(b,ba.se())?!0:a("Cannot filter float textures")},m:function(){b&&(ba.m(),Ca.m());m&&v&&(e.removeEventListener("webglcontextlost",v,!1),m=v=null);b=f=l=h=e=null}};return B}(),wa=function(){function a(){null===c&&("undefined"!==typeof A?c=A:"undefined"!==typeof JEShaders&&(c=JEShaders))}var c=null;a();return{gf:function(d){c!==d&&(c&&c.R(),c=d)},fb:function(){return c.fb()},xa:function(){return c.xa()},rb:function(d){return c.rb(d)},mc:function(){return c.mc()},R:function(){return c.R()},
set:function(d){return c.set(d)},Ma:function(d){a();return c.Ma(d)},kc:function(d){a();return c.kc(d)},m:function(){return c.m()}}}(),Ba=function(){function a(g){b.bindTexture(b.TEXTURE_2D,g)}function c(g){t[0]=g;g=D[0];var I=g>>16&32768,E=g>>12&2047,T=g>>23&255;return 103>T?I:142<T?I|31744|((255==T?0:1)&&g&8388607):113>T?(E|=2048,I|(E>>114-T)+(E>>113-T&1)):I=(I|T-112<<10|E>>1)+(E&1)}function d(g){var I=new Uint16Array(g.length);g.forEach(function(E,T){I[T]=c(E)});return I}function e(){if(null!==
K.Qb)return K.Qb;var g=l(d([.5,.5,.5,.5]));return null===g?!0:K.Qb=g}function h(){if(null!==K.Rb)return K.Rb;var g=l(new Uint8Array([127,127,127,127]));return null===g?!0:K.Rb=g}function l(g){if(!wa.fb()||!k)return null;var I=null,E=Math.sqrt(g.length/4);try{var T=b.getError();if("FUCKING_BIG_ERROR"===T)return!1;I=P.instance({isFloat:!1,S:!0,array:g,width:E});T=b.getError();if(T!==b.NO_ERROR)return!1}catch(xa){return!1}ka.P();b.viewport(0,0,E,E);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT);wa.set("s0");
I.Ac(0);la.l(!0,!0);g=4*E*E;T=new Uint8Array(g);b.readPixels(0,0,E,E,b.RGBA,b.UNSIGNED_BYTE,T);E=!0;for(var ea=0;ea<g;++ea)E=E&&3>Math.abs(T[ea]-127);I.remove();ka.da();return E}var m=0,p=null,f=0,v=null,B=null,q=null,n=null,x=null,y=null,k=!1,r=[],H={isFloat:!1,isPot:!0,isLinear:!1,isMipmap:!1,isAnisotropicFiltering:!1,isMirrorX:!1,isMirrorY:!1,isSrgb:!1,isKeepArray:!1,isFlipY:null,width:0,height:0,url:null,array:null,data:null,L:null,Pb:null,Ie:!1,S:!1,ka:null,jb:4,Xb:0},G=!1,M=null,N=null,F=[[1,
0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],J=!1,u=!1,t=new Float32Array(1),D=new Int32Array(t.buffer),K={Qb:null,Rb:null},P={A:function(){k||(x=[b.RGBA,null,b.RGBA,b.RGBA],y=[b.RGBA,null,b.RGBA,b.RGBA],p=[b.TEXTURE0,b.TEXTURE1,b.TEXTURE2,b.TEXTURE3,b.TEXTURE4,b.TEXTURE5,b.TEXTURE6,b.TEXTURE7],J="undefined"!==typeof JEContext,u="undefined"!==typeof ba,J&&JEContext.Hg()&&p.push(b.TEXTURE8,b.TEXTURE9),v=[-1,-1,-1,-1,-1,-1,-1,-1],n=[b.UNSIGNED_BYTE,b.FLOAT,b.FLOAT],k=!0)},Fe:function(){if(!B){for(var g=new Float32Array(16384),
I=0;16384>I;++I)g[I]=2*Math.random()-1;B={random:P.instance({isFloat:!0,isPot:!0,array:g,width:64}),Ld:P.instance({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}P.wf()},yg:function(){return B.Ld},wf:function(){n[1]=ba.Lb(b)},ef:function(){y=x=[b.RGBA,b.RGBA,b.RGBA,b.RGBA]},Ad:function(g){A.set("s1");ka.P();var I=g.F(),E=g.U();b.viewport(0,0,I,E);g.g(0);la.l(!1,!1)},Ng:function(g,I){P.Ad(g);b.readPixels(0,0,g.F(),g.U(),b.RGBA,b.UNSIGNED_BYTE,I)},Og:function(g,I){P.Ad(g);return ba.pb(0,
0,g.F(),g.U(),I)},Tc:function(g,I,E,T,ea,xa,w){g.activeTexture(g.TEXTURE0);var ra=g.createTexture();g.bindTexture(g.TEXTURE_2D,ra);ea=ea instanceof Float32Array?ea:new Float32Array(ea);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.NEAREST);g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,xa);g.texImage2D(g.TEXTURE_2D,0,
g.RGBA,E,T,0,g.RGBA,g.FLOAT,ea);g.bindTexture(g.TEXTURE_2D,null);g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,!1);w&&(ka.da(),A.Ma(g));g.viewport(0,0,E,T);g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,I,0);g.bindTexture(g.TEXTURE_2D,ra);w?la.l(!0,!0):U.Wa(g);g.deleteTexture(ra);k&&(v[0]=-1,q=null,m=0)},vb:function(g){g!==m&&(b.activeTexture(p[g]),m=g)},instance:function(g){function I(C){var Q=b.getError();if("FUCKING_BIG_ERROR"===Q)return!1;b.texImage2D(b.TEXTURE_2D,0,ha,da,ia,C);Q=
b.getError();Q!==b.NO_ERROR&&da!==b.RGBA&&(da=b.RGBA,b.texImage2D(b.TEXTURE_2D,0,ha,da,ia,C));return!0}function E(){if(!Db){a(sa);za&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,za);w.isPot?(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,w.isMirrorX?b.MIRRORED_REPEAT:b.REPEAT),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,w.isMirrorY?b.MIRRORED_REPEAT:b.REPEAT)):(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE));w.isAnisotropicFiltering&&
"undefined"!==typeof JESETTINGS&&b.texParameterf(b.TEXTURE_2D,JEContext.lg().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.Af);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,w.isLinear?b.LINEAR:b.NEAREST);w.isLinear?b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,w.isMipmap&&!Ka?b.NEAREST_MIPMAP_LINEAR:b.LINEAR):b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,w.isMipmap&&!Ka?b.NEAREST_MIPMAP_NEAREST:b.NEAREST);da=x[w.jb-1];ha=y[w.jb-1];ia=n[nb];if(ba.ha()){var C=ba.ve();da===b.RGBA&&ia===b.FLOAT?w.isMipmap||
w.isLinear?ha=Ca.xe(b):ba.Dc()?C&&(ha=C):ha=b.RGBA16F||b.RGBA:da===b.RGB&&ia===b.FLOAT&&C&&(ha=C,da=b.RGBA)}if(w.S&&!w.isFloat||w.isFloat&&w.isMipmap&&Ca.Me())ha=ba.we(),ia=ba.Lb(b);w.Xb&&($a=w.Xb);w.isSrgb&&4===w.jb&&(da=JEContext.wg());if(w.L)I(w.L);else if(w.url)I(Ga);else if(Aa){C=Aa;try{"FUCKING_BIG_ERROR"!==b.getError()&&(b.texImage2D(b.TEXTURE_2D,0,ha,R,S,0,da,ia,C),b.getError()!==b.NO_ERROR&&(b.texImage2D(b.TEXTURE_2D,0,ha,R,S,0,da,ia,null),b.getError()!==b.NO_ERROR&&b.texImage2D(b.TEXTURE_2D,
0,b.RGBA,R,S,0,b.RGBA,b.UNSIGNED_BYTE,null)))}catch(ec){b.texImage2D(b.TEXTURE_2D,0,ha,R,S,0,da,ia,null)}w.isKeepArray||(Aa=null)}else C=b.getError(),"FUCKING_BIG_ERROR"!==C&&(b.texImage2D(b.TEXTURE_2D,0,ha,R,S,0,da,ia,null),C=b.getError(),C!==b.NO_ERROR&&(da=b.RGBA,w.S&&ia!==b.FLOAT&&(ia=b.FLOAT,b.texImage2D(b.TEXTURE_2D,0,ha,R,S,0,da,ia,null))));if(w.isMipmap)if(!Ka&&ca)ca.Kb(),ab=!0;else if(Ka){C=Math.log2(Math.min(R,S));Ra=Array(1+C);Ra[0]=sa;for(var Q=1;Q<=C;++Q){var ja=Math.pow(2,Q),V=R/ja;
ja=S/ja;var La=b.createTexture();a(La);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texImage2D(b.TEXTURE_2D,0,ha,V,ja,0,da,ia,null);a(null);Ra[Q]=La}ab=!0}a(null);v[m]=-1;za&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1);Ta=!0;w.ka&&ca&&(w.ka(ca),w.ka=null)}}function T(){for(var C=R*S,Q=2*C,ja=3*C,V=0;V<C;++V)ya[0][V]=Ua[V],ya[1][V]=Ua[V+C],ya[2][V]=Ua[V+Q],ya[3][V]=Ua[V+ja]}function ea(){var C=R*S*4;Da=[new Uint8Array(C),new Uint8Array(C),
new Uint8Array(C),new Uint8Array(C)];ya=[new Float32Array(Da[0].buffer),new Float32Array(Da[1].buffer),new Float32Array(Da[2].buffer),new Float32Array(Da[3].buffer)];bb=new Uint8Array(4*C);Ua=new Float32Array(bb.buffer);Va=!0}function xa(){Ea.wb=new Uint8Array(R*S*4);Ea.Uc=new Float32Array(Ea.buffer);Ea.Ub=!0}var w=Object.assign({},H,g),ra=f++;null===w.isFlipY&&(w.isFlipY=w.url||w.array?!0:!1);w.data&&(w.array="string"===typeof w.data?Kb(w.data):w.isFloat?new Float32Array(w.data):new Uint8Array(w.data),
w.isFlipY=!1);var nb=0,Sb=w.L?!0:!1,Wa=null,ob=null,Eb=!1,pb=null;w.S=w.S||w.isFloat;w.S&&(nb=1);!w.Ie&&w.isFloat&&u&&!ba.Dc()&&(w.isFloat=!1);w.isFloat&&(nb=2);w.isAnisotropicFiltering&&J&&!JEContext.Bg()&&(w.isAnisotropicFiltering=!1);var sa=w.Pb||b.createTexture(),Ga=null,Aa=!1,R=0,S=0,Ta=!1,Db=!1,Va=!1,ya=null,Da=null,bb=null,Ua=null,ha=null,da=null,ia=null,za=w.isFlipY,Tb=(g=w.S&&w.isMipmap)&&Ca.Wd(),Ka=g&&Tb?!0:!1,Ra=null,$a=-1,ab=!1,Ea={Ub:!1,wb:null,Uc:null};w.width&&(R=w.width,S=w.height?
w.height:R);var ca={get:function(){return sa},F:function(){return R},U:function(){return S},zg:function(){return w.url},Cg:function(){return w.isFloat},Eg:function(){return w.S},Fg:function(){return w.isLinear},Kb:function(){b.generateMipmap(b.TEXTURE_2D)},Ud:function(C,Q){Ka?(C||(C=ca.Yc()),P.vb(Q),a(Ra[C]),v[Q]=-1):ca.g(Q)},Yc:function(){-1===$a&&($a=Math.log(R)/Math.log(2));return $a},pe:function(C){if(Ka){C||(C=ca.Yc());A.set("s11");P.vb(0);for(var Q=R,ja=S,V=1;V<=C;++V)Q/=2,ja/=2,A.oa("u7",.25/
Q,.25/ja),b.viewport(0,0,Q,ja),a(Ra[V-1]),b.framebufferTexture2D(ka.Za(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,Ra[V],0),la.l(!1,1===V);v[0]=-1}else ca.Kb()},g:function(C){if(!Ta)return!1;P.vb(C);if(v[C]===ra)return!1;a(sa);v[C]=ra;return!0},Ac:function(C){b.activeTexture(p[C]);m=C;a(sa);v[C]=ra},u:function(){q=ca;b.framebufferTexture2D(ka.Za(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,sa,0)},aa:function(){q=ca;b.viewport(0,0,R,S);b.framebufferTexture2D(ka.Za(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,sa,0)},sc:P.sc,resize:function(C,
Q){R=C;S=Q;E()},clone:function(C){C=P.instance({width:R,height:S,S:w.S,isFloat:w.isFloat,isLinear:w.isLinear,isMirrorY:w.isMirrorY,isFlipY:C?!za:za,isPot:w.isPot});wa.set("s0");ka.da();C.u();b.viewport(0,0,R,S);ca.g(0);la.l(!0,!0);return C},jf:function(){b.viewport(0,0,R,S)},remove:function(){b.deleteTexture(sa);Db=!0;r.splice(r.indexOf(ca),1);ca=null},refresh:function(){ca.Ac(0);za&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);Sb?b.texImage2D(b.TEXTURE_2D,0,ha,da,b.UNSIGNED_BYTE,w.L):b.texImage2D(b.TEXTURE_2D,
0,ha,R,S,0,da,ia,Aa);za&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},zd:function(){Va||ea();b.readPixels(0,0,R,4*S,b.RGBA,b.UNSIGNED_BYTE,bb);T();return ya},Ye:function(){Va||ea();return ba.pb(0,0,R,4*S,bb).then(function(){T();return ya})},$e:function(){Ea.Ub||xa();b.readPixels(0,0,R,S,b.RGBA,b.UNSIGNED_BYTE,Ea.wb);return Ea.Uc},Ze:function(){Ea.Ub||xa();return ba.pb(0,0,R,S,Ea.wb)},Ic:function(C){ka.P();A.set("s12");ca.g(0);if(C)b.viewport(0,0,R,S),A.lc("u8",.25,.25,.25,.25),la.l(!1,!0);else for(C=
0;4>C;++C)b.viewport(0,S*C,R,S),A.lc("u8",F[C]),la.l(!1,0===C)},vf:function(C){var Q=ia===n[0]&&!h();a(sa);za&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);Q?(Eb||(Wa=document.createElement("canvas"),Wa.width=R,Wa.height=S,ob=Wa.getContext("2d"),pb=ob.createImageData(R,S),Eb=!0),pb.data.set(C),ob.putImageData(pb,0,0),b.texImage2D(b.TEXTURE_2D,0,ha,da,ia,Wa)):b.texImage2D(b.TEXTURE_2D,0,ha,R,S,0,da,ia,C);v[m]=ra;za&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},eh:function(C,Q){a(sa);Q&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,
!0);b.texImage2D(b.TEXTURE_2D,0,ha,da,ia,C);v[m]=ra;Q&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},Tg:function(C,Q){var ja=R*S,V=4*ja;C=w.S?C?"RGBE":"JSON":"RGBA";Q&&(C=Q);Q=ba.ha()&&!1;var La=null;switch(C){case "RGBE":La="s42";break;case "JSON":La=Q?"s0":"s12";break;case "RGBA":case "RGBAARRAY":La="s6"}Va||("RGBA"===C||"RGBE"===C||"RGBAARRAY"===C?(Da=new Uint8Array(V),Va=!0):"JSON"!==C||Q||ea());ka.P();A.set(La);ca.g(0);V=null;if("RGBA"===C||"RGBE"===C||"RGBAARRAY"===C){b.viewport(0,0,R,S);la.l(!0,
!0);b.readPixels(0,0,R,S,b.RGBA,b.UNSIGNED_BYTE,Da);if("RGBAARRAY"===C)return{data:Da};G||(M=document.createElement("canvas"),N=M.getContext("2d"),G=!0);M.width=R;M.height=S;ja=N.createImageData(R,S);ja.data.set(Da);N.putImageData(ja,0,0);V=M.toDataURL("image/png")}else if("JSON"===C)if(Q)V=new Float32Array(ja),b.viewport(0,0,R,S),la.l(!0,!0),b.readPixels(0,0,R,S,b.RGBA,b.FLOAT,V);else{for(V=0;4>V;++V)b.viewport(0,S*V,R,S),A.lc("u8",F[V]),la.l(!V,!V);ca.zd();V=Array(ja);for(Q=0;Q<ja;++Q)V[4*Q]=ya[0][Q],
V[4*Q+1]=ya[1][Q],V[4*Q+2]=ya[2][Q],V[4*Q+3]=ya[3][Q]}return{format:C,data:V,width:R,height:S,isMirrorY:w.isMirrorY,isFlipY:"RGBA"===C?w.isFlipY:!w.isFlipY}}};w.isMipmap&&!Ka&&Ta&&!ab&&(ca.Kb(),ab=!0);if(w.url)a(sa),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,1,1,0,b.RGBA,b.UNSIGNED_BYTE,null),Ga=new Image,Ga.Mf="Anonymous",Ga.crossOrigin="Anonymous",Ga.src=w.url,Ga.onload=function(){R=Ga.width;S=Ga.height;E()};else if(w.L){var Fb=function(){R=void 0!==w.L.videoWidth?w.L.videoWidth:w.L.width;S=void 0!==w.L.videoHeight?
w.L.videoHeight:w.L.height;R?E():setTimeout(Fb,1)};Fb()}else w.array?(w.S&&!w.isFloat?w.array instanceof Uint16Array?(Aa=w.array,E()):e()?(Aa=d(w.array),E()):(E(),P.Tc(b,sa,ca.F(),ca.U(),w.array,za,!0)):(Aa=w.isFloat?w.array instanceof Float32Array?w.array:new Float32Array(w.array):w.array instanceof Uint8Array?w.array:new Uint8Array(w.array),E()),w.isKeepArray||(Aa&&Aa!==w.array&&(Aa=null),delete w.array)):w.Pb?Ta=!0:E();ca.vg=ca.F;w.ka&&Ta&&(w.ka(ca),w.ka=null);r.push(ca);return ca},P:function(g){g!==
m&&(b.activeTexture(p[g]),m=g);v[g]=-1;a(null)},Df:function(g){B.random.g(g)},sc:function(){q=null;b.framebufferTexture2D(ka.Za(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0)},reset:function(){0!==m&&b.activeTexture(p[0]);for(var g=0;g<p.length;++g)v[g]=-1;m=-1},Rg:function(){m=-1},sf:function(){for(var g=0;g<p.length;++g)P.P(g)},Vc:function(){B&&(B.random.remove(),B.Ld.remove())},dh:function(g,I){if("RGBA"===g.format||"RGBE"===g.format){var E=new Image;E.src=g.data;E.onload=function(){P.instance({isMirrorY:g.isMirrorY,
isFlipY:g.isFlipY,isFloat:!1,L:E,ka:function(T){if("RGBA"===g.format)I(T);else{var ea=g.width,xa=g.height,w=P.instance({isMirrorY:g.isMirrorY,isFloat:!0,width:ea,height:xa,isFlipY:g.isFlipY});ka.da();b.viewport(0,0,ea,xa);A.set("s43");w.u();T.g(0);la.l(!0,!0);P.P(0);I(w);b.flush();setTimeout(T.remove,50)}}})}}else"JSON"===g.format?I(P.instance({isFloat:!0,isFlipY:g.isFlipY,width:g.width,height:g.height,array:new Float32Array(g.data)})):I(!1)},be:d,m:function(){q&&(ta.da(),P.sc(),ta.P());P.sf();r.slice(0).forEach(function(g){g.remove()});
r.splice(0);k=!1;f=0;"undefined"!==typeof Ca&&Ca.m();B=null}};return P}(),Lb=function(){return{instance:function(a){var c=[Ba.instance(a),Ba.instance(a)],d=[c[1],c[0]],e=d,h={cf:function(l){e[1].u();e[0].g(l);h.Hd()},Ug:function(l){e[1].aa();e[0].g(l);h.Hd()},Hd:function(){e=e===c?d:c},refresh:function(){e[0].refresh();e[1].refresh()},g:function(l){e[0].g(l)},Cf:function(l){e[1].g(l)},pg:function(){return e[0]},tg:function(){return e[1]},remove:function(){e[0].remove();e[1].remove();e=null}};return h}}}(),
la=function(){function a(f){var v={ba:null,J:null};v.ba=f.createBuffer();f.bindBuffer(f.ARRAY_BUFFER,v.ba);f.bufferData(f.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),f.STATIC_DRAW);v.J=f.createBuffer();f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,v.J);f.bufferData(f.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),f.STATIC_DRAW);return v}var c=null,d=0,e=!1,h=[],l=-2,m=-2,p={reset:function(){m=l=-2},A:function(){e||(c=a(b),p.Ea(),e=!0)},instance:function(f){var v=d++,B=f.J?f.J.length:0,q="undefined"===typeof f.mode?
b.STATIC_DRAW:f.mode,n=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,n);b.bufferData(b.ARRAY_BUFFER,f.ba instanceof Float32Array?f.ba:new Float32Array(f.ba),q);l=v;var x=null,y=null,k=null;if(f.J){x=b.createBuffer();b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,x);var r=null;65536>f.J.length?(r=Uint16Array,y=b.UNSIGNED_SHORT,k=2):(r=Uint32Array,y=b.UNSIGNED_INT,k=4);r=f.J instanceof r?f.J:new r(f.J);b.bufferData(b.ELEMENT_ARRAY_BUFFER,r,q);m=v}var H={Vd:function(G){l!==v&&(b.bindBuffer(b.ARRAY_BUFFER,n),l=v);
G&&wa.mc()},Sd:function(){m!==v&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,x),m=v)},bind:function(G){H.Vd(G);H.Sd()},Of:function(){b.drawElements(b.TRIANGLES,B,y,0)},Pf:function(G,M){b.drawElements(b.TRIANGLES,G,y,M*k)},remove:function(){b.deleteBuffer(n);f.J&&b.deleteBuffer(x);H=null}};h.push(H);return H},Ea:function(){-1!==l&&(b.bindBuffer(b.ARRAY_BUFFER,c.ba),l=-1);-1!==m&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,c.J),m=-1)},l:function(f,v){f&&la.Ea();v&&wa.xa();b.drawElements(b.TRIANGLES,3,b.UNSIGNED_SHORT,
0)},Wa:function(f){f=f||b;var v=a(f);f.bindBuffer(f.ARRAY_BUFFER,v.ba);f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,v.J);wa.rb(f);f.clear(f.COLOR_BUFFER_BIT);f.drawElements(f.TRIANGLES,3,f.UNSIGNED_SHORT,0);f.flush();f.bindBuffer(f.ARRAY_BUFFER,null);f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,null);f.deleteBuffer(v.ba);f.deleteBuffer(v.J);p.reset();e&&(p.Ea(),wa.xa())},Vc:function(){var f=b,v=c;f.deleteBuffer(v.ba);f.deleteBuffer(v.J)},m:function(){p.Vc();h.forEach(function(f){f.remove()});b.bindBuffer(b.ARRAY_BUFFER,
null);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,null);p.reset();e=!1;h.splice(0);d=0}};return p}(),ka=function(){var a=null,c=null,d=null,e=!1,h=[],l={I:-2,Sc:1},m={fb:function(){return e},A:function(){if(!e){a=b.createFramebuffer();var p=ba.ha();c=p&&b.DRAW_FRAMEBUFFER?b.DRAW_FRAMEBUFFER:b.FRAMEBUFFER;d=p&&b.READ_FRAMEBUFFER?b.READ_FRAMEBUFFER:b.FRAMEBUFFER;e=!0}},mg:function(){return c},ye:function(){return d},Za:function(){return b.FRAMEBUFFER},ug:function(){return l},eg:function(){return a},instance:function(p){void 0===
p.cd&&(p.cd=!1);var f=p.N?p.N:null,v=p.width,B=void 0!==p.height?p.height:p.width,q=a,n=null,x=!1,y=!1,k=0;f&&(v=v?v:f.F(),B=B?B:f.U());var r={Ed:function(){x||(q=b.createFramebuffer(),x=!0,k=l.Sc++)},Nd:function(){r.Ed();r.u();n=b.createRenderbuffer();b.bindRenderbuffer(b.RENDERBUFFER,n);b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,v,B);b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,n);b.clearDepth(1)},bind:function(H,G){k!==l.I&&(b.bindFramebuffer(c,q),l.I=k);f&&f.u();
G&&b.viewport(0,0,v,B);H&&b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)},Bf:function(){k!==l.I&&(b.bindFramebuffer(c,q),l.I=k)},clear:function(){b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)},Jf:function(){b.clear(b.COLOR_BUFFER_BIT)},Kf:function(){b.clear(b.DEPTH_BUFFER_BIT)},jf:function(){b.viewport(0,0,v,B)},u:function(){k!==l.I&&(b.bindFramebuffer(c,q),l.I=k)},rtt:function(H){f=H;l.I!==k&&(b.bindFramebuffer(b.FRAMEBUFFER,q),l.I=k);H.u()},P:function(){b.bindFramebuffer(c,null);l.I=-1},resize:function(H,
G){v=H;B=G;n&&(b.bindRenderbuffer(b.RENDERBUFFER,n),b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,v,B))},remove:function(){q===a||y||(b.bindFramebuffer(c,q),b.framebufferTexture2D(c,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0),n&&b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,null),b.bindFramebuffer(c,null),b.deleteFramebuffer(q),n&&b.deleteRenderbuffer(n));y=!0}};p.cd&&r.Nd();h.push(r);return r},P:function(){b.bindFramebuffer(c,null);l.I=-1},tf:function(){b.bindFramebuffer(c,
null);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);b.viewport(0,0,ba.F(),ba.U());l.I=-1},reset:function(){l.I=-2},da:function(){0!==l.I&&(b.bindFramebuffer(c,a),l.I=0)},clear:function(){b.viewport(0,0,ba.F(),ba.U());b.clear(b.COLOR_BUFFER_BIT)},m:function(){m.P();h.forEach(function(p){p.remove()});null!==a&&(b.deleteFramebuffer(a),a=null);m.reset();e=!1;h.splice(0);l.Sc=1}};return m}(),ba=function(){function a(){e="undefined"===typeof Qa?JEContext:Qa;h=!0}function c(k,r){for(var H=0;H<k.length;++H){var G=
r.getExtension(k[H]);if(G)return G}return null}function d(){null!==n.tb&&(clearInterval(n.tb),n.tb=null);n.Ja=!1}var e=null,h=!1,l={ed:!1,oc:null,pc:null,jd:!1,Le:!1,qc:null,kd:!1,rc:null,fd:!1,xb:null,Ge:!1,yb:null,He:!1},m=null,p={fa:!0,ga:!0,Jb:!0,yd:!1},f=null,v=!0,B=null,q=null,n={Ja:!1,ra:null,$a:null,Ob:-1,sa:null,tb:null},x="undefined"===typeof window?{}:window,y={A:function(){if(h)return!0;y.reset();h||a();var k=b;if(!m.ed){m.oc=y.Oc(k);x.GL_EXT_FLOAT=m.oc;m.jd=m.oc?!0:!1;if(m.jd||y.ha())m.pc=
y.Pc(k),m.Le=m.pc?!0:!1,x.GL_EXT_FLOATLINEAR=m.pc;m.ed=!0}if(!m.fd){m.qc=y.Va(k);m.qc&&(m.kd=!0,x.GL_EXT_HALFFLOAT=m.qc);if(m.kd||y.ha())m.rc=y.Qc(k),x.GL_EXT_HALFFLOATLINEAR=m.rc;m.Ag=m.rc?!0:!1;m.fd=!0}m.xb=y.Mc(k);m.Ge=m.xb?!0:!1;x.GL_EXT_COLORBUFFERFLOAT=m.xb;m.yb=y.Nc(k);m.He=m.yb?!0:!1;x.GL_EXT_COLORBUFFERHALFFLOAT=m.yb;ka.A();Ba.A();if(!y.ge())return!1;la.A();Ba.Fe();return!0},reset:function(){m=Object.assign({},l);f=Object.assign({},p)},F:function(){h||a();return e.F()},U:function(){h||a();
return e.U()},ha:function(){h||a();return e.ha()},Lc:function(k){y.Mc(k);y.Nc(k);y.Oc(k);y.Pc(k);y.Va(k);y.Qc(k)},Mc:c.bind(null,["EXT_color_buffer_float","WEBGL_color_buffer_float","OES_color_buffer_float"]),Nc:c.bind(null,["EXT_color_buffer_half_float","WEBGL_color_buffer_half_float","OES_color_buffer_half_float"]),Oc:c.bind(null,["OES_texture_float","MOZ_OES_texture_float","WEBKIT_OES_texture_float"]),Pc:c.bind(null,["OES_texture_float_linear","MOZ_OES_texture_float_linear","WEBKIT_OES_texture_float_linear"]),
Va:c.bind(null,["OES_texture_half_float","MOZ_OES_texture_half_float","WEBKIT_OES_texture_half_float"]),Qc:c.bind(null,["OES_texture_half_float_linear","MOZ_OES_texture_half_float_linear","WEBKIT_OES_texture_half_float_linear"]),Lb:function(k){var r=y.Va(k);return r&&r.HALF_FLOAT_OES?r.HALF_FLOAT_OES:k.HALF_FLOAT||k.FLOAT},ve:function(){return q||b.RGBA32F||b.RGBA},we:function(){return B||b.RGBA16F||b.RGBA},se:function(){return f},Dc:function(){return f.fa},Ff:function(){return f.ga},Ef:function(){return f.Jb},
Xd:function(){return f.yd&&v},Jd:function(k){v=k;!k&&n.Ja&&(b.deleteSync(n.$a),b.bindBuffer(n.sa,null),n.Ja=!1)},sb:function(k,r,H){function G(){k.bindTexture(k.TEXTURE_2D,null);k.bindFramebuffer(M,null);k.deleteTexture(J);k.deleteFramebuffer(F)}var M=k.FRAMEBUFFER,N=k.NEAREST,F=k.createFramebuffer();k.bindFramebuffer(M,F);var J=k.createTexture();k.activeTexture(k.TEXTURE0);k.bindTexture(k.TEXTURE_2D,J);k.pixelStorei(k.UNPACK_FLIP_Y_WEBGL,!1);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,k.CLAMP_TO_EDGE);
k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,k.CLAMP_TO_EDGE);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,N);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,N);k.texImage2D(k.TEXTURE_2D,0,r,3,3,0,k.RGBA,H,null);k.framebufferTexture2D(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_2D,J,0);if(k.checkFramebufferStatus(k.READ_FRAMEBUFFER||k.FRAMEBUFFER)!==k.FRAMEBUFFER_COMPLETE)return G(),!1;wa.kc(k);k.clearColor(0,0,0,0);k.viewport(0,0,3,3);k.disable(k.DEPTH_TEST);k.clear(k.COLOR_BUFFER_BIT);la.Wa(k);
k.bindFramebuffer(M,null);wa.Ma(k);k.activeTexture(k.TEXTURE0);k.bindTexture(k.TEXTURE_2D,J);la.Wa(k);r=new Uint8Array(36);k.readPixels(0,0,3,3,k.RGBA,k.UNSIGNED_BYTE,r);G();for(H=0;36>H;++H)if(3!==H%4&&3<Math.abs(r[H]-127))return!1;return!0},Bb:function(k){var r={fa:!1,ga:!1};k.disable(k.BLEND);k.clearColor(0,0,0,0);k.clear(k.COLOR_BUFFER_BIT);k.RGBA32F&&y.sb(k,k.RGBA32F,k.FLOAT)&&(r.fa=!0,q=k.RGBA32F);!r.fa&&y.sb(k,k.RGBA,k.FLOAT)&&(r.fa=!0,q=k.RGBA);var H=y.Lb(k);B=null;k.RGBA16F&&y.sb(k,k.RGBA16F,
H)&&(r.ga=!0,B=k.RGBA16F);!r.ga&&y.sb(k,k.RGBA,H)&&(r.ga=!0,B=k.RGBA);return r},he:function(){var k=ka.instance({width:2});k.Ed();var r=Ba.instance({width:2,isFloat:!0,jb:3});k.u();r.u();b.flush();b.checkFramebufferStatus(ka.ye())!==b.FRAMEBUFFER_COMPLETE?(Ba.ef(),f.Jb=!1):f.Jb=!0;k.remove();r.remove()},ie:function(){var k=!1;y.ha()&&(k="PIXEL_PACK_BUFFER STREAM_READ SYNC_GPU_COMMANDS_COMPLETE WAIT_FAILED fenceSync deleteSync createBuffer".split(" ").every(function(r){return"undefined"!==typeof b[r]}));
f.yd=k},ge:function(){var k=y.Bb(b);Object.assign(f,k);if(!f.fa&&!f.ga)return!1;y.he();y.ie();return!0},pb:function(k,r,H,G,M){if(!y.Xd())return b.readPixels(k,r,H,G,b.RGBA,b.UNSIGNED_BYTE,M),Promise.resolve(M);null===n.ra&&(n.sa=b.PIXEL_PACK_BUFFER,n.ra=b.createBuffer(),n.Ob=-1);b.bindBuffer(n.sa,n.ra);M.byteLength!==n.Ob&&(b.bufferData(n.sa,M.byteLength,b.STREAM_READ),n.Ob=M.byteLength);b.readPixels(k,r,H,G,b.RGBA,b.UNSIGNED_BYTE,0);n.$a=b.fenceSync(b.SYNC_GPU_COMMANDS_COMPLETE,0);b.flush();return new Promise(function(N,
F){function J(){if(!n.Ja)return d(),F(),!1;switch(b.clientWaitSync(n.$a,0,0)){case b.TIMEOUT_EXPIRED:return!1;case b.WAIT_FAILED:return d(),F(),!1;default:return d(),b.deleteSync(n.$a),b.getBufferSubData(n.sa,0,M),b.bindBuffer(n.sa,null),N(M),!0}}d();n.Ja=!0;J()||(n.tb=setInterval(J,0))})},m:function(){d();Ba.m();wa.m();ka.m();la.m();null!==n.ra&&(b.deleteBuffer(n.ra),n.ra=null);h=!1}};return y}(),U=la,ta=ka,Y=Ba,Ca=function(){function a(F,J,u,t){r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,
t?r.NEAREST_MIPMAP_NEAREST:r.LINEAR);var D=null;if(null!==u)try{D=r.getError();if("FUCKING_BIG_ERROR"===D)return!1;r.texImage2D(r.TEXTURE_2D,0,F,4,4,0,r.RGBA,J,u);D=r.getError();if(D!==r.NO_ERROR)return!1}catch(K){return!1}t&&r.generateMipmap(r.TEXTURE_2D);r.clear(r.COLOR_BUFFER_BIT);U.Wa(r);D=r.getError();if("FUCKING_BIG_ERROR"===D)return!1;r.readPixels(0,0,2,2,r.RGBA,r.UNSIGNED_BYTE,B);D=r.getError();D===r.INVALID_OPERATION&&"undefined"!==typeof r.PIXEL_PACK_BUFFER&&(r.bindBuffer(r.PIXEL_PACK_BUFFER,
null),r.readPixels(0,0,2,2,r.RGBA,r.UNSIGNED_BYTE,B),D=r.getError());if(D!==r.NO_ERROR)return!1;u=!0;for(t=0;16>t;++t)u=u&&4>Math.abs(B[t]-127);u&&(f.vd=J,f.bd=F);return u}function c(F,J){return H.fa&&a(F,r.FLOAT,new Float32Array(q),J)?(p=m.wc,!0):!1}function d(F,J,u){if(!H.ga)return!1;var t=Ba.be(q),D=ba.Va(r);if(D&&D.HALF_FLOAT_OES&&a(F,D.HALF_FLOAT_OES,t,J)||r.HALF_FLOAT&&a(F,r.HALF_FLOAT,t,J))return p=m.Ba,!0;t=new Float32Array(q);if(a(F,r.FLOAT,t,J))return p=m.Ba,!0;r.bindTexture(r.TEXTURE_2D,
u);r.texImage2D(r.TEXTURE_2D,0,r.RGBA,2,2,0,r.RGBA,r.UNSIGNED_BYTE,null);r.bindFramebuffer(f.Ta,N);Ba.Tc(r,u,2,2,t,!1,!1);r.bindFramebuffer(f.Ta,null);r.bindTexture(r.TEXTURE_2D,u);return a(F,null,null,J)?(p=m.Ba,!0):!1}function e(F,J,u){v=!0;if(d(F,!0,u)||c(J,!0))return!0;v=!1;return d(F,!1,u)||c(J,!1)?!0:!1}function h(F){if(p===m.R){r=F||b;p=m.RGBA8;v=!0;ba.Lc(r);H||(H=ba.Bb(r));ta.reset();N=r.createFramebuffer();f.Ta=r.DRAW_FRAMEBUFFER||r.FRAMEBUFFER;r.bindFramebuffer(f.Ta,null);r.clearColor(0,
0,0,0);r.viewport(0,0,2,2);A.R();G=A.Ma(r);F=r.createTexture();r.activeTexture(r.TEXTURE0);r.bindTexture(r.TEXTURE_2D,F);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.REPEAT);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.REPEAT);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST);M=F;var J=F=r.RGBA,u=r.RGBA16F,t=r.RGBA32F;t&&(F=t);u&&(J=u);if((u||t)&&e(J,F,M))return l(),!0;F=J=r.RGBA;if(e(J,F,M))return l(),!0;p=m.RGBA8;l();return!1}}function l(){r.deleteProgram(G.na);r.deleteTexture(M);
M=G=null}for(var m={R:-1,wc:3,Ba:2,RGBA8:0},p=m.R,f={vd:null,bd:null,Ta:null},v=!0,B=new Uint8Array(16),q=Array(64),n=0;4>n;++n)for(var x=0;4>x;++x){var y=0===(x+n)%2?1:0,k=4*n+x;q[4*k]=y;q[4*k+1]=y;q[4*k+2]=y;q[4*k+3]=y}var r=null,H=null,G=null,M=null,N=null;return{Wd:function(F){h(F);return v},Cc:function(F,J){p===m.R&&(typeof("undefined"!==J)&&(H=J),h(F));return p!==m.RGBA8},Dg:function(F){h(F);return p===m.wc},Me:function(F){h(F);return p===m.Ba},ng:function(F){h(F);return f.vd},xe:function(F){h(F);
return f.bd},m:function(){r=null;v=!0;p=m.R;H=null}}}(),Ub=function(){return{instance:function(a){var c=Y.instance(a.alpha),d=Y.instance(a.beta);return{ke:function(){c.g(1);d.g(2)}}}}}(),Ib=function(){return{instance:function(a){var c=null,d=!1,e=!1,h=null,l=!1,m=!1,p=null,f="undefined"===typeof a.preprocessing?!1:a.preprocessing,v="undefined"===typeof a.preprocessingSize?a.size:a.preprocessingSize;a.mask&&(d=!0,Z&&void 0!==Z.Rd&&(a.mask=Z.Rd+a.mask),c=Y.instance({isFloat:!1,url:a.mask}));var B=!1;
a.customInputShader&&(B="s44",A.yc({name:"_",id:B,h:a.customInputShader,bh:["uSource"],precision:"lowp"}),A.T(B,[{type:"1i",name:"_",value:0}]));switch(f){case "sobel":p="s31";l=!0;break;case "meanNormalization":p="s32";l=!0;break;case "grayScale":p="s28";l=!1;break;case "grayScaleTilt":p="s29";m=!0;l=!1;break;case "rgbGrayTilt":p="s30";m=!0;l=!1;break;case "copy":p=B?B:"s0";break;case "inputLightRegulation":p=B?B:"s28";h=Vb.instance({ad:v,ud:a.size,qd:a.nBlurPass,eb:!1});e=!0;break;case "inputMix0":p=
"none";h=Wb.instance({D:v,Md:a.varianceMin,Bc:a.blurKernelSizePx,eb:!1});e=!0;break;case "direct":case "none":p="abort";break;default:p="s3"}m&&A.T(p,[{name:"u26",type:"1f",value:a.tilt}]);d&&(p+="Mask");var q=Y.instance({isFloat:!1,isPot:!1,width:a.size}),n={F:function(){return v},Mb:function(){return n.F()},Be:function(){return e?h.Nb():q},V:function(x){ta.da();"abort"!==p&&("none"!==p&&(A.set(p),l&&A.H("u27",1/a.size),q.aa(),d&&c.g(1),U.l(!1,!1),q.g(0),x=q),e&&h.process(x))},m:function(){q.remove();
d&&c.remove()}};return n}}}(),Jb=function(){return{instance:function(a){function c(g){h.forEach(function(I,E){l[E][0]=g[0][I];l[E][1]=g[1][I];l[E][2]=g[2][I];l[E][3]=g[3][I]});return l}"undefined"===typeof a.normalize&&(a.normalize=!1);var d={input:null,Qa:null,Sb:null,Z:null,lb:null,cc:null,dc:null},e=null,h=[],l=[],m=!1,p=null,f=!0,v=-1,B=a.isReorganize?a.isReorganize:!1,q=a.kernelsCount?!0:!1,n=a.dynPelu?Ub.instance(a.dynPelu):!1,x=n?!0:!1,y={isEnabled:!1};a.Ke?(a.sparsity="undefined"!==typeof a.sparsity?
a.sparsity:a.nb.Mb(),f=!1):"full"===a.connectivityUp&&(a.sparsity=a.nb.Mb());var k={elu:"s15",elu01:"s16",relu:"s14",arctan:"s18",sigmoid:"s13",copy:"s0",softplus:"s19",dynPelu:"s17"}[a.activation],r=a.sparsity*a.sparsity,H=!1,G=a.size,M="";if(a.maxPooling){switch(a.maxPooling.size){case 2:M="s33";break;case 4:M="s34"}H=!0;G/=a.maxPooling.size;d.cc=Y.instance({isFloat:!0,isPot:!1,width:G})}var N=void 0!==a.Se&&a.Se?!0:!1,F=null,J=null,u=null;if(N){F="s45"+a.index.toString();A.$c("s45",F,[((a.normalization.n-
1)/2).toFixed(1)]);A.T(F,[{type:"1i",name:"u1",value:0},{type:"2f",name:"u7",value:[1/a.size,1/a.size]},{type:"1f",name:"u6",value:a.normalization.alpha},{type:"1f",name:"u9",value:a.normalization.beta},{type:"1f",name:"u30",value:a.normalization.k}]);var t={isFloat:!0,isPot:!0,width:a.size};J=Y.instance(t);u=Y.instance(t)}var D=-1,K=null;f&&(d.Z=Y.instance({isFloat:!0,isPot:!1,width:a.size}));d.Qa=Y.instance(a.bias);var P={F:function(){return a.size},Mb:function(){return G},Wc:function(){return a.classesCount},
Td:function(g){e.g(g)},Ve:function(){a.remap&&a.remap.isEnabled&&(y={isEnabled:!0,Oe:Y.instance({isFloat:!1,isFlipY:!1,array:new Uint8Array(a.remap.maskTexture.data),width:a.remap.maskTexture.width,isPot:!1}),gb:a.remap.layers.map(function(g){return a.parent.Ae(g)}),depth:a.remap.depth})},ff:function(){switch(a.connectivityUp){case "direct":K=Xb.instance(a.connectivity);break;case "square":K=Yb.instance(a.connectivity);break;case "squareFast":K=Zb.instance(a.connectivity,a.activation);break;case "full":K=
$b.instance(a.connectivity);break;case "conv":v=a.kernelsCount,K=ac.instance(a.connectivity),B&&(d.lb=Y.instance({width:G,isFloat:!0,isFlipY:!1,isPot:!1}))}if(K.ya){var g=a.size*a.sparsity;D=Math.log(g/a.size)/Math.log(2);d.input=Y.instance({isMipmap:!0,isFloat:!0,isPot:!0,width:g,Xb:D});d.Sb=Y.instance({isFloat:!0,isPot:!0,width:a.size})}},V:function(g,I){e=g;K.ya?(d.input.aa(),q&&d.Qa.g(2),K.V(y),d.input.g(0),d.input.pe(D),d.Sb.aa(),q?A.set("s0"):(A.set("s27"),A.H("u25",r),d.Qa.g(1)),d.input.Ud(D,
0),U.l(!1,!1),A.set(k),N?J.u():d.Z.u(),d.Sb.g(0),x&&n.ke(),U.l(!1,!1)):(d.Z.aa(),d.Qa.g(1),K.V());N&&(A.set(F),u.u(),J.g(0),U.l(!1,!1),A.set("s46"),A.H("u6",1),d.Z.u(),u.g(1),U.l(!1,!1));if(f)return H?(d.cc.aa(),d.Z.g(0),A.set(M),A.oa("u7",1/a.size,1/a.size),U.l(!1,!1),I=d.cc):I=d.Z,I.g(0),B&&(d.lb.u(),A.set("s21"),A.oa("u12",v,G/v),U.l(!1,!1),I=d.lb,d.lb.g(0)),I;var E=d.Z;a.normalize&&(A.set("gpuRawAvg"===m?"s8":"s7"),A.H("u4",1/a.size),d.dc.aa(),d.Z.g(0),U.l(!1,!1),E=d.dc);g=null;switch(m){case "cpuRGBA2Float":E.Ic(!1);
I?g=P.We(E).then(p):(E=P.Xe(E),p(E));break;case "cpuMeanFloat":E.Ic(!0);I?g=E.Ze().then(p):(E=E.$e(),p(E));break;case "gpuRawAvg":case "gpuRaw":E.g(0);case "none":null!==p&&p(E)}I&&null===g&&(g=Promise.resolve());return g},de:function(g){g&&(m=g.ec||"none",p=g.bc||null);d.Z=Y.instance({isFloat:!0,isPot:!0,isMipmap:!1,width:a.size});g="undefined"!==typeof a.classesCount&&a.classesCount?a.classesCount:a.size*a.size;for(var I=0,E=0,T=0;I<g;++I)h.push(E+(a.size-1-T)*a.size),l.push([-1,-1,-1,-1]),++E,
E===a.size&&(E=0,++T);a.normalize&&(d.dc=Y.instance({isFloat:!0,isPot:!0,width:a.size}))},We:function(g){return g.Ye().then(c)},Xe:function(g){g=g.zd();c(g);return l},m:function(){for(var g in d){var I=d[g];I&&I.remove()}K&&(K.m(),K=null)}};a.nb&&P.ff(a.nb);return P}}}(),Xb=function(){return{instance:function(a){var c=Y.instance(a.weights);return{ya:!0,Ya:function(){return 1},m:function(){c.remove()},Ee:function(){return c},V:function(){A.set("s26");c.g(1);U.l(!1,!1)}}}}}(),$b=function(){return{instance:function(a){var c=
a.fromLayerSize,d=Y.instance(a.weights);return{ya:!0,Ya:function(){return c},m:function(){d.remove()},V:function(e){if(e.isEnabled){A.set("s24");e.Oe.g(3);var h,l=Math.min(e.gb.length,e.depth);for(h=0;h<l;++h)e.gb[h].Td(4+h)}else A.set("s23");A.H("u16",a.toLayerSize);d.g(1);U.l(!1,!1)}}}}}(),Yb=function(){return{instance:function(a){for(var c=a.fromLayerSize,d=a.toLayerSize,e=a.toSparsity,h=e*d,l=h/c,m=c/d,p=0,f=0,v=0,B=Array(e*d*e*d*4),q=Array(e*d*e*d*4),n=Array(c*c),x=0;x<n.length;++x)n[x]=0;x=
Math.floor(e/2);for(var y=.5/d,k=.5/c,r=.5/h,H=0;H<d;++H)for(var G=Math.round(H*m),M=0;M<d;++M){var N=Math.round(M*m),F=H/d,J=M/d;F+=y;J+=y;for(var u=0;u<e;++u){var t=G+u-x;0>t&&(t+=c);t>=c&&(t-=c);for(var D=0;D<e;++D){var K=p/h,P=f/h,g=N+D-x;0>g&&(g+=c);g>=c&&(g-=c);var I=t/c,E=g/c;P=1-P-1/h;I+=k;E+=k;K+=r;P+=r;var T=H*e+u,ea=M*e+D;ea=d*e-ea-1;T=ea*d*e+T;B[4*T]=K;B[4*T+1]=P;B[4*T+2]=I;B[4*T+3]=E;E=n[g*c+t]++;T=E%l;I=t*l+T;g=g*l+(E-T)/l;g=c*l-1-g;g=g*c*l+I;q[4*g]=K;q[4*g+1]=P;q[4*g+2]=F;q[4*g+3]=
J;++p>=h&&(p=0,++f);++v}}}n=null;var xa=Y.instance(a.weights);delete a.weights.data;var w=Y.instance({width:h,isFloat:!0,array:new Float32Array(q),isPot:!0});q=null;var ra=Y.instance({width:h,isFloat:!0,array:new Float32Array(B),isPot:!0});B=null;return{ya:!0,Ya:function(){return l},m:function(){w.remove();ra.remove();xa.remove()},V:function(){A.set("s22");xa.g(1);ra.g(2);U.l(!1,!1)}}}}}(),ac=function(){return{instance:function(a){var c=a.kernelsCount,d=a.toSparsity,e=d*a.toLayerSize/a.fromLayerSize,
h=Y.instance(a.weights);return{ya:!0,Ya:function(){return e},xg:function(){return d},Ee:function(){return h},m:function(){h.remove()},V:function(){A.set("s25");A.H("u22",c);A.H("u23",d);A.H("u16",a.toLayerSize);A.H("u24",a.fromLayerSize);h.g(1);U.l(!1,!1)}}}}}(),Zb=function(){return{instance:function(a,c){var d=a.fromLayerSize,e=a.toLayerSize,h=a.toSparsity,l=a.stride?a.stride:1,m=h*e/d,p=e<d,f=d/e,v=Y.instance(a.weights),B="s47"+[d.toString(),e.toString(),h.toString(),l.toString(),c].join("_");A.me(B)||
(a=Rb.qe(c,"gl_FragColor","gl_FragColor"),e=[{type:"1f",name:"u16",value:e},{type:"1f",name:"u29",value:l}],p&&e.push({type:"1f",name:"u24",value:d}),d=[(p?m:h).toFixed(1),a],p&&d.push(f.toFixed(1)),A.$c(p?"s39":"s38",B,d),A.T(B,e.concat([{type:"1i",name:"u14",value:0},{type:"1i",name:"u21",value:1},{type:"1i",name:"u13",value:3}])));return{ya:!1,Ya:function(){return m},m:function(){v.remove()},V:function(){A.set(B);v.g(3);U.l(!1,!1)}}}}}(),Vb=function(){return{instance:function(a){var c=a.qd?a.qd:
3,d=a.ad?a.ad:64,e=a.ud?a.ud:64,h=a.eb?!0:!1;a={isFloat:!1,width:d,isPot:!1,isFlipY:!1};var l=Y.instance(a),m=Y.instance(a),p=Y.instance(a),f=Y.instance(a),v=Y.instance({isFloat:!0,width:e,isPot:!1,isFlipY:!1}),B=1/d;return{process:function(q){A.set("s35");f.u();U.l(h,!1);A.set("s36");for(var n=0;n<c;++n)l.u(),A.oa("u7",B,0),U.l(h,!1),p.u(),f.g(0),U.l(h,!1),m.u(),l.g(0),A.oa("u7",0,B),U.l(h,!1),f.u(),p.g(0),U.l(h,!1),n!==c-1&&m.g(0);A.set("s37");v.u();q.g(0);m.g(1);f.g(2);U.l(h,!1);v.g(0)},Nb:function(){return v}}}}}(),
Wb=function(){return{instance:function(a){function c(v){return Y.instance({isFloat:v,width:d.D,isPot:!1,isFlipY:!1})}var d=Object.assign({Md:.1,Bc:9,D:128,eb:!1},a),e=c(!1),h=[c(!1),c(!1),c(!1)],l=[c(!1),c(!1),c(!1)],m=c(!0),p=[e,l[0],l[1]];a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u31;varying vec2 vv0;void main(){float b=0.,c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u31*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).r,c+=f;}b/=c,gl_FragColor=vec4(b,0.,0.,1.);}".replace("1.1111",
Math.round((d.Bc-1)/2).toFixed(2)).replace("2.2222",(1/d.D).toFixed(6));var f={u1:0};A.zc([{id:"s49",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.,1.,1.);void main(){vec3 b=texture2D(u1,vv0).rgb;float a=dot(b,f);gl_FragColor=vec4(a,a,a,a);}",j:f,i:["u1"],precision:"lowp"},{id:"s50",name:"_",h:a,j:f,i:["u1","u31"],precision:"lowp"},{id:"s51",name:"_",h:"uniform sampler2D u32,u33,u34,u35;const float f=1.1111;const vec3 g=vec3(1.,1.,1.);varying vec2 vv0;void main(){vec3 a=texture2D(u32,vv0).rgb;float c=texture2D(u33,vv0).r,d=texture2D(u34,vv0).r,h=texture2D(u35,vv0).r,i=a.r*a.r;vec3 b=vec3(c,d,h),j=max(g*f,abs(i-b*b)),k=sqrt(j);gl_FragColor=vec4(a.r,(a-b)/k);}".replace("1.1111",
d.Md.toFixed(4)),j:{u32:0,u33:1,u34:2,u35:3},i:["u32","u33","u34","u35"],precision:"highp"}]);return{process:function(){A.set("s49");e.aa();U.l(d.eb,!1);A.set("s50");for(var v=0;3>v;++v)A.oa("u31",1,0),h[v].u(),p[v].g(0),U.l(!1,!1),A.oa("u31",0,1),l[v].u(),h[v].g(0),U.l(!1,!1);A.set("s51");m.u();e.g(0);l[0].g(1);l[1].g(2);l[2].g(3);U.l(!1,!1);m.g(0)},Nb:function(){return m}}}}}(),W={De:function(){return W.Hc()?document.createElement("video"):!1},Ha:function(a,c){a[c]=!0;a.setAttribute(c,"true")},
$d:function(){var a=!1,c=navigator.userAgent||navigator.vendor||window.opera;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(c)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(c.substr(0,
4)))a=!0;return a},Ec:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},re:function(){var a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return a&&a.length&&2<a.length?[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3]||0,10)]:[0,0,0]},ld:function(){try{return window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(a){return window.innerHeight>window.innerWidth}},Zd:function(){return W.Fc()||W.Ec()},Fc:function(){var a=navigator.userAgent.toLowerCase();
return-1!==a.indexOf("safari")&&-1===a.indexOf("chrome")?!0:!1},cg:function(){return W.$d()?W.ld()?window.innerHeight/window.innerWidth*45:45:45},Hc:function(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?!0:!1},pause:function(a){a.pause()},Sg:function(a){a.play()},release:function(a){a.pause();a.videoStream&&a.videoStream.stop();a.videoStream=null},Gc:function(a){if(!a)return a;var c=null;if(a.video){var d=function(e){return e&&"object"===typeof e?Object.assign({},e):e};c={};
"undefined"!==typeof a.video.width&&(c.width=d(a.video.width));"undefined"!==typeof a.video.height&&(c.height=d(a.video.height));"undefined"!==typeof a.video.facingMode&&(c.facingMode=d(a.video.facingMode))}c={audio:a.audio,video:c};"undefined"!==typeof a.deviceId&&W.xc(c,a.deviceId);return c},xc:function(a,c){c&&(a.video=a.video||{},a.video.deviceId={exact:c},a.video.facingMode&&delete a.video.facingMode)},Id:function(a){var c=a.video.width;a.video.width=a.video.height;a.video.height=c;return a},
ce:function(a){function c(n){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(x,y){return Math.abs(x-n)-Math.abs(y-n)})}function d(n){var x=W.Gc(a);n=n(x);h.push(n);e(n)}function e(n){if(n.video&&n.video.facingMode&&n.video.facingMode.exact){var x=n.video.facingMode.exact;n=W.Gc(n);delete n.video.facingMode.exact;n.video.facingMode.ideal=x;h.push(n)}}var h=[];if(!a||!a.video)return h;e(a);if(a.video.width&&a.video.height){if(a.video.width.ideal&&a.video.height.ideal){var l=
c(a.video.width.ideal).slice(0,3),m=c(a.video.height.ideal).slice(0,3),p={},f=0;for(p.ja=void 0;f<l.length;p={ja:p.ja},++f){p.ja=l[f];var v={},B=0;for(v.ia=void 0;B<m.length;v={ia:v.ia},++B)if(v.ia=m[B],p.ja!==a.video.width.ideal||v.ia!==a.video.height.ideal){var q=Math.max(p.ja,v.ia)/Math.min(p.ja,v.ia);q<4/3-.1||q>16/9+.1||d(function(n,x){return function(y){y.video.width.ideal=n.ja;y.video.height.ideal=x.ia;return y}}(p,v))}}}d(function(n){return W.Id(n)})}a.video.width&&a.video.height&&(a.video.width.ideal&&
a.video.height.ideal&&d(function(n){delete n.video.width.ideal;delete n.video.height.ideal;return n}),d(function(n){delete n.video.width;delete n.video.height;return n}));a.video.facingMode&&(d(function(n){delete n.video.facingMode;return n}),a.video.width&&a.video.height&&d(function(n){W.Id(n);delete n.video.facingMode;return n}));h.push({audio:a.audio,video:!0});return h},pf:function(a){if(W.ld()){if(!a||!a.video)return!1;var c=a.video.width,d=a.video.height;if(!c||!d)return!1;if(c.ideal&&d.ideal&&
c.ideal>d.ideal)return a.video.height=c,a.video.width=d,!0}return!1},ib:function(a){a.volume=0;W.Ha(a,"muted");if(W.Fc()){if(1===a.volume){var c=function(){a.volume=0;window.removeEventListener("mousemove",c,!1);window.removeEventListener("touchstart",c,!1)};window.addEventListener("mousemove",c,!1);window.addEventListener("touchstart",c,!1)}setTimeout(function(){a.volume=0;W.Ha(a,"muted")},5)}},Kd:function(a,c,d){return new Promise(function(e,h){if(a.srcObject&&a.srcObject.getVideoTracks){var l=
a.srcObject.getVideoTracks();1!==l.length?h("INVALID_TRACKNUMBER"):(l=l[0],c?W.get(a,e,h,d):(l.stop(),e()))}else h("BAD_IMPLEMENTATION")})},Zc:function(a,c,d,e){function h(m){l||(l=!0,d(m))}var l=!1;return navigator.mediaDevices.getUserMedia(e).then(function(m){function p(){setTimeout(function(){if(a.currentTime){var v=a.videoWidth,B=a.videoHeight;if(0===v||0===B)h("VIDEO_NULLSIZE");else{v&&(a.style.width=v.toString()+"px");B&&(a.style.height=B.toString()+"px");v={Yd:null,kf:null,Pe:null};try{var q=
m.getVideoTracks()[0];q&&(v.Pe=q,v.Yd=q.getCapabilities(),v.kf=q.getSettings())}catch(n){}W.Zd()?a.parentNode&&null!==a.parentNode?(l||c(a,m,v),setTimeout(function(){a.play()},100)):(document.body.appendChild(a),W.ib(a),l||c(a,m,v),setTimeout(function(){a.style.transform="scale(0.0001,0.0001)";a.style.position="fixed";a.style.bottom="0px";a.style.right="0px";W.ib(a);setTimeout(function(){a.play()},100)},80)):l||c(a,m,v)}}else h("VIDEO_NOTSTARTED")},700)}function f(){a.removeEventListener("loadeddata",
f,!1);var v=a.play();W.ib(a);"undefined"===typeof v?p():v.then(function(){p()}).catch(function(){h("VIDEO_PLAYPROMISEREJECTED")})}"undefined"!==typeof a.srcObject?a.srcObject=m:(a.src=window.URL.createObjectURL(m),a.videoStream=m);W.ib(a);a.addEventListener("loadeddata",f,!1)}).catch(function(m){h(m)})},get:function(a,c,d,e){if(!a)return d&&d("VIDEO_NOTPROVIDED"),!1;if(!W.Hc())return d&&d("MEDIASTREAMAPI_NOTFOUND"),!1;if(e&&e.video){if(W.Ec()){var h=W.re();0!==h[0]&&(12>h[0]||12===h[0]&&2>h[1])&&
W.pf(e)}e.video.width&&e.video.width.ideal&&(a.style.width=e.video.width.ideal+"px");e.video.height&&e.video.height.ideal&&(a.style.height=e.video.height.ideal+"px")}W.Ha(a,"autoplay");W.Ha(a,"playsinline");e&&e.audio?a.volume=0:W.Ha(a,"muted");W.Zc(a,c,function(){function l(p){if(0===p.length)d("INVALID_FALLBACKCONSTRAINTS");else{var f=p.shift();W.Zc(a,c,function(){l(p)},f)}}var m=W.ce(e);l(m)},e)},Ce:function(a){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return a(!1,"NOTSUPPORTED"),
!1;navigator.mediaDevices.enumerateDevices().then(function(c){(c=c.filter(function(d){return d.kind&&-1!==d.kind.toLowerCase().indexOf("video")&&d.label&&d.deviceId}))&&c.length&&0<c.length?a(c,!1):a(!1,"NODEVICESFOUND")}).catch(function(){a(!1,"PROMISEREJECTED")})},Gf:function(a,c,d){var e={};e[c]=d;c=[];c.push(e);a.applyConstraints({advanced:c}).catch(function(){})}},qa=function(){var a={n:5,Zb:1,nd:0,Xa:[30,45],Ua:[2,200],k:.7,uf:200,Ue:.05},c=-1,d=null,e=-1,h=-1,l=0,m=-1,p=-1,f=0,v=0,B=a.Ua[1],
q={Xc:function(){switch(c){case -1:return-1;case 0:return p+d.nd;case 1:return f}},gg:function(n){return Math.pow(Math.min(Math.max(m,0),d.n-1)/(d.n-1),n||1)},A:function(n){d=Object.assign({},a,n);m=p=d.Zb;c=0;q.reset()},qf:function(n){n=("undefined"===typeof n?Date.now():n)||0;var x=Math.min(Math.max(n-v,d.Ua[0]),d.Ua[1]);B=x;v=n;var y=-1===e?0:d.k;e=Math.min(Math.max(1E3/x,5),120)*(1-y)+e*y;n-h>d.uf&&5<++l&&(x=d.k,m=m*(1-x)+(e<d.Xa[0]?p-1:e>d.Xa[1]?p+1:p)*x,Math.abs(m-p)>1-d.Ue&&(x=Math.min(Math.max(Math.round(m),
0),d.n-1),x!==p&&(m=p=x,e=(d.Xa[1]-d.Xa[0])/2)),h=n)},jc:function(n){f=n;c=1},tc:function(){c=0;q.reset()},reset:function(){B=a.Ua[1];h=e=-1;l=0},ue:function(){return B}};return q}(),Ma=function(){function a(){d(B+f.Yb)}function c(){y.Oa=0===f.Na?window.requestAnimationFrame(d):window.requestAnimationFrame(e)}function d(G){x.va&&null!==v&&(G-=B,G=Math.min(Math.max(G,f.Jc[0]),f.Jc[1]),B+=G,l(),v(B))}function e(G){x.va&&(y.timeout=window.setTimeout(d.bind(null,G),f.Na))}function h(){v=null;x.va=!1;
l()}function l(){y.Oa&&(window.cancelAnimationFrame(y.Oa),y.Oa=null);y.timeout&&(window.clearTimeout(y.timeout),y.timeout=null)}function m(G){G?(x.wa=!0,n&&qa.tc(),q.port.postMessage("STOP"),ba.Jd(!0),c()):(x.wa=!1,n&&qa.jc(1),ba.Jd(!1),q.port.postMessage("START"))}var p={gd:!0,Jc:[1,200],Yb:50,Na:0},f=null,v=null,B=0,q=null,n=!1,x={ma:!1,wa:!0,Wb:!1,Vb:!1,Tb:!1,va:!1},y={Oa:null,timeout:null},k=m.bind(null,!0),r=m.bind(null,!1),H={A:function(G){f=Object.assign(p,G);Object.assign(x,{wa:!0,ma:!0,va:!1});
if(f.gd){G=!1;try{if("undefined"===typeof SharedWorker){var M=URL.createObjectURL(new Blob(["let handler = null;\n      self.addEventListener('message', function(e){\n        switch (e.data) {\n          case 'START':\n            if (handler === null){\n              handler = setInterval(function(){\n                self.postMessage('tick');\n              }, "+f.Yb.toString()+");\n            }\n            break;\n          case 'STOP':\n            if (handler !== null){\n              clearInterval(handler);\n              handler = null;\n            }\n            break;\n        };\n      }, false);"],
{type:"text/javascript"})),N=new Worker(M);N.addEventListener("message",a);q={xd:N,port:N};x.Wb=!0}else{var F=URL.createObjectURL(new Blob(["let handler = null;\n      onconnect = function(e) {\n        const port = e.ports[0];\n        port.addEventListener('message', function(e) {\n          \n          switch (e.data) {\n            case 'START':\n              if (handler === null){\n                handler = setInterval(function(){\n                  port.postMessage('tick');\n                }, "+
f.Yb.toString()+");\n              }\n              break;\n            case 'STOP':\n              if (handler !== null){\n                clearInterval(handler);\n                handler = null;\n              }\n              break;\n          };\n          \n        });\n        \n        port.start();\n      } // end onconnect()"],{type:"text/javascript"})),J=new SharedWorker(F);J.port.start();J.port.addEventListener("message",a);q={xd:J,port:J.port};x.Vb=!0}G=!0}catch(u){}G&&(window.addEventListener("blur",
r),window.addEventListener("focus",k),x.Tb=!0)}n="undefined"!==typeof qa},m:function(){h();x.Tb&&(window.removeEventListener("blur",r),window.removeEventListener("focus",k),x.Tb=!1);x.Vb?(q.port.close(),x.Vb=!1):x.Wb&&(q.xd.terminate(),x.Wb=!1);Object.assign(x,{wa:!0,ma:!1,va:!1});v=null},Ig:function(){return x.wa},update:function(G){Object.assign(f,G)},af:function(G){x.ma||H.A({});l();x.va=!0;v=G;x.wa&&c()},stop:h};return H}(),wb=function(){var a={sd:4,mb:[1.5,1.5,2],O:[.1,.1,.1],Bd:1,D:-1,M:-1,
mf:2,Te:1,Cd:!0,le:.8},c=null,d=[],e=0,h=[.5,.5,1];return{A:function(l){c=Object.assign({},a,l);d.splice(0);l=c.mb[0]*c.O[0];var m=c.mb[1]*c.O[1],p=1/(1+c.mb[2]*c.O[2]),f=c.Bd*Math.min(c.D,c.M),v=f/c.D;f/=c.M;var B=.5*c.le;B*=B;for(var q=0;q<c.sd;++q){var n=Math.pow(p,q),x=v*n,y=f*n;n=x*l;var k=y*m,r=x/2;y/=2;for(var H=1+(1-r-r)/n,G=1+(1-y-y)/k,M=0;M<G;++M)for(var N=y+M*k,F=N-.5,J=0;J<H;++J){var u=r+J*n,t=u-.5;t*t+F*F>B||d.push([u,N,x*c.Te])}}c.Cd&&d.sort(function(D,K){var P=D[0]-.5;D=D[1]-.5;var g=
K[0]-.5;K=K[1]-.5;return P*P+D*D-(g*g+K*K)})},get:function(){var l=d.length;if(0===l)return h;e>=l&&(e=0);var m=d[Math.floor(e)];e=(e+1/c.mf)%l;return m}}}(),Z={neuralNetworkPath:"NN_DEFAULT.json",ca:0,ub:[2,7],bf:{threshold:1,nScaleLevels:2,scale0Factor:.8,overlapFactors:[2,2,3],scanCenterFirst:!0,nDetectsPerLoop:-1},rf:50,pd:.5,od:.4,Qe:8,lf:{translationFactorRange:[.0015,.005],rotationFactorRange:[.003,.02],qualityFactorRange:[.9,.98],alphaRange:[.05,
1]},Ka:[.65,1,.262],O:[.092,.092,.3],Od:.2,Qd:2,Pd:.1,Re:8,rd:1,oe:Ya.hb.bind(null,.3,.7),xf:20,fe:!0,Gd:3},na={facingMode:"user",idealWidth:800,idealHeight:600,minWidth:480,maxWidth:1920,minHeight:480,maxHeight:1920,rotate:0,flipX:!1},fa={$b:-3,Ne:-1,error:-2,ready:1,play:2,pause:3},ma=fa.$b,z=null,bc={bb:!1,nc:null,element:null,N:null,G:[0,0],K:[.5,.5],v:[.5,0,0,.5],ob:0,Ga:null,ab:!1},O=null,cc={Fa:null,Ra:null,antialias:!0,vc:"./",Aa:null,ea:null,ca:Z.ca,wd:Z.ca,cb:!1,qa:!0},Oa=null,oa=null,va=
null,Pa=1,Na={ic:-1,Cb:-1},aa=null,dc={D:0,M:0,G:[0,0],ua:null},X={za:null,buffer:null,O:null,Ka:null,Y:Z.rd,Ia:null},Sa=null,pa=null,L={o:1,la:0,W:null,hd:!1,md:0,ac:0},hb=[],ib=[],Gb={VERSION:"2.1.2",init:function(a){function c(){ma!==fa.error&&2===++e&&(Ja(),Ab(),Ia(),O.Fa&&(ma=fa.ready,O.Fa(!1,{GL:b,canvasElement:O.ea,videoTexture:z.N.get(),videoTransformMat2:z.v,maxFacesDetected:L.o,videoElement:z.element}),eb()),db())}if(ma!==fa.$b)return a.callbackReady&&a.callbackReady("ALREADY_INITIALIZED"),
!1;ma=fa.Ne;z=Object.assign({},bc);O=Object.assign({},cc);aa=Object.assign({},dc);L.W=[0];X.O=Z.O.slice(0);X.Ka=Z.Ka.slice(0);"undefined"!==typeof a.antialias&&(O.antialias=a.antialias);a.callbackReady&&(O.Fa=a.callbackReady);a.callbackTrack&&(O.Ra=a.callbackTrack);a.nExpressions&&(X.Y=a.nExpressions);a.expressionsEasings&&(X.Ia=a.expressionsEasings);"undefined"!==typeof a.animateDelay&&(O.ca=a.animateDelay);"undefined"!==typeof a.NNCPath&&(O.vc=a.NNCPath);"undefined"!==typeof a.NNC&&(O.Aa=a.NNC);
"undefined"!==typeof a.maxFacesDetected&&(L.o=Math.max(1,a.maxFacesDetected));"undefined"!==typeof a.followZRot&&(O.qa=a.followZRot?!0:!1);if(L.o>Z.Qe)return Ha("MAXFACES_TOOHIGH"),!1;if(!a.canvasId&&!a.canvas)return Ha("NO_CANVASID"),!1;O.ea=a.canvas?a.canvas:document.getElementById(a.canvasId);if(!O.ea)return Ha("INVALID_CANVASID"),!1;aa.D=O.ea.width;aa.M=O.ea.height;if(!aa.D||!aa.M)return Ha("INVALID_CANVASDIMENSIONS"),!1;for(var d=0;d<L.o;++d)hb.push(new Float32Array(Z.Re)),ib.push(0);Ma.A({gd:a.isKeepRunningOnWinFocusLost||
!1,Na:O.ca});qa.A({Zb:0,n:Z.ub[1]-Z.ub[0]+1,nd:Z.ub[0]});oa=Object.create(Z.bf);a.scanSettings&&(Object.assign(oa,a.scanSettings),-1!==oa.nDetectsPerLoop?qa.jc(oa.nDetectsPerLoop):qa.tc());va=Object.create(Z.lf);a.stabilizationSettings&&Object.assign(va,a.stabilizationSettings);var e=0;a.videoSettings&&a.videoSettings.videoElement?Za(a.videoSettings.videoElement,c):(a.videoSettings&&Object.assign(na,a.videoSettings),Cb(a.onWebcamAsk,a.onWebcamGet,function(h){Za(h,c)}));Nb(function(h){if(!Ob())return!1;
Oa=new Hb({gb:h.layers,ec:"gpuRawAvg",bc:Qb});A.zc([{id:"s53",name:"_",pa:"attribute vec2 a0;uniform mat2 u36;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=vec2(.5,.5)+u36*a0;}",Pa:["a0"],Ca:[2],h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1","u36"],precision:"lowp"},{id:"s54",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",pa:"attribute vec2 a0;uniform sampler2D u37;uniform mat2 u36;uniform vec2 u38;uniform float u39,u40,u41;varying vec2 vv0;void main(){vec4 a=texture2D(u37,vec2(.17,u39));vec2 f=a.gb,g=a.a*u38,b=a0;b.x*=u41;float c=cos(u40),d=sin(u40);vec2 h=mat2(c,d,-d,c)*b,i=f+h*.5*g,j=i-.5;vv0=.5+2.*u36*j,gl_Position=vec4(a0,0.,1.);}",
Pa:["a0"],Ca:[2],i:"u1 u37 u38 u39 u40 u41 u36".split(" "),precision:"lowp"},{id:"s55",name:"_",h:"uniform sampler2D u42,u37;uniform vec3 u43,u44;uniform float u45,u46,u39,u47,u40,u48;const vec4 e=vec4(.25,.25,.25,.25);void main(){vec4 d=texture2D(u42,vec2(.625,.625)),f=texture2D(u42,vec2(.875,.625)),a=texture2D(u37,vec2(.17,u39));float g=dot(d-f,e);bool h=g>u46;h?a.r=2.:a.r>u45?a.r=0.:a.r>1.9?a.r+=1.:0.,a.r*=u47;if(a.r<.9)a=vec4(1.,u43);else{a.r*=step(1.9,a.r);float i=dot(e,texture2D(u42,vec2(.875,.875))),j=dot(e,texture2D(u42,vec2(.125,.625))),k=dot(e,texture2D(u42,vec2(.375,.625))),b=cos(u40),c=sin(u40);vec2 l=mat2(b,c*u48,-c/u48,b)*vec2(i,j);a.gba+=vec3(l,k)*u44*a.a;}gl_FragColor=a;}",
pa:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",i:"u42 u37 u43 u45 u44 u47 u40 u48 u46 u39".split(" ")},{id:"s56",name:"_",pa:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",h:"uniform sampler2D u42;const vec4 e=vec4(.25,.25,.25,.25);const vec3 f=vec3(.5,.5,.5);void main(){float a=dot(e,texture2D(u42,vec2(.125,.875))),b=dot(e,texture2D(u42,vec2(.375,.875))),c=dot(e,texture2D(u42,vec2(.625,.875))),d=dot(e,texture2D(u42,vec2(.625,.625)));vec3 g=vec3(a,b,c)*.5+f;gl_FragColor=vec4(g,d);}",
i:["u42"]},{id:"s57",name:"_",pa:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",h:"uniform sampler2D u42;const vec4 e=vec4(.25,.25,.25,.25);void main(){float a=dot(e,texture2D(u42,vec2(.375,.375))),b=dot(e,texture2D(u42,vec2(.625,.375))),c=dot(e,texture2D(u42,vec2(.875,.375))),d=dot(e,texture2D(u42,vec2(.125,.125)));gl_FragColor=vec4(a,b,c,d);}",i:["u42"]},{id:"s52",name:"_",h:"uniform sampler2D u37;uniform vec2 u49;uniform float u50;varying vec2 vv0;void main(){float f=step(.5,mod(gl_FragCoord.y+1.5,2.)),c=step(.33,vv0.x);vec4 a=texture2D(u37,vv0+u49);a.a=mix(a.a*u50,a.a,c);vec4 d=floor(255.*a),g=255.*(255.*a-d),b=mix(d,g,f)/255.;b.x=mix(step(a.x,1.5),b.x,c),gl_FragColor=b;}",
i:["u37","u50","u49"]}]);vb();Mb();kb();jb();c()});return!0},destroy:function(){Ma.m();return new Promise(function(a){Gb.toggle_pause(!0,!0).finally(function(){Oa&&Oa.m();Qa.m();Oa=pa=Sa=null;hb.splice(0);ib.splice(0);aa.ua=null;X.za=null;z.N=null;ma=fa.$b;a()}).catch(function(){})})},toggle_pause:function(a,c){if(!Xa())return Promise.reject("NOT_READY");var d=null;d=z.ab?Promise.resolve():c?W.Kd(z.element,!a,z.Ga):Promise.resolve();a?rb():d.then(function(){db()});return d},update_videoSettings:function(a){rb();
return new Promise(function(c){W.Kd(z.element,!1,z.Ga).then(function(){Object.assign(na,a);Cb(null,null,function(d){Za(d,function(){Ja();Ia();db();c()})})})})},toggle_slow:function(a){Xa()&&ma===fa.play&&(a&&!O.cb?(O.wd=O.ca,oa.nDetectsPerLoop=1,this.set_animateDelay(Z.zf),O.cb=!0):!a&&O.cb&&(oa.nDetectsPerLoop=-1,this.set_animateDelay(O.wd),O.cb=!1))},set_animateDelay:function(a){O.ca=a;Ma.update({Na:O.ca})},resize:function(){if(!Xa())return!1;var a=O.ea.width,c=O.ea.height;if(!lb()&&a===aa.D&&c===
aa.M)return!1;aa.D=a;aa.M=c;A.R();kb();jb();Ja();Ia();return!0},set_inputTexture:function(a,c,d){z.G[0]=c;z.G[1]=d;z.N=Y.instance({width:c,height:d,Pb:a});z.bb=!0;Ja();eb();Ia()},reset_GLState:function(){eb();aa.ua.remove();X.za.remove();vb()},render_video:function(){ta.P();A.set("s53");b.viewport(0,0,aa.D,aa.M);z.N.g(0);U.l(!0,!0)},reset_inputTexture:function(){z.bb=!1;z.N=z.nc;lb();Ja();Ia()},get_videoDevices:function(a){return W.Ce(a)},set_scanSettings:function(a){Object.assign(oa,a);-1!==oa.nDetectsPerLoop?
qa.jc(oa.nDetectsPerLoop):qa.tc();kb();jb()},set_stabilizationSettings:function(a){Object.assign(va,a)},set_videoOrientation:function(a,c){Xa()&&(na.flipX=c,na.rotate=a,Ja(),Ia())},update_videoElement:function(a,c){Za(a?a:z.element,function(){Ab();Ja();Ia();c&&c()})},create_new:function(){return window.JEELIZFACEFILTERGEN()}};return Gb};window.JEELIZFACEFILTER=window.JEELIZFACEFILTERGEN();
;return JEEFACEFILTERAPI||window.JEEFACEFILTERAPI;})();