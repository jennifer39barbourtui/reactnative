 /**
 * Jeeliz Face Filter - https://github.com/jeeliz/jeelizFaceFilter
 *
 * Copyright 2018 Jeeliz ( https://jeeliz.com )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

window['JEEFACEFILTERAPI']=(function(){"use strict";function ja(a,b,e){return a*(1-e)+b*e}function ka(a,b){var e=new XMLHttpRequest;e.open("GET",a,!0);e.withCredentials=!1;e.onreadystatechange=function(){4===e.readyState&&200===e.status&&b(e.responseText)};e.send()}function na(a,b,e){return Math.min(Math.max((e-a)/(b-a),0),1)}
var k=function(){function a(a,b){a=c.createShader(a);c.shaderSource(a,b);c.compileShader(a);return c.getShaderParameter(a,c.COMPILE_STATUS)?a:!1}function b(b,g,d){b=a(c.VERTEX_SHADER,b,d+" VERTEX");g=a(c.FRAGMENT_SHADER,g,d+" FRAGMENT");d=c.createProgram();c.attachShader(d,b);c.attachShader(d,g);c.linkProgram(d);return d}function e(a){void 0===a.ba&&(a.ba="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");void 0===a.la&&(a.la=
["a0"]);void 0===a.ca&&(a.ca=[2]);void 0===a.precision&&(a.precision="highp");void 0===a.v&&(a.v=[]);a.id=u++;void 0!==a.mc&&a.mc.forEach(function(b,g){a.c=a.c.replace(b,a.ob[g])});a.Na=0;a.ca.forEach(function(b){a.Na+=4*b});a.va=b(a.ba,"precision "+a.precision+" float;\n"+a.c,a.name);console.log(a.name);a.m={};a.g.forEach(function(b){a.m[b]=c.getUniformLocation(a.va,b)});a.attributes={};a.da=[];a.la.forEach(function(b){var g=c.getAttribLocation(a.va,b);a.attributes[b]=g;a.da.push(g)});if(a.h){c.useProgram(a.va);
d=a;h=a.id;for(var g in a.h)c.uniform1i(a.m[g],a.h[g])}a.dd=!0}function f(a){qa.rc(Q);h!==a.id&&(Q.R(),h=a.id,d=a,c.useProgram(a.va),a.da.forEach(function(a){0!==a&&c.enableVertexAttribArray(a)}))}var h=-1,d=!1,u=0,g=!1,n=["u0"],m=["u1"],t={u0:0},z={u1:0},w={u0:0,u2:1},B={u3:0},C={u4:0,u5:1},x={s0:{name:"_",c:"uniform sampler2D u0;varying vec2 vv0;void main(){gl_FragColor=texture2D(u0,vv0);}",g:n,h:t},s1:{name:"_",c:"uniform sampler2D u0;varying vec2 vv0;void main(){gl_FragColor=texture2D(u0,vv0);}",
g:n,h:t,precision:"lowp"},s2:{name:"_",c:"uniform sampler2D u0,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u0,vv0);gl_FragColor=a*b;}",g:["u0","u2"],h:w},s3:{name:"_",c:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a.r*f;}",g:n,h:t},s4:{name:"_",c:"uniform sampler2D u0,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u0,vv0);gl_FragColor=a.a*b.r*f;}",
g:["u0","mask"],h:w},s5:{name:"_",c:"uniform sampler2D u0;varying vec2 vv0;void main(){gl_FragColor=texture2D(u0,vec2(1.-vv0.x,vv0.y));}",g:n,h:t},s6:{name:"_",c:"uniform sampler2D u0;varying vec2 vv0;void main(){gl_FragColor=texture2D(u0,vec2(vv0.x,1.-vv0.y));}",g:n,h:t},s7:{name:"_",c:"uniform sampler2D u1;uniform float u6;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*u6;}",g:["u1","u6"],h:z},s8:{name:"_",c:"uniform sampler2D u1;uniform float u6;varying vec2 vv0;const vec4 g=vec4(.25,.25,.25,.25),e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);float b=dot(a*u6,g);gl_FragColor=b*e;}",
g:["u1","u6"],h:z},s9:{name:"_",c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u0,vv0));gl_FragColor=a*e;}",g:n,h:t},s10:{name:"_",c:"uniform sampler2D u0,u7;uniform float u8;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0),b=texture2D(u7,vv0);gl_FragColor=mix(b,a,u8*f);}",g:["u0","u7","u8"],h:{u0:0,u7:1}},s11:{name:"_",c:"uniform sampler2D u0;uniform vec2 u9;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u0,vv0+u9)+texture2D(u0,vv0+u9*vec2(1.,-1.))+texture2D(u0,vv0+u9*vec2(-1.,-1.))+texture2D(u0,vv0+u9*vec2(-1.,1.)));}",
g:["u0","u9"],h:t},s12:{name:"_",c:"uniform sampler2D u0;uniform vec4 u10;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 k(float a){if(a==0.)return vec4(0,0,0,0);float l=a>0.?0.:1.;a=abs(a);float c=floor(log2(a)),m=c+127.,b=(a/exp2(c)-1.)*8388608.,d=m/2.,n=fract(d)*2.,o=floor(d),p=e(b,0.,8.)/255.,q=e(b,8.,16.)/255.,r=(n*128.+e(b,16.,23.))/255.,j=(l*128.+o)/255.;return vec4(p,q,r,j);}void main(){float a=dot(texture2D(u0,vv0),u10);gl_FragColor=k(a);}",
g:["u0","u10"],h:t},s13:{name:"_",c:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",g:m,h:z,v:m,A:!0},s14:{name:"_",c:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=max(e,a);}",g:m,h:z,v:m,A:!0},s15:{name:"_",c:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=mix(exp(-abs(a))-e,a,step(0.,a));}",
g:m,h:z,v:m,A:!0},s16:{name:"_",c:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0),b=exp(-abs(a))-e;gl_FragColor=mix(.1*b,a,step(0.,a));}",g:m,h:z,v:m,A:!0},s17:{name:"_",c:"uniform sampler2D u1,u8,u11;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0),c=texture2D(u8,vv0),d=texture2D(u11,vv0),b=a/d;gl_FragColor=c*mix(exp(-abs(b))-f,b,step(0.,a));}",g:["u1","u8","u11"],h:{u1:0,u8:1,u11:2},v:m,A:!0},s18:{name:"_",
c:"uniform sampler2D u1;const float e=3.141593;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=atan(e*a)/e;gl_FragColor=b;}",g:m,h:z,v:m,A:!0},s19:{name:"_",c:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(.5,.5,.5,.5);void main(){vec4 a=texture2D(u1,vv0),b=log(e+a);gl_FragColor=b;}",g:m,h:z,v:m,A:!0},s20:{name:"_",c:"uniform sampler2D u1;uniform float gain;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=exp(a);}",g:["u1","u12"],h:z,v:m,A:!0},
s21:{name:"_",c:"uniform sampler2D u1,u13;uniform float u14;const vec2 f=vec2(.5,.5);const float g=1e-5;const vec4 h=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u13,f);float b=u14*u14;vec4 c=max(b*a,g*h);gl_FragColor=texture2D(u1,vv0)/c;}",g:["u1","u15","u14"],h:{u1:0,u15:1}},s22:{name:"_",c:"uniform sampler2D u0;uniform vec2 u16;varying vec2 vv0;void main(){float a=u16.x*u16.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u16.y),g=floor(u16.x*fract(b*u16.y)),f=(g*u16.y+d)/a;gl_FragColor=texture2D(u0,f+c/a);}",
g:["u0","u16"],h:t},s23:{name:"_",c:"uniform sampler2D u17,u5,u18;varying vec2 vv0;void main(){vec4 a=texture2D(u18,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u17,b),e=texture2D(u5,c);gl_FragColor=d*e;}",g:["u17","u5","u18"],v:["u17","u5","u18"],h:{u5:0,u17:1,u18:2},A:!0},s24:{name:"_",c:"uniform float u19;uniform sampler2D u17,u5;varying vec2 vv0;void main(){vec2 a=vv0*u19,b=floor(a),c=a-b;vec4 d=texture2D(u17,vv0),f=texture2D(u5,c);gl_FragColor=d*f;}",g:["u5","u17","u19"],v:["u5","u17"],h:{u5:0,u17:1},
A:!0},s25:{name:"_",c:"uniform float u19;uniform sampler2D u17,u5,u20,u21,u22,u23;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 i=vv0*u19,m=floor(i),c=i-m;vec4 n=texture2D(u17,vv0),d=texture2D(u5,c),a=texture2D(u23,vv0);a=a*255.;vec4 o=texture2D(u20,c),p=texture2D(u21,c),q=texture2D(u22,c),j=step(-g,-a),b=e-j,k=b*step(-e-g,-a);b*=e-k;vec4 h=b*step(-2.*e-g,-a);b*=e-h;vec4 l=b;d=j*d+k*o+h*p+l*q,gl_FragColor=n*d;}",g:"u17 u5 u19 u23 u20 u21 u22".split(" "),
h:{u5:0,u17:1,u23:3,u20:4,u21:5,u22:6},A:!0},s26:{name:"_",c:"uniform sampler2D u17,u5,u24;uniform float u19,u25,u26,u27;varying vec2 vv0;const vec2 j=vec2(1.,1.);void main(){vec2 a=floor(u25*vv0),g=u25*vv0-a;float b=u19/u25;vec2 c=floor(g*b),d=g*b-c,h=(a+d)/u25;float l=u25*u27/u19;vec2 m=l*c,i=(m+d*u26)/u27,e=step(i,j);vec4 n=texture2D(u17,h),o=texture2D(u5,i),p=n*o*e.x*e.y,k=texture2D(u24,h);gl_FragColor=p*u26*u26+k;}",g:"u17 u5 u19 u25 u26 u27 u24".split(" "),v:["u17","u5","u24"],h:{u5:0,u17:1,
u24:2},A:!0},s27:{name:"_",c:"uniform sampler2D u17,u5;varying vec2 vv0;void main(){vec4 a=texture2D(u17,vv0),b=texture2D(u5,vv0);gl_FragColor=a*b;}",g:["u17","u5"],v:["u17","u5"],h:{u5:0,u17:1},A:!0},s28:{name:"_",c:"uniform sampler2D u0,u24;uniform float u28;varying vec2 vv0;void main(){gl_FragColor=texture2D(u24,vv0)+u28*texture2D(u0,vv0);}",g:["u0","u24","u28"],v:["u0","u24"],A:!0,h:{u0:0,u24:1}},s29:{name:"_",c:"varying vec2 vv0;uniform sampler2D u0;const vec4 g=vec4(1.,1.,1.,1.),e=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=dot(a,e)*g;}",
g:n,h:t,precision:"lowp"},s30:{name:"_",c:"varying vec2 vv0;uniform sampler2D u0,u2;uniform float u29;const vec4 g=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u0,vec2(vv0.x-u29,vv0.y-u29))*1.,a-=texture2D(u0,vec2(vv0.x-u29,vv0.y))*2.,a-=texture2D(u0,vec2(vv0.x-u29,vv0.y+u29))*1.,a+=texture2D(u0,vec2(vv0.x+u29,vv0.y-u29))*1.,a+=texture2D(u0,vec2(vv0.x+u29,vv0.y))*2.,a+=texture2D(u0,vec2(vv0.x+u29,vv0.y+u29))*1.;vec4 b=vec4(0.);b-=texture2D(u0,vec2(vv0.x-u29,vv0.y-u29))*1.,b-=texture2D(u0,vec2(vv0.x,vv0.y-u29))*2.,b-=texture2D(u0,vec2(vv0.x+u29,vv0.y-u29))*1.,b+=texture2D(u0,vec2(vv0.x-u29,vv0.y+u29))*1.,b+=texture2D(u0,vec2(vv0.x,vv0.y+u29))*2.,b+=texture2D(u0,vec2(vv0.x+u29,vv0.y+u29))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u0,vv0).a),f=texture2D(u2,vv0);gl_FragColor=f.a*e.r*g;}",
g:["u0","u2","u29"],h:w},s31:{name:"_",c:"varying vec2 vv0;uniform sampler2D u0,u2;uniform float u29;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float i=0.;vec2 l=k*u29,b,c;float d,a,g=0.;for(float f=-4.;f<=4.;f+=1.)for(float e=-4.;e<=4.;e+=1.)b=vec2(f,e),d=length(b)/2.,a=exp(-d*d),c=vv0+l*b,a=1.,i+=a*texture2D(u0,c).r,g+=a;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u0,c).r-i/g)*j;}",g:["u0","u2","u29"],h:w},s32:{name:"_",c:"uniform sampler2D u3;uniform vec2 u9;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 h=vec2(.5,.5),i=vec2(1.,0.),j=vec2(0.,1.);void main(){vec2 a=vv0-u9*h;vec4 b=texture2D(u3,a),c=texture2D(u3,a+u9*i),d=texture2D(u3,a+u9*j),k=texture2D(u3,a+u9),l=e(b,c),g=e(d,k);gl_FragColor=e(l,g);}",
g:["u3","u9"],h:B},s33:{name:"_",c:"uniform sampler2D u3;uniform vec2 u9;varying vec2 vv0;const vec2 j=vec2(1.,0.),k=vec2(0.,1.),l=vec2(2.,0.),m=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u3,a),c=texture2D(u3,a+u9*j),d=texture2D(u3,a+u9*k),g=texture2D(u3,a+u9),i=e(b,c),h=e(d,g);return e(i,h);}void main(){vec2 a=vv0+u9*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u9*l),d=f(a+u9*2.),g=f(a+u9*m),i=e(b,c),h=e(d,g);gl_FragColor=e(i,h);}",g:["u3","u9"],h:B},
s34:{name:"_",c:"uniform sampler2D u0;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*a;}",g:["u0"],h:t,precision:"lowp"},s35:{name:"_",c:"uniform sampler2D u0;uniform vec2 u9;varying vec2 vv0;const vec4 g=vec4(1.,1.,1.,1.);const float d=15444.;void main(){vec4 a=1001./d*texture2D(u0,vv0-3.*u9)+2002./d*texture2D(u0,vv0-2.*u9)+3003./d*texture2D(u0,vv0-u9)+3432./d*texture2D(u0,vv0)+3003./d*texture2D(u0,vv0+u9)+2002./d*texture2D(u0,vv0+2.*u9)+1001./d*texture2D(u0,vv0+3.*u9);gl_FragColor=a;}",
g:["u9","u0"],h:t,precision:"lowp"},s36:{name:"_",c:"uniform sampler2D u0,u30,u31;varying vec2 vv0;const vec4 g=vec4(1.,1.,1.,1.);const float h=.1;void main(){vec4 a=texture2D(u30,vv0),b=texture2D(u31,vv0),c=texture2D(u0,vv0),d=max(g*h,b-a*a),f=sqrt(d);gl_FragColor=(c-a)/f;}",g:["u0","u30","u31"],h:{u0:0,u30:1,u31:2},A:!0},s37:{name:"_",c:"uniform sampler2D u17,u32,u33;varying vec2 vv0;void main(){vec4 a=texture2D(u33,vv0);vec2 b=a.rg;vec4 c=texture2D(u17,b);vec2 d=a.ba;vec4 e=texture2D(u32,d);gl_FragColor=c*e;}",
g:["u17","u32","u33"],h:{u32:0,u33:1,u17:2}},s38:{name:"_",c:"uniform sampler2D u17,u32;uniform float u19,u27;varying vec2 vv0;void main(){float d=u19*u27;vec2 b=vv0*u27,c=floor(b),a=b-c;a.y=1.-a.y;vec2 g=floor(a*u19),h=(g*u27+c)/d;vec4 i=texture2D(u17,h),e=texture2D(u32,a);gl_FragColor=i*e;}",g:["u17","u32","u19","u27"],h:{u32:0,u17:1}},s39:{name:"_",c:"uniform sampler2D u17,u32;uniform float u19,u27,u26,u25;varying vec2 vv0;const vec2 e=vec2(1.,1.);void main(){float k=u19*u26/u27,d=u25*u27/u19,l=k/u25,m=u19/u25,n=k/u25;vec2 g=e-vv0,c=floor(u27*g),h=u27*g-c,i=floor(u25*h),j=u25*h-i,q=j*l,r=floor(c/d),s=c-r*d,t=floor(c/d),u=t+n*j,a=(u+i*m)/u19;a=mod(a,e),a=e-a;vec2 v=s-d*q,b=mod(v/u26,e);b=e-b,b+=vec2(1./u19,1./u19),b=mod(b,e);vec2 w=floor(a*u25),f=(w+b)/u25;f=mod(f,e);vec4 x=texture2D(u17,f),o=texture2D(u32,a);gl_FragColor=x*o;}",
g:"u17 u32 u19 u27 u26 u25".split(" "),h:{u32:0,u17:1}},s40:{name:"_",c:"uniform sampler2D u1,u34,u35;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u34,vv0),c=texture2D(u35,vv0);gl_FragColor=a-b;}",g:["u1","u34","u35"],h:{u1:0,u34:1,u35:2}},s41:{name:"_",c:"uniform sampler2D u1,u34,u35;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u34,vv0),c=texture2D(u35,vv0);gl_FragColor=c*(a-b);}",g:["u1","u34","u35"],h:{u1:0,u34:1,u35:2}},
s42:{name:"_",c:"uniform sampler2D u4,u5;uniform float u28;varying vec2 vv0;void main(){vec4 a=u28*texture2D(u4,vv0),b=texture2D(u5,vv0);gl_FragColor=a;}",g:["u4","u5","u28"],h:C},s43:{name:"_",c:"uniform sampler2D u4,u5;uniform float u28;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);vec4 g(vec4 b){vec4 a=exp(-b);return a/((f+a)*(f+a));}void main(){vec4 a=u28*texture2D(u4,vv0),b=texture2D(u5,vv0);gl_FragColor=a*g(b);}",g:["u4","u5","u28"],h:C},s44:{name:"_",c:"uniform sampler2D u4,u5;uniform float u28;varying vec2 vv0;const vec4 g=vec4(0.,0.,0.,0.),i=vec4(1.,1.,1.,1.);const float h=1e-4;vec4 f(vec4 a){return h+step(g,a);}void main(){vec4 a=u28*texture2D(u4,vv0),b=texture2D(u5,vv0);gl_FragColor=a*f(b);}",
g:["u4","u5","u28"],h:C},s45:{name:"_",c:"uniform sampler2D u4,u5;uniform float u28;varying vec2 vv0;const vec4 g=vec4(1.,1.,1.,1.);vec4 f(vec4 a){vec4 b=exp(-abs(a));return mix(b,g,step(0.,a));}void main(){vec4 a=u28*texture2D(u4,vv0),b=texture2D(u5,vv0);gl_FragColor=a*f(b);}",g:["u4","u5","u28"],h:C},s46:{name:"_",c:"uniform sampler2D u4,u5;uniform float u28;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);const float h=3.141593;vec4 g(vec4 b){vec4 a=b*h;return e/(e+a*a);}void main(){vec2 a=vv0;vec4 b=u28*texture2D(u4,a),c=texture2D(u5,a);gl_FragColor=b*g(c);}",
g:["u4","u5","u28"],h:C}},E={},Q={Fa:function(){return g},l:function(){if(!g){for(var a in x)e(x[a],a);k.set("s0");c.enableVertexAttribArray(0);a=va.l();g=!0;return a}},wb:function(a){a.forEach(function(a){Q.vb(a)})},vb:function(a){x[a.id]=a;e(a,a.id)},dc:function(a,b,g){a in E&&(b||(b=a),x[b]=Object.create(E[a]),E[a].ob&&E[a].ob.forEach(function(a,d){x[b].c=x[b].c.replace(new RegExp(a,"g"),g[d])}),e(x[b],b))},nd:function(){},set:function(a){f(x[a])},Qc:function(){return d.Mc},R:function(){-1!==h&&
(h=-1,d.da.forEach(function(a){0!==a&&c.disableVertexAttribArray(a)}))},La:function(){var a=0;d.da.forEach(function(b,g){g=d.ca[g];c.vertexAttribPointer(b,g,c.FLOAT,!1,d.Na,a);a+=4*g})},wa:function(){c.vertexAttribPointer(d.da[0],2,c.FLOAT,!1,8,0)},xd:function(a,b){c.uniform1i(d.m[a],b)},B:function(a,b){c.uniform1f(d.m[a],b)},H:function(a,b,g){c.uniform2f(d.m[a],b,g)},yd:function(a,b){c.uniform2fv(d.m[a],b)},zd:function(a,b){c.uniform3fv(d.m[a],b)},sc:function(a,b,g,h){c.uniform3f(d.m[a],b,g,h)},
qb:function(a,b){c.uniform4fv(d.m[a],b)},Ad:function(a,b){c.uniformMatrix2fv(d.m[a],!1,b)},Bd:function(a,b){c.uniformMatrix3fv(d.m[a],!1,b)},Cd:function(a,b){c.uniformMatrix4fv(d.m[a],!1,b)},P:function(a,b){Q.set(a);b.forEach(function(a){switch(a.type){case "4f":c.uniform4fv(d.m[a.name],a.value);break;case "3f":c.uniform3fv(d.m[a.name],a.value);break;case "2f":c.uniform2fv(d.m[a.name],a.value);break;case "1f":c.uniform1f(d.m[a.name],a.value);break;case "1i":c.uniform1i(d.m[a.name],a.value);break;
case "mat2":c.uniformMatrix2fv(d.m[a.name],!1,a.value);break;case "mat3":c.uniformMatrix3fv(d.m[a.name],!1,a.value);break;case "mat4":c.uniformMatrix4fv(d.m[a.name],!1,a.value)}})}};return Q}(),c,wa=function(){var a=!1,b=!1,e=!1,f=!1,h=!0,d=!1,u={w:function(){return a.width},I:function(){return a.height},Rc:function(){return a},Pc:function(){return c},o:function(){return h},flush:function(){c.flush()},Vb:function(){d||(d=new Uint8Array(a.width*a.height*4));c.readPixels(0,0,a.width,a.height,c.RGBA,
c.UNSIGNED_BYTE,d);return d},Tc:function(){return a.toDataURL("image/jpeg")},Uc:function(){p.F();b||(b=document.createElement("canvas"),e=b.getContext("2d"));b.width=a.width;b.height=a.height;var g=u.Vb(),d=e.createImageData(b.width,b.height),h,f,z=b.width,w=b.height,B=d.data;for(f=0;f<w;++f){var C=w-f-1;for(h=0;h<z;++h){var x=4*(f*z+h);var E=4*(C*z+h);B[x]=g[E];B[x+1]=g[E+1];B[x+2]=g[E+2];B[x+3]=g[E+3]}}e.putImageData(d,0,0);return b.toDataURL("image/png")},Sc:function(g){!b&&g&&(b=document.createElement("canvas"),
e=b.getContext("2d"));var d=g?b:document.createElement("canvas");d.width=a.width;d.height=a.height;(g?e:d.getContext("2d")).drawImage(a,0,0);return d},l:function(b){b.Kb&&!b.fa?a=document.getElementById(b.Kb):b.fa&&(a=b.fa);a||(a=document.createElement("canvas"),document.body.appendChild(a));a.width=b&&void 0!==b.width?b.width:512;a.height=b&&void 0!==b.height?b.height:512;"undefined"===typeof b&&(b={});void 0===b.premultipliedAlpha&&(b.premultipliedAlpha=!1);void 0===b.fb&&(b.fb=!0);void 0===b.antialias&&
(b.antialias=!1);var d={antialias:b.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:b.premultipliedAlpha,stencil:!1,depth:b.fb};(c=a.getContext("webgl2",d))?h=!0:((c=a.getContext("webgl",d))||(c=a.getContext("experimental-webgl",d)),h=!1);if(!c)return!1;(f=c.getExtension("WEBGL_lose_context"))&&a.addEventListener("webglcontextlost",b.ic,!1);if(!q.l()||!q.Gb()&&h)return!1;c.clearColor(0,0,0,0);c.disable(c.DEPTH_TEST);c.disable(c.BLEND);c.disable(c.DITHER);c.disable(c.STENCIL_TEST);c.GENERATE_MIPMAP_HINT&&
c.hint(c.GENERATE_MIPMAP_HINT,c.NICEST);c.disable(c.SAMPLE_ALPHA_TO_COVERAGE);c.disable(c.SAMPLE_COVERAGE);return!0},cc:function(){if(!k.l())return!1;c.depthFunc(c.LEQUAL);c.clearDepth(1);return!0}};return u}(),qa=function(){var a="undefined"===typeof k?JEShaders:k;return{rc:function(b){a!==b&&(a.R(),a=b)},Fa:function(){return a.Fa()},wa:function(){a.wa()},La:function(){a.La()},R:function(){a.R()},set:function(b){a.set(b)}}}(),P=function(){var a,b,e=0,f=-2,h=-2,d=!1,u={reset:function(){h=f=-2},l:function(){d||
(a=c.createBuffer(),c.bindBuffer(c.ARRAY_BUFFER,a),c.bufferData(c.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),c.STATIC_DRAW),b=c.createBuffer(),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,b),c.bufferData(c.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),c.STATIC_DRAW),u.ma(),d=!0)},a:function(a){var b=e++,d=a.Y.length,g=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,g);c.bufferData(c.ARRAY_BUFFER,a.vertices instanceof Float32Array?a.vertices:new Float32Array(a.vertices),c.STATIC_DRAW);f=b;if(a.Y){var u=
c.createBuffer();c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,u);if(65536>a.Y.length){var w=Uint16Array;var B=c.UNSIGNED_SHORT;var C=2}else w=Uint32Array,B=c.UNSIGNED_INT,C=4;c.bufferData(c.ELEMENT_ARRAY_BUFFER,a.Y instanceof w?a.Y:new w(a.Y),c.STATIC_DRAW);h=b}var x={Fb:function(a){f!==b&&(c.bindBuffer(c.ARRAY_BUFFER,g),f=b);a&&qa.La()},Db:function(){h!==b&&(c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,u),h=b)},bind:function(a){x.Fb(a);x.Db()},Jc:function(){c.drawElements(c.TRIANGLES,d,B,0)},Kc:function(a,b){c.drawElements(c.TRIANGLES,
a,B,b*C)},remove:function(){c.deleteBuffer(g);a.Y&&c.deleteBuffer(u);x=null}};return x},ma:function(){-1!==f&&(c.bindBuffer(c.ARRAY_BUFFER,a),f=-1);-1!==h&&(c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,b),h=-1)},f:function(a,b){a&&P.ma();b&&qa.wa();c.drawElements(c.TRIANGLES,3,c.UNSIGNED_SHORT,0)},Ub:function(){c.deleteBuffer(a);c.deleteBuffer(b)}};return u}(),p=function(){var a,b,e,f=!1,h={u:-2,Sb:1};return{l:function(){if(!f){a=c.createFramebuffer();var d=q.o();b=d&&c.DRAW_FRAMEBUFFER?c.DRAW_FRAMEBUFFER:
c.FRAMEBUFFER;e=d&&c.READ_FRAMEBUFFER?c.READ_FRAMEBUFFER:c.FRAMEBUFFER;f=!0}},Xc:function(){return b},Ya:function(){return e},pa:function(){return c.FRAMEBUFFER},Zc:function(){return h},Oc:function(){return a},a:function(d){void 0===d.eb&&(d.eb=!1);var f=d.ja?d.ja:!1,g=d.width,e=void 0!==d.height?d.height:d.width,m=a,t=!1,z=!1,w=0;f&&(g=g?g:f.w(),e=e?e:f.I());var B={Ja:function(){z||(m=c.createFramebuffer(),z=!0,w=h.Sb++)},ub:function(){B.Ja();B.i();t=c.createRenderbuffer();c.bindRenderbuffer(c.RENDERBUFFER,
t);c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,g,e);c.framebufferRenderbuffer(b,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,t);c.clearDepth(1)},bind:function(a,d){w!==h.u&&(c.bindFramebuffer(b,m),h.u=w);f&&f.i();d&&c.viewport(0,0,g,e);a&&c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT)},Bc:function(){w!==h.u&&(c.bindFramebuffer(b,m),h.u=w)},clear:function(){c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT)},Fc:function(){c.clear(c.COLOR_BUFFER_BIT)},Gc:function(){c.clear(c.DEPTH_BUFFER_BIT)},tc:function(){c.viewport(0,
0,g,e)},i:function(){w!==h.u&&(c.bindFramebuffer(b,m),h.u=w)},rtt:function(a){f=a;h.u!==w&&(c.bindFramebuffer(c.FRAMEBUFFER,m),h.u=w);a.i()},F:function(){c.bindFramebuffer(b,null);h.u=-1},resize:function(a,b){g=a;e=b;t&&(c.bindRenderbuffer(c.RENDERBUFFER,t),c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,g,e))},remove:function(){c.bindFramebuffer(b,m);c.framebufferTexture2D(b,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,null,0);t&&c.framebufferRenderbuffer(b,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,null);c.bindFramebuffer(b,
null);c.deleteFramebuffer(m);t&&c.deleteRenderbuffer(t);B=null}};d.eb&&B.ub();return B},F:function(){c.bindFramebuffer(b,null);h.u=-1},wc:function(){c.bindFramebuffer(b,null);c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT);c.viewport(0,0,q.w(),q.I());h.u=-1},reset:function(){h.u=-2},U:function(){0!==h.u&&(c.bindFramebuffer(b,a),h.u=0)},clear:function(){c.viewport(0,0,q.w(),q.I());c.clear(c.COLOR_BUFFER_BIT)}}}(),V=function(){function a(a){c.bindTexture(c.TEXTURE_2D,a)}function b(a){R[0]=a;a=fa[0];
var b=a>>16&32768,H=a>>12&2047,d=a>>23&255;return 103>d?b:142<d?b|31744|((255==d?0:1)&&a&8388607):113>d?(H|=2048,b|(H>>114-d)+(H>>113-d&1)):b=(b|d-112<<10|H>>1)+(H&1)}function e(a){var H=new Uint16Array(a.length);a.forEach(function(a,d){H[d]=b(a)});return H}function f(){if(void 0!==X)return X;if(!qa.Fa()||!w)return!0;var a=U.a({isFloat:!1,D:!0,array:e([1,1,1,1]),width:1});p.F();c.viewport(0,0,1,1);c.clearColor(0,0,0,0);c.clear(c.COLOR_BUFFER_BIT);qa.set("s0");a.Qa(0);P.f(!1,!0);var b=new Uint8Array(4);
c.readPixels(0,0,1,1,c.RGBA,c.UNSIGNED_BYTE,b);X=.9<b[0];a.remove();p.U();return X}var h=0,d,u=0,g,n=!1,m,t,z,w=!1,B=!1,C,x,E,Q=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],K=!1,da=!1,R=new Float32Array(1),fa=new Int32Array(R.buffer),X=void 0,U={l:function(){if(!w){t=[c.RGB,!1,c.RGB,c.RGBA];z=[c.RGB,!1,c.RGB,c.RGBA];d=[c.TEXTURE0,c.TEXTURE1,c.TEXTURE2,c.TEXTURE3,c.TEXTURE4,c.TEXTURE5,c.TEXTURE6,c.TEXTURE7];K="undefined"!==typeof JEContext;da="undefined"!==typeof q;K&&JEContext.ld()&&d.push(c.TEXTURE8,
c.TEXTURE9);g=[-1,-1,-1,-1,-1,-1,-1,-1];m=[c.UNSIGNED_BYTE,c.FLOAT,c.FLOAT];if(!n){for(var a=new Float32Array(16384),b=0;16384>b;++b)a[b]=2*Math.random()-1;n={random:U.a({isFloat:!0,isPot:!0,array:a,width:64}),rb:U.a({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}w=!0}},bc:function(){U.xc()},bd:function(){return n.rb},xc:function(){m[1]=q.qa()},oc:function(){z=t=[c.RGBA,c.RGBA,c.RGBA,c.RGBA]},pd:function(a,b){k.set("s1");p.F();var H=a.w(),d=a.I();c.viewport(0,0,H,d);a.b(0);P.f(!1,
!1);c.readPixels(0,0,H,d,c.RGBA,c.UNSIGNED_BYTE,b)},Tb:function(b,d,g){c.activeTexture(c.TEXTURE0);h=0;var H=c.createTexture();a(H);var f=q.o()&&c.RGBA32F?c.RGBA32F:c.FLOAT;d=d instanceof Float32Array?d:new Float32Array(d);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST);c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,g);c.texImage2D(c.TEXTURE_2D,0,c.RGBA,b.w(),b.I(),0,c.RGBA,f,d);a(null);c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1);p.U();k.set("s0");
b.j();c.clearColor(0,0,0,0);c.clear(c.COLOR_BUFFER_BIT);a(H);P.f(!0,!1);c.deleteTexture(H)},a:function(b){function n(){a(I);F&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,F);b.isPot?(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,b.gb?c.MIRRORED_REPEAT:c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,b.L?c.MIRRORED_REPEAT:c.REPEAT)):(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE));b.sa&&"undefined"!==typeof JESETTINGS&&c.texParameterf(c.TEXTURE_2D,
JEContext.Vc().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.zc);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,b.isLinear?c.LINEAR:c.NEAREST);b.isLinear?c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,b.isMipmap&&!A?c.NEAREST_MIPMAP_LINEAR:c.LINEAR):c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,b.isMipmap&&!A?c.NEAREST_MIPMAP_NEAREST:c.NEAREST);L=t[b.M-1];l=z[b.M-1];v=m[H];if(q.o()){var d=c.RGBA32F;L===c.RGBA&&v===c.FLOAT&&d&&(l=d);L===c.RGB&&v===c.FLOAT&&d&&(l=d,L=c.RGBA)}if(b.D&&!b.isFloat||b.isFloat&&
b.isMipmap&&va.fc())(d=c.RGBA16F)&&(l=d),v=q.qa();b.hb&&4===b.M&&(L=JEContext.$c());b.C?c.texImage2D(c.TEXTURE_2D,0,l,L,v,b.C):b.url?c.texImage2D(c.TEXTURE_2D,0,l,L,v,W):R?(c.texImage2D(c.TEXTURE_2D,0,l,y,r,0,L,v,R),b.isKeepArray||(R=null)):c.texImage2D(c.TEXTURE_2D,0,l,y,r,0,L,v,null);if(b.isMipmap)if(!A&&D)D.V(),Y=!0;else if(A){d=Math.log(Math.min(y,r))/Math.log(2);var f;M=Array(1+d);M[0]=I;for(f=1;f<=d;++f){var e=Math.pow(2,f);var u=y/e;e=r/e;var n=c.createTexture();a(n);c.texParameteri(c.TEXTURE_2D,
c.TEXTURE_MIN_FILTER,c.NEAREST);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST);c.texImage2D(c.TEXTURE_2D,0,l,u,e,0,L,v,null);a(null);M[f]=n}Y=!0}a(null);g[h]=-1;F&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1);ca=!0;N&&D&&(N(D),N=!1)}void 0===b.isFloat&&(b.isFloat=!1);void 0===b.D&&(b.D=!1);void 0===b.isPot&&(b.isPot=!0);void 0===b.isLinear&&(b.isLinear=!1);void 0===b.isMipmap&&(b.isMipmap=!1);void 0===b.Aa&&(b.Aa=!1);void 0===b.sa&&(b.sa=!1);void 0===b.L&&(b.L=!1);void 0===b.gb&&(b.gb=!1);
void 0===b.hb&&(b.hb=!1);void 0===b.M&&(b.M=4);void 0===b.Ea&&(b.Ea=!1);void 0===b.isFlipY&&(b.isFlipY=b.url||b.array?!0:!1);void 0===b.isKeepArray&&(b.isKeepArray=!1);b.data&&(b.array=b.isFloat?new Float32Array(b.data):new Uint8Array(b.data),b.isFlipY=!1);var H=0,w=b.C?!0:!1;b.isFloat&&(b.D=!0);b.D&&(H=1);b.Ea||q.o()||!b.isFloat||!da||q.Sa()||(b.isFloat=!1);b.isFloat&&(H=2);b.sa&&K&&!JEContext.fd()&&(b.sa=!1);var I=c.createTexture(),N=b.Aa,W=null,R=!1,y=0,r=0,ca=!1,X=u++,aa=!1,ba,O,l,L,v,F=b.isFlipY,
A=b.D&&b.isMipmap&&va&&!va.Hb(),M,Y=!1;void 0!==b.width&&b.width&&(y=b.width,r=void 0!==b.height&&b.height?b.height:y);var D={get:function(){return I},w:function(){return y},I:function(){return r},cd:function(){return b.url},gd:function(){return b.isFloat},jd:function(){return b.D},kd:function(){return b.isLinear},V:function(){c.generateMipmap(c.TEXTURE_2D)},Ra:function(b,d){A?(b||(b=D.$a()),D.ya(d),a(M[b]),g[d]=-1):D.b(d)},$a:function(){return Math.log(y)/Math.log(2)},Xa:function(b){if(A){b||(b=
D.$a());k.set("s11");D.ya(0);var d,f=y,e=r;for(d=1;d<=b;++d)f/=2,e/=2,k.H("u9",.25/f,.25/e),c.viewport(0,0,f,e),a(M[d-1]),c.framebufferTexture2D(p.pa(),c.COLOR_ATTACHMENT0,c.TEXTURE_2D,M[d],0),P.f(!1,1===d);g[0]=-1}else D.V()},ya:function(a){a!==h&&(c.activeTexture(d[a]),h=a)},b:function(b){if(!ca)return!1;D.ya(b);if(g[b]===X)return!1;a(I);g[b]=X;return!0},Qa:function(b){c.activeTexture(d[b]);h=b;a(I);g[b]=X},i:function(){c.framebufferTexture2D(p.pa(),c.COLOR_ATTACHMENT0,c.TEXTURE_2D,I,0)},j:function(){c.viewport(0,
0,y,r);c.framebufferTexture2D(p.pa(),c.COLOR_ATTACHMENT0,c.TEXTURE_2D,I,0)},Hd:function(){c.framebufferTexture2D(p.pa(),c.COLOR_ATTACHMENT0,c.TEXTURE_2D,null,0)},resize:function(a,b){y=a;r=b;n()},clone:function(a){a=U.a({width:y,height:r,D:b.D,isFloat:b.isFloat,isLinear:b.isLinear,L:b.L,isFlipY:a?!F:F,isPot:b.isPot});qa.set("s0");p.U();a.i();c.viewport(0,0,y,r);D.b(0);P.f(!0,!0);return a},tc:function(){c.viewport(0,0,y,r)},remove:function(){c.deleteTexture(I);D=null},refresh:function(){D.Qa(0);F&&
c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!0);w?c.texImage2D(c.TEXTURE_2D,0,l,L,c.UNSIGNED_BYTE,b.C):c.texImage2D(c.TEXTURE_2D,0,l,y,r,0,L,v,R);F&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1)},Ta:function(){var a=y*r*4;O=[new Uint8Array(a),new Uint8Array(a),new Uint8Array(a),new Uint8Array(a)];ba=[new Float32Array(O[0].buffer),new Float32Array(O[1].buffer),new Float32Array(O[2].buffer),new Float32Array(O[3].buffer)];aa=!0},lc:function(){aa||D.Ta();O.forEach(function(a,b){c.readPixels(0,r*b,y,r,c.RGBA,c.UNSIGNED_BYTE,
a)});return ba},Va:function(){p.F();k.set("s12");D.b(0);c.viewport(0,0,y,4*r);c.clear(c.COLOR_BUFFER_BIT);for(var a=0;4>a;++a)c.viewport(0,r*a,y,r),k.qb("u10",Q[a]),P.f(!1,0===a)},Id:function(b){a(I);F&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,F);c.texImage2D(c.TEXTURE_2D,0,l,y,r,0,L,v,b);g[h]=X;F&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1)},Jd:function(b,d){a(I);c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,d);c.texImage2D(c.TEXTURE_2D,0,l,L,v,b);g[h]=X;d&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1)},td:function(a,d){var f=
y*r,g=4*f;a=b.D?a?"RGBE":"JSON":"RGBA";d&&(a=d);d=q.o()&&!1;switch(a){case "RGBE":var e="s47";break;case "JSON":e=d?"s0":"s12";break;case "RGBA":case "RGBAARRAY":e="s6"}aa||("RGBA"===a||"RGBE"===a||"RGBAARRAY"===a?(O=new Uint8Array(g),aa=!0):"JSON"!==a||d||D.Ta());p.F();k.set(e);D.b(0);if("RGBA"===a||"RGBE"===a||"RGBAARRAY"===a){c.viewport(0,0,y,r);P.f(!0,!0);c.readPixels(0,0,y,r,c.RGBA,c.UNSIGNED_BYTE,O);if("RGBAARRAY"===a)return{data:O};B||(C=document.createElement("canvas"),x=C.getContext("2d"),
B=!0);C.width=y;C.height=r;E=x.createImageData(y,r);E.data.set(O);x.putImageData(E,0,0);var h=C.toDataURL("image/png")}else if("JSON"===a)if(d)h=new Float32Array(f),c.viewport(0,0,y,r),P.f(!0,!0),c.readPixels(0,0,y,r,c.RGBA,c.FLOAT,h);else{for(h=0;4>h;++h)c.viewport(0,r*h,y,r),k.qb("u10",Q[h]),P.f(!h,!h);O.forEach(function(a,b){c.readPixels(0,r*b,y,r,c.RGBA,c.UNSIGNED_BYTE,a)});h=Array(f);for(e=0;e<f;++e)h[4*e]=ba[0][e],h[4*e+1]=ba[1][e],h[4*e+2]=ba[2][e],h[4*e+3]=ba[3][e]}return{format:a,data:h,
width:y,height:r,isMirrorY:b.L,isFlipY:"RGBA"===a?b.isFlipY:!b.isFlipY}}};b.isMipmap&&!A&&ca&&!Y&&(D.V(),Y=!0);if(b.url)a(I),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,1,1,0,c.RGBA,c.UNSIGNED_BYTE,null),W=new Image,W.Ic="Anonymous",W.crossOrigin="Anonymous",W.src=b.url,W.onload=function(){y=W.width;r=W.height;n()};else if(b.C){var ea=function(){y=void 0!==b.C.videoWidth?b.C.videoWidth:b.C.width;r=void 0!==b.C.videoHeight?b.C.videoHeight:b.C.height;y?n():setTimeout(ea,1)};ea()}else b.array?(b.D&&!b.isFloat?
b.array instanceof Uint16Array?(R=b.array,n()):f()?(R=e(b.array),n()):(n(),U.Tb(D,b.array,F)):(R=b.isFloat?b.array instanceof Float32Array?b.array:new Float32Array(b.array):b.array instanceof Uint8Array?b.array:new Uint8Array(b.array),n()),b.isKeepArray||(R&&R!==b.array&&(R=null),delete b.array)):n();D.Yb=D.w;N&&ca&&(N(D),N=!1);return D},F:function(b){b!==h&&(c.activeTexture(d[b]),h=b);g[b]=-1;a(null)},Cc:function(a){n.random.b(a)},reset:function(){for(var a=0;a<d.length;++a)g[a]=-1;h=-1},rd:function(){h=
-1},Fd:function(){for(var a=0;a<d.length;++a)U.F(a)},Ub:function(){n&&(n.random.remove(),n.rb.remove())},Gd:function(a,b){if("RGBA"===a.format||"RGBE"===a.format){var d=new Image;d.src=a.data;d.onload=function(){U.a({L:a.isMirrorY,isFlipY:a.isFlipY,isFloat:!1,C:d,Aa:function(d){if("RGBA"===a.format)b(d);else{var e=a.width,h=a.height,f=U.a({L:a.isMirrorY,isFloat:!0,width:e,height:h,isFlipY:a.isFlipY});p.U();c.viewport(0,0,e,h);k.set("s48");f.i();d.b(0);P.f(!0,!0);U.F(0);b(f);c.flush();setTimeout(d.remove,
50)}}})}}else"JSON"===a.format?b(U.a({isFloat:!0,isFlipY:a.isFlipY,width:a.width,height:a.height,array:new Float32Array(a.data)})):b(!1)}};return U}(),q=function(){function a(){b="undefined"===typeof wa?JEContext:wa;e=!0}var b,e=!1,f=!1,h=!1,d=!1,u=!1,g=!1,n=!1,m=!1,t=!1,z=!1,w=!1,B=!0,C=!0,x=!0,E,Q,K={l:function(){if(e)return!0;a();K.o()||(K.Wa(),K.oa());K.Qb();K.Rb();p.l();V.l();if(!K.Lb())return!1;P.l();V.bc();return!0},w:function(){e||a();return b.w()},I:function(){e||a();return b.I()},o:function(){e||
a();return b.o()},Qb:function(){w=(z=c.getExtension("EXT_color_buffer_float")||c.getExtension("WEBGL_color_buffer_float")||c.getExtension("OES_color_buffer_float"))?!0:!1;window.GL_EXT_COLORBUFFERFLOAT=z},Rb:function(){c.getExtension("EXT_color_buffer_half_float")||c.getExtension("WEBGL_color_buffer_half_float")||c.getExtension("OES_color_buffer_half_float")},Wa:function(){if(!f){this.o()||(h=c.getExtension("OES_texture_float")||c.getExtension("MOZ_OES_texture_float")||c.getExtension("WEBKIT_OES_texture_float"),
u=(window.GL_EXT_FLOAT=h)?!0:!1);if(u||this.o())d=c.getExtension("OES_texture_float_linear")||c.getExtension("MOZ_OES_texture_float_linear")||c.getExtension("WEBKIT_OES_texture_float_linear"),window.GL_EXT_FLOATLINEAR=d;f=!0}},oa:function(){if(!t){if(!this.o()){if(g=c.getExtension("OES_texture_half_float")||c.getExtension("MOZ_OES_texture_half_float")||c.getExtension("WEBKIT_OES_texture_half_float"))Q=g.HALF_FLOAT_OES,n=!0;window.GL_EXT_HALFFLOAT=g}if(n||this.o())m=c.getExtension("OES_texture_half_float_linear")||
c.getExtension("MOZ_OES_texture_half_float_linear")||c.getExtension("WEBKIT_OES_texture_half_float_linear"),window.GL_EXT_HALFFLOATLINEAR=m;t=!0}},qa:function(){if(K.o())return c.HALF_FLOAT;K.oa();return n?Q:c.FLOAT},Sa:function(){return B},Ec:function(){return C},Dc:function(){return x},Gb:function(){return w},Nb:function(){E=!K.o();if(!E)return C=B=!0;var a=p.a({width:1});a.Ja();var b=V.a({width:1,isFloat:!0,Ea:!0,M:4});a.i();b.i();c.flush();K.oa();if(!n)return!1;b.remove();b=V.a({width:1,isFloat:!1,
D:!0,M:4});b.i();if(c.checkFramebufferStatus(p.Ya())!==c.FRAMEBUFFER_COMPLETE)return!1;B=!1;C=!0;a.remove();b.remove();return!0},Mb:function(){var a=p.a({width:1});a.Ja();var b=V.a({width:1,isFloat:!0,M:3});a.i();b.i();c.flush();c.checkFramebufferStatus(p.Ya())!==c.FRAMEBUFFER_COMPLETE?(V.oc(),x=!1):x=!0;a.remove();b.remove();return!0},Lb:function(){return K.Nb()&&K.Mb()?!0:!1}};return K}(),va=function(){var a=!1,b=[.8,1,.8,1],e=0,f,h=new Uint8Array(4),d=b.concat(b).concat(b).concat(b),u=!0,g={l:function(){function b(){c.generateMipmap(c.TEXTURE_2D);
P.ma();P.f(!1,!0);c.readPixels(0,0,1,1,c.RGBA,c.UNSIGNED_BYTE,h)}q.Wa();q.oa();var g=c.RGBA,t=c.RGBA;if(wa.o()){var z=c.RGBA32F;z&&(g=z);(z=c.RGBA16F)&&(t=z)}P.l();p.reset();p.F();c.viewport(0,0,1,1);k.set("s0");a=!0;f=c.createTexture();c.activeTexture(c.TEXTURE0);c.bindTexture(c.TEXTURE_2D,f);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,
c.NEAREST_MIPMAP_NEAREST);c.texImage2D(c.TEXTURE_2D,0,g,2,2,0,c.RGBA,c.FLOAT,new Float32Array(d));b();if(0!==h[0]){if(!q.Sa())return e=2,!0;e=3;return!0}c.texImage2D(c.TEXTURE_2D,0,t,2,2,0,c.RGBA,q.qa(),new Uint16Array(d));b();if(0!==h[0])return e=2,!0;c.texImage2D(c.TEXTURE_2D,0,t,2,2,0,c.RGBA,c.FLOAT,new Float32Array(d));b();if(0!==h[0])return e=2,!0;u=!1;c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR);c.texImage2D(c.TEXTURE_2D,
0,t,2,2,0,c.RGBA,q.qa(),new Float32Array(d));b();return 0!==h[0]?(e=2,!0):!1},Hb:function(){return u},Yc:function(){return e},hd:function(){a||g.l();return 3===e},fc:function(){a||g.l();return 2===e}};return g}(),ya={a:function(a){var b=V.a(a.alpha),e=V.a(a.beta);return{Ob:function(){b.b(1);e.b(2)}}}},Ca={a:function(a){var b=a.uc;b.index=a.index;b.O=a.O;b.parent=a.parent;switch(b.type){case "input":var e=Aa.a(b);break;case "composite":break;default:e=Ba.a(b)}return e}},Aa={a:function(a){void 0===
a.sift&&(a.sift=!1);void 0===a.DWT&&(a.DWT=!1);void 0===a.blur&&(a.blur=!1);void 0===a.siftOutWidth&&(a.siftOutWidth=!1);void 0===a.filterBank&&(a.filterBank=!1);void 0===a.poolType&&(a.poolType="max");void 0===a.postpreprocessing&&(a.postpreprocessing="copy");void 0===a.density&&(a.density=1);a.filterBank&&(FilterBank.wd(a.poolType,a.postpreprocessing),FilterBank.ud(a.density));var b=!1;if(a.Ga){b=!0;SETTINGS&&void 0!==SETTINGS.Bb&&(a.Ga=SETTINGS.Bb+a.Ga);var e=V.a({isFloat:!1,url:a.Ga})}var f=!1,
h=void 0!==a.preprocessing?a.preprocessing:!1,d=!1;a.sift?Sift.l({ac:c,fa:!1,width:a.size,od:a.siftOutWidth}):a.DWT&&DWT.l({ac:c,fa:!1,width:a.size});switch(h){case "sobel":var u="s30";d=!0;break;case "meanNormalization":u="s31";d=!0;break;case "grayScale":u="s29";d=!1;break;case "copy":u="s0";break;case "inputLightRegulation":u="s29";Da.l({width:a.size,nBlurPass:a.nBlurPass,ec:!1});f=!0;break;default:u="s3"}b&&(u+="Mask");if(a.blur)var g=V.a({isFloat:!1,isPot:!1,width:a.size});var n=V.a({isFloat:!1,
isPot:!1,width:a.size}),m,t,z,w={w:function(){return a.sift?Sift.X():a.filterBank?FilterBank.X():a.size},X:function(){return w.w()},bb:function(){return a.sift?Sift.ha():a.DWT?DWT.ha():a.filterBank?FilterBank.ha():f?Da.ha():n},G:function(){p.U();a.blur&&(g.j(),k.set("s49"),k.H("u9",1/a.size,1/a.size),P.f(!1,!0),g.b(0));k.set(u);d&&k.B("u29",1/a.size);n.j();b&&e.b(1);P.f(!1,!1);n.b(0);f?Da.ua(n):a.sift?(k.R(),Sift.ua()):a.DWT?(k.R(),DWT.ua(4)):a.filterBank&&(k.R(),FilterBank.ua(n))},vd:function(a){m=
a},Ka:function(b){m=b;t="s42";z=V.a({isFloat:!0,isPot:!0,width:a.size})},Ca:function(){return z},K:function(){var a=w.bb(),b=m.Ca();m.Da().K(b);b=m.Da().W();k.set(t);k.B("u28",b*b);a.b(1);z.j();P.f(!1,!1);z.b(0)}};return w}},Ba={a:function(a){void 0===a.disableNormalize&&(a.disableNormalize=!1);var b=[],e=[],f,h,d=!1,u,g=!0,n,m,t=a.isReorganize?a.isReorganize:!1,z=a.kernelSize?!0:!1,w,B,C,x,E,Q,K,da,R=a.Pb?ya.a(a.Pb):!1,fa=R?!0:!1,X={isEnabled:!1},U;if("softmax"===a.type){a.activation="softmax";a.size=
Math.pow(2,Math.ceil(Math.log(Math.sqrt(a.num_classes))/Math.log(2)));a.sparsity=void 0!==a.sparsity?a.sparsity:a.O.X();a.gain=void 0!==a.gain?a.gain:1;k.P("s20",[{type:"1f",name:"u12",value:a.gain}]);var H=V.a({isFloat:!0,isPot:!1,width:a.size}),ha=V.a({isFloat:!0,isPot:!1,width:a.size,isMipmap:!0});g=!1;var Z=new Uint8Array(Math.pow(4*a.size,2)),S;for(S=0;S<a.size*a.size;++S){var I=S<a.num_classes?255:0;Z[4*S]=I;Z[4*S+1]=I;Z[4*S+2]=I;Z[4*S+3]=I}var N=V.a({isFloat:!1,isPot:!1,width:a.size,array:Z})}else a.cost?
(a.sparsity=void 0!==a.sparsity?a.sparsity:a.O.X(),g=!1):"full"===a.connectivityUp&&(a.sparsity=a.O.X());var W={elu:"s15",elu01:"s16",relu:"s14",arctan:"s18",sigmoid:"s13",copy:"s0",softplus:"s19",softmax:"s20",dynPelu:"s17"}[a.activation],ia=a.sparsity*a.sparsity,y=!1,r=a.size;if(a.maxPooling){switch(a.maxPooling.size){case 2:var ca="s32";break;case 4:ca="s33"}y=!0;r/=a.maxPooling.size;var ma=V.a({isFloat:!0,isPot:!1,width:r})}var aa=void 0!==a.ia&&a.ia?!0:!1;if(aa){var ba="s50"+a.index;k.dc("s50",
ba,[((a.ia.n-1)/2).toFixed(1)]);k.P(ba,[{type:"1i",name:"u0",value:0},{type:"2f",name:"u9",value:[1/a.size,1/a.size]},{type:"1f",name:"u8",value:a.ia.alpha},{type:"1f",name:"u11",value:a.ia.beta},{type:"1f",name:"u36",value:a.ia.k}]);var O=V.a({isFloat:!0,isPot:!0,width:a.size});var l=V.a({isFloat:!0,isPot:!0,width:a.size})}Z=a.size*a.sparsity;var L=V.a({isMipmap:!0,isFloat:!0,isPot:!0,width:Z}),v=V.a({isFloat:!0,isPot:!0,width:a.size}),F=Math.log(Z/a.size)/Math.log(2),A;g&&(A=V.a({isFloat:!0,isPot:!1,
width:a.size}));var M=V.a(a.bias),Y,D={w:function(){return a.size},X:function(){return r},ab:function(){return a.num_classes},Eb:function(a){U.b(a)},kc:function(){a.remap&&a.remap.isEnabled&&(X={isEnabled:!0,Ha:V.a({isFloat:!1,isFlipY:!1,array:new Uint8Array(a.remap.Ha.data),width:a.remap.Ha.width,isPot:!1}),layers:a.remap.layers.map(function(b){return a.parent.Xb(b)}),depth:a.remap.depth})},qc:function(){switch(a.connectivityUp){case "gaussian":Y=Ea.a(a.connectivity);break;case "direct":Y=Fa.a(a.connectivity);
break;case "square":Y=Ga.a(a.connectivity);break;case "full":Y=Ha.a(a.connectivity);break;case "conv":m=a.kernelSize,Y=Ia.a(a.connectivity),t&&(n=V.a({width:r,isFloat:!0,sd:!1,isPot:!1}))}},G:function(b,e){U=b;L.j();z&&M.b(2);Y.G(X);L.b(0);L.Xa(F);v.j();z?k.set("s0"):(k.set("s28"),k.B("u28",ia),M.b(1));L.Ra(F,0);P.f(!1,!1);k.set(W);aa?O.i():A.i();v.b(0);fa&&R.Ob();P.f(!1,!1);aa&&(k.set(ba),l.i(),O.b(0),P.f(!1,!1),k.set("s51"),k.B("u8",1),A.i(),l.b(1),P.f(!1,!1));if(g)return y?(ma.j(),A.b(0),k.set(ca),
k.H("u9",1/a.size,1/a.size),P.f(!1,!1),e=ma):e=A,e.b(0),t&&(n.i(),k.set("s22"),k.H("u16",m,r/m),P.f(!1,!1),e=n,n.b(0)),Q=e;if("softmax"===a.type)return k.set("s20"),A.b(0),H.i(),P.f(!1,!1),a.disableNormalize?b=H:(k.set("s2"),H.b(0),N.b(1),ha.i(),P.f(!1,!1),k.set("s0"),h.j(),ha.b(0),ha.Xa(!1),P.f(!1,!1),k.set("s21"),f.j(),ha.Ra(!1,0),k.B("u14",A.Yb()),h.b(1),P.f(!1,!1),b=f),e?e=D.lb(b):!1;if(a.cost){k.set("gpuRawAvg"===d?"s8":"s7");e=A;a.disableNormalize||(k.B("u6",1/a.size),f.j(),A.b(0),P.f(!1,!1),
e=f);Q=e;switch(d){case "cpuRGBA2Float":e.Va();e=D.lb(e);u(e);break;case "gpuRawAvg":case "gpuRaw":e.b(0),u(e)}return!1}},Jb:function(g){g&&void 0!==g.kb&&(d=g.kb,u=g.jc);A=V.a({isFloat:!0,isPot:!0,isMipmap:"softmax"===a.type,width:a.size});"softmax"===a.type&&(h=V.a({isFloat:!0,isPot:!0,width:1}));var l=0,n=0,m=void 0!==a.num_classes?a.num_classes:a.size*a.size;for(g=0;g<m;++g)b.push(l+(a.size-1-n)*a.size),e.push([-1,-1,-1,-1]),++l,l===a.size&&(l=0,++n);a.disableNormalize||(f=V.a({isFloat:!0,isPot:!0,
width:a.size}))},lb:function(a){a.Va();var d=a.lc();b.forEach(function(a,b){e[b][0]=d[0][a];e[b][1]=d[1][a];e[b][2]=d[2][a];e[b][3]=d[3][a]});return e},Ka:function(b){E=b;da={Dd:"s43",qd:"s44",Hc:"s42",Lc:"s45",Ac:"s46"}[a.activation];b={isFloat:!0,isPot:!0,width:a.size};K=V.a(b);B=V.a(b);y&&V.a(b);t&&(C=V.a(b));g||(x=V.a({isFloat:!0,isPot:!1,width:a.size}))},Ca:function(){return w},K:function(b){if(!g){x.j();k.set("quadratic"===a.cost?"s41":"s40");b.b(1);Q.b(0);P.f(!1,!1);x.b(0);var d=1}b=v;g&&(d=
E.Ca(),t&&(K.j(),k.set("s22"),v.b(0),k.H("u16",m,r/m),P.f(!1,!1),b=K,d.b(0)),E.Da().K(d),d=E.Da().W());k.set(da);k.B("u28",d*d);b.b(1);B.j();P.f(!1,!1);w=B;t&&(k.set("s22"),C.j(),B.b(0),k.H("u16",r/m,m),P.f(!1,!1),w=C);w.b(0)}};a.O&&D.qc(a.O);return D}};
function Ja(){var a={ed:!1},b,e,f;a||(a={});this.Xb=function(a){return b[a]};this.nc=function(a){var d=!1;b=a.map(function(a,b){return d=a=Ca.a({index:b,parent:this,uc:a,O:d})});e=b[0];f=b[b.length-1];b.forEach(function(a,b){0!==b&&a.kc()})};this.G=function(a,d){var e=d;b.forEach(function(b){e=b.G(e,a)});return e};this.Ka=function(){var a;for(a=b.length-1;0<=a;--a){var d=a!==b.length-1?b[a+1]:!1;b[a].Ka(d)}};this.K=function(a){var d;for(d=b.length-1;0<=d;--d)b[d].K(a)};this.Za=function(){return e.w()};
this.ha=function(){return f.bb()};this.pc=function(a){f.Jb(a)};this.ab=function(){return f.ab()}}
var Fa={a:function(a){var b=V.a(a.weights);delete a.weights.data;return{W:function(){return 1},ra:function(){return b},G:function(){k.set("s27");b.b(1);P.f(!1,!1)}}}},Ha={a:function(a){var b=a.fromLayerSize*a.toLayerSize,e=a.fromLayerSize,f=V.a({isFloat:!0,isPot:!0,width:b,isFlipY:!1,array:new Float32Array(a.weights.data)});delete a.weights.data;var h=V.a({isFloat:!0,isPot:!0,width:b,isMipmap:!0}),d=V.a({isFloat:!0,isPot:!0,width:a.fromLayerSize});return{W:function(){return e},ra:function(){return f},
Wc:function(){return _fboWeights},G:function(b){if(b.isEnabled){k.set("s25");b.Ha.b(3);var d,e=Math.min(b.layers.length,b.depth);for(d=0;d<e;++d)b.layers[d].Eb(4+d)}else k.set("s24");k.B("u19",a.toLayerSize);f.b(1);P.f(!1,!1)},K:function(){k.set("s38");k.B("u19",a.toLayerSize);k.B("u27",a.fromLayerSize);h.j();f.b(1);P.f(!1,!1);d.j();k.set("s0");h.b(0);h.V();P.f(!1,!1);d.b(0)}}}},Ea={a:function(a){var b=a.toSparsity*a.toLayerSize,e=b/a.fromLayerSize,f=V.a(a.weights);delete a.weights.data;var h=V.a({isFloat:!0,
isPot:!0,width:b,array:new Float32Array(a.Ld)}),d=V.a({width:b,isFloat:!0,array:new Float32Array(a.Nc),isPot:!0}),u=V.a({width:b,isFloat:!0,array:new Float32Array(a.Ed),isPot:!0});return{W:function(){return e},ra:function(){return f},Wb:function(){return d},Zb:function(){return u},$b:function(){return h},G:function(){k.set("s23");f.b(1);u.b(2);P.f(!1,!0)}}}},Ga={a:function(a){var b=a.fromLayerSize,e=a.toLayerSize,f=a.toSparsity*e,h=f/b,d=a.toSparsity,u=b/e,g,n,m,t,z=0,w=0,B=0,C=Array(d*e*d*e*4),x=
Array(d*e*d*e*4),E=Array(d*e*d*e*4),Q=Array(b*b);for(g=0;g<Q.length;++g)Q[g]=0;var K=Math.floor(d/2),da=.5/e,R=.5/b,fa=.5/f;for(g=0;g<e;++g)for(n=0;n<e;++n){var X=Math.round(g*u);var U=Math.round(n*u);var H=g/e;var ha=n/e;H+=da;ha+=da;for(m=0;m<d;++m)for(t=0;t<d;++t){var Z=z/f;var S=w/f;var I=X+m-K;var N=U+t-K;0>I&&(I+=b);0>N&&(N+=b);I>=b&&(I-=b);N>=b&&(N-=b);var W=I/b;var ia=N/b;S=1-S-1/f;W+=R;ia+=R;Z+=fa;S+=fa;C[4*B]=W;C[4*B+1]=ia;C[4*B+2]=H;C[4*B+3]=ha;var y=g*d+m,r=n*d+t;r=e*d-r-1;y=r*e*d+y;x[4*
y]=Z;x[4*y+1]=S;x[4*y+2]=W;x[4*y+3]=ia;W=Q[N*b+I]++;ia=W%h;I=I*h+ia;N=N*h+(W-ia)/h;N=b*h-1-N;N=N*b*h+I;E[4*N]=Z;E[4*N+1]=S;E[4*N+2]=H;E[4*N+3]=ha;++z>=f&&(z=0,++w);++B}}var ca=V.a({isFloat:!0,isPot:!0,width:f,isFlipY:!1,array:new Float32Array(a.weights.data)});delete a.weights.data;var ma=V.a({isFloat:!0,isPot:!0,width:f,array:new Float32Array(C)}),aa=V.a({width:f,isFloat:!0,array:new Float32Array(E),isPot:!0});E=null;var ba=V.a({width:f,isFloat:!0,array:new Float32Array(x),isPot:!0});x=null;var O=
V.a({isFloat:!0,isPot:!0,width:f,isMipmap:!0}),l=V.a({isFloat:!0,isPot:!0,width:f/h});return{W:function(){return h},ra:function(){return ca},Wb:function(){return aa},Zb:function(){return ba},$b:function(){return ma},G:function(){k.set("s23");ca.b(1);ba.b(2);P.f(!1,!1)},K:function(){k.set("s37");O.j();aa.b(1);ca.b(2);P.f(!1,!1);k.set("s0");l.j();O.b(0);O.V();P.f(!1,!1);l.b(0)}}}},Ia={a:function(a){function b(){k.B("u25",e);k.B("u26",f);k.B("u19",a.toLayerSize);k.B("u27",a.fromLayerSize)}var e=a.kernelSize,
f=a.toSparsity,h=f*a.toLayerSize,d=h/a.fromLayerSize,u=V.a(a.weights),g=V.a({isFloat:!0,isPot:!0,width:h,isMipmap:!0}),n=V.a({isFloat:!0,isPot:!0,width:a.fromLayerSize});return{W:function(){return d},ad:function(){return f},ra:function(){return u},G:function(){k.set("s26");b();u.b(1);P.f(!1,!1)},K:function(){k.set("s39");b();g.j();u.b(1);P.f(!1,!1);k.set("s0");n.j();g.b(0);g.V();P.f(!1,!1);n.b(0)}}}},Da=function(){var a,b,e,f,h,d,u,g,n;return{l:function(m){a=m.nBlurPass?m.nBlurPass:3;b=m.width?m.width:
64;f=m.ec?!0:!1;f=!0;m={isFloat:!1,width:b,isPot:!1,isFlipY:!1};h=V.a(m);d=V.a(m);u=V.a(m);g=V.a(m);n=V.a({isFloat:!0,width:b,isPot:!1,isFlipY:!1});e=1/b},ua:function(b){k.set("s35");for(var m=0;m<a;++m)h.i(),k.H("u9",e,0),P.f(f,!1),d.i(),h.b(0),k.H("u9",0,e),P.f(f,!1),d.b(0);k.set("s34");g.i();b.b(0);P.f(f);k.set("s35");for(m=0;m<a;++m)u.i(),g.b(0),k.H("u9",e,0),P.f(f,!1),g.i(),u.b(0),k.H("u9",0,e),P.f(f,!1);k.set("s36");n.i();b.b(0);d.b(1);g.b(2);P.f(f,!1);n.b(0)},ha:function(){return n}}}();
function Ka(){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)return!1;var a=document.createElement("video");a.autoplay=!0;return a}
function La(){var a=!1,b=navigator.userAgent||navigator.vendor||window.opera;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(b)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(b.substr(0,
4)))a=!0;return a}function Ma(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}function Na(){var a=navigator.userAgent.toLowerCase();return-1==a.indexOf("safari")||-1<a.indexOf("chrome")?!1:!0}
function Oa(a,b,e,f){if(a)if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){var h=f&&f.audio;f&&f.video&&f.video.width&&f.video.width.ideal&&(a.style.width=f.video.width.ideal+"px");f&&f.video&&f.video.height&&f.video.height.ideal&&(a.style.height=f.video.height.ideal+"px");a.setAttribute("autoplay","");h?a.volume=0:a.setAttribute("muted","");a.setAttribute("playsinline","");Ma()&&(f.video.width&&delete f.video.width,f.video.height&&delete f.video.height);La()&&!Ma()&&(f.video.width&&
f.video.width.ideal&&delete f.video.width.ideal,f.video.height&&f.video.height.ideal&&delete f.video.height.ideal);(function(d){return navigator.mediaDevices.getUserMedia(d).then(function(d){function e(){a.play();b(a,d)}Ma()||a.addEventListener("loadeddata",e,!1);"undefined"!==typeof a.srcObject?a.srcObject=d:(a.src=window.URL.createObjectURL(d),a.Kd=d);if(Na()&&(a.volume=0,1===a.volume)){var f=function(){a.volume=0;window.removeEventListener("mousemove",f,!1);window.removeEventListener("touchstart",
f,!1)};window.addEventListener("mousemove",f,!1);window.addEventListener("touchstart",f,!1)}Ma()&&e()}).catch(function(a){e(a)})})(f)}else e&&e();else e&&e()}
window.JEEFACEFILTERAPI=function(){var a,b,e,f,h,d,u,g,n,m,t,z,w,B,C,x,E,Q,K,da,R,fa,X,U,H;function ha(a){if(F!==v.pause){var b=F===v.play?l.zb:l.Ab;ua=setTimeout(I.bind(null,a),b)}}function Z(){if(-1!==[v.play,v.N].indexOf(F))return!1;F=v.play;J.timestamp=Date.now();oa&&window.cancelAnimationFrame(oa);I(0)}function S(a,b,d,e){a=4*a+b;return d+(ta[a]/255+ta[a+8]/65025)*(e-d)}function I(){if(F!==v.pause){P.reset();P.ma();c.disable(c.DEPTH_TEST);p.U();k.wa();var G=A.element.currentTime-A.ta;0>G&&(A.ta=
A.element.currentTime);1E3*G<l.yc||(A.ja.refresh(),A.ta+=G,k.set("s53"),A.xa.j(),A.ja.b(0),P.f(!1,!1));for(G=0;G<J.Z;++G)za=G===J.Z-1,k.set("s54"),ra.j(),A.xa.b(0),sa.b(1),P.f(!1,!1),ra.b(0),Y.G(!1,ra);G=Date.now();J.ga_=G-J.timestamp;var r=l.za;J.timestamp=G;J.ib=J.hc/J.ga_;J.Ia=J.ib*r+J.Ia*(1-r);J.jb=1E3/J.ga_;J.$=J.jb*l.za+J.$*(1-l.za);J.$>l.T[1]?(J.Z=Math.min(J.Z+1,l.ka[1]),J.$=(l.T[0]+l.T[1])/2):J.$<l.T[0]&&(J.Z=Math.max(J.Z-1,l.ka[0]),J.$=(l.T[0]+l.T[1])/2);J.Ib=l.Cb/Math.max(J.Ia,.001);p.F();
c.viewport(0,0,2,2);k.set("s52");P.f(!1,!1);c.readPixels(0,0,2,2,c.RGBA,c.UNSIGNED_BYTE,ta);u=S(0,1,-1,1);g=S(0,2,-1,1);n=S(0,3,0,1);m=S(1,0,-l.aa[0],l.aa[0]);t=S(1,1,-l.aa[1],l.aa[1]);z=S(1,2,-l.aa[2],l.aa[2]);w=S(1,3,0,1);a=u-T.x;b=g-T.y;e=n-T.s;f=m-T.rx;h=t-T.ry;d=z-T.rz;G=Math.sqrt(a*a+b*b+e*e)/J.ga_;r=Math.sqrt(f*f+h*h+d*d)/J.ga_;G=1-na(l.Ua[0],l.Ua[1],G);r=1-na(l.nb[0],l.nb[1],r);G=ja(l.Pa[0],l.Pa[1],1-Math.pow(G*r*na(l.mb[0],l.mb[1],w),l.yb));T.x=ja(T.x,u,G);T.y=ja(T.y,g,G);T.s=ja(T.s,n,G);T.rx=
ja(T.rx,m,G);T.ry=ja(T.ry,t,G);T.rz=ja(T.rz,z,G);T.detected=ja(T.detected,w,l.xb);p.wc();p.reset();V.reset();c.enable(c.DEPTH_TEST);M.Ba&&M.Ba(T);c.disable(c.BLEND);if(F===v.play||F===v.N)oa=window.requestAnimationFrame(ha)}}function N(){k.P("s54",[{type:"1i",name:"u0",value:0},{type:"1i",name:"u39",value:1},{type:"2f",name:"u40",value:pa}]);k.P("s55",[{type:"1i",name:"u41",value:0},{type:"1i",name:"u39",value:1},{type:"1f",name:"u44",value:l.minScaleTracked},{type:"1f",name:"u45",value:l.maxScaleTracked},
{type:"1f",name:"u46",value:l.vc},{type:"1f",name:"u47",value:l.tb},{type:"1f",name:"u48",value:l.sb},{type:"3f",name:"u43",value:[l.Ma[0]*pa[0],l.Ma[1]*pa[1],l.Ma[2]]}]);k.P("s56",[{type:"1i",name:"u41",value:0},{type:"1i",name:"u39",value:1}]);k.P("s52",[{type:"1i",name:"u39",value:0},{type:"1f",name:"u49",value:pa[0]}])}function W(){var a=Y.Za(),b=ea/a;E=l.minScale*b;Q=l.maxScale*b;K=(1-2*l.borderWidth)/l.nStepsX;da=(1-2*l.borderHeight)/l.nStepsY;R=(Q-E)/l.nStepsScale;fa=l.borderWidth;X=l.borderHeight;
U=1-l.borderWidth;H=1-l.borderHeight;pa=[a/ea,a/la];B=0;C=l.borderWidth;x=l.borderHeight;D=E}function ia(a){ka(M.Oa+l.save,function(b){b=JSON.parse(b);a(b)})}function y(){if(wa.l({fa:M.J,width:ea,height:la,debug:!1,ic:function(){O("GLCONTEXT_LOST")},antialias:!0,premultipliedAlpha:!0})){if(wa.cc())return!0;O("GL_INCOMPATIBLE");return!1}O("GL_INCOMPATIBLE");return!1}function r(){sa.i();c.viewport(0,0,1,1);k.set("s55");xa.b(1);k.sc("u42",C,x,D);P.f(!1,!1);za&&(c.viewport(1,0,1,1),k.set("s56"),P.f(!1,
!1));1!==++B%2&&(D+=R,D>Q&&(C+=K,D=E,C>U&&(C=fa,x+=da,x>H&&(x=X))));k.set("s0");xa.j();sa.b(0);P.f(!1,!1)}function ca(){k.P("s53",[{type:"1i",name:"u0",value:0},{type:"2f",name:"u37",value:A.S}])}function ma(){A.S[0]=.5;A.S[1]=.5;var a=A.na[1]/A.na[0],b=wa.I()/wa.w();a>b?A.S[1]*=b/a:A.S[0]*=a/b}function aa(a,b){if(F===v.error)return!1;if(0===a.currentTime){var d=a.play();void 0!==d&&d.then(function(){}).catch(function(){});setTimeout(aa.bind(null,a,b),L.pb);return!1}d=a.videoWidth;var e=a.videoHeight;
if(0===d||0===e)return setTimeout(aa.bind(null,a,b),L.pb),!1;A.na[0]=d;A.na[1]=e;A.element=a;b&&b();return!0}function ba(a,b,d){a&&a();a={facingMode:{ideal:"user"},width:{min:L.minWidth,max:L.maxWidth,ideal:L.idealWidth},height:{min:L.minHeight,max:L.maxHeight,ideal:L.idealHeight}};Oa(Ka(),function(a){b&&b(a);d(a)},function(){O("WEBCAM_UNAVAILABLE")},{video:a,audio:!1})}function O(a){F!==v.error&&(F=v.error,M.ea&&M.ea(a))}var l={save:"NNC.json",zb:0,Ab:25,za:.2,T:[45,
60],Cb:1/3.5,ka:[2,5],minScale:.2,maxScale:.75,borderWidth:.4,borderHeight:.35,nStepsX:5,nStepsY:4,nStepsScale:3,Ma:[.088,.088,.25],vc:55,minScaleTracked:.6,maxScaleTracked:5.8,tb:.7,sb:1,Ua:[.003,.01],nb:[.01,.1],mb:[.6,.7],aa:[.65,1.1,.262],Pa:[.03,1],xb:.2,yb:4,yc:20},L={idealWidth:800,idealHeight:600,minWidth:400,maxWidth:1280,minHeight:480,maxHeight:1280,pb:100},v={gc:-1,error:-2,cb:0,play:1,pause:2,N:3},F=v.cb,A={element:!1,ja:!1,xa:!1,na:[0,0],S:[.5,.5],ta:0},M={ea:!1,Ba:!1,Oa:"./",J:!1},Y;
var D=x=C=B=Q=E=H=U=X=fa=R=da=K=0;var ea,la,pa,ra,sa,xa,ta,T,ua=!1,oa=!1,za=!1,J={ga_:0,timestamp:0,ib:0,Ia:0,Z:l.ka[0],hc:l.ka[0],jb:0,$:0,Ib:1};return{init:function(G){function x(){F!==v.error&&2===++B&&(ma(),A.ja=V.a({C:A.element,isPot:!1,isFloat:!1,isFlipY:!0}),ca(),M.ea&&(M.ea(!1,{GL:c,canvasElement:M.J,videoTexture:A.xa.get()}),c.disable(c.BLEND)),Z())}if(F!==v.cb)return G.callbackReady&&G.callbackReady("ALREADY_INITIALIZED"),!1;F=v.gc;G.callbackReady&&(M.ea=G.callbackReady);G.callbackTrack&&
(M.Ba=G.callbackTrack);"undefined"!==typeof G.NNCpath&&(M.Oa=G.NNCpath);if(!G.canvasId)return O("NO_CANVASID"),!1;M.J=document.getElementById(G.canvasId);if(!M.J)return O("INVALID_CANVASID"),!1;ea=M.J.width;la=M.J.height;if(!ea||!la)return O("INVALID_CANVASDIMENSIONS"),!1;var B=0;ba(G.onWebcamAsk,G.onWebcamGet,function(a){aa(a,x)});ia(function(v){if(!y())return!1;Y=new Ja;Y.nc(v.layers);Y.pc({kb:"gpuRawAvg",jc:r});k.wb([{id:"s53",name:"_",ba:"attribute vec2 a0;uniform vec2 u37;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=vec2(.5,.5)+u37*a0;}",
la:["a0"],ca:[2],c:"uniform sampler2D u0;varying vec2 vv0;void main(){gl_FragColor=texture2D(u0,vv0);}",g:["u0","u37"],precision:"lowp"},{id:"s54",name:"_",c:"uniform sampler2D u0;varying vec2 vv0;void main(){gl_FragColor=texture2D(u0,vv0);}",ba:"attribute vec2 a0;uniform sampler2D u39;uniform vec2 u40;varying vec2 vv0;void main(){vec4 a=texture2D(u39,vec2(.25,.5));vec2 b=a.gb,c=a.a*u40;vv0=b+a0*.5*c,gl_Position=vec4(a0,0.,1.);}",la:["a0"],ca:[2],g:["u0","u39","u40"],precision:"lowp"},{id:"s55",name:"_",
c:"uniform sampler2D u41,u39;uniform vec3 u42,u43;uniform float u44,u45,u46,u47,u48;const vec4 k=vec4(1.,1.,1.,1.),l=vec4(0.,0.,0.,0.),e=vec4(.25,.25,.25,.25);void main(){vec4 c=texture2D(u41,vec2(.5,.5)),d=texture2D(u41,vec2(.75,.5));float g=dot(e,texture2D(u41,vec2(.75,.75))),h=dot(e,texture2D(u41,vec2(0.,.5))),i=dot(e,texture2D(u41,vec2(.25,.5)));vec4 a=texture2D(u39,vec2(.25,.5));float b=dot(c,e),j=dot(d,e);bool f=b>u47&&b>j+u48;f?a.r=2.:a.r>u46?a.r=0.:a.r>1.9&&(a.a>u45||a.a<u44)?a.r=0.:a.r>1.9?a.r+=1.:0.;if(a.r<.9)a=vec4(1.,u42);else a.r*=step(1.9,a.r),a.gba+=vec3(g,h,i)*u43*a.a;gl_FragColor=a;}",
ba:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"u41 u39 u42 u44 u45 u46 u43 u47 u48".split(" ")},{id:"s56",name:"_",ba:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",c:"uniform sampler2D u41;const vec4 e=vec4(.25,.25,.25,.25);const vec3 g=vec3(.5,.5,.5);void main(){float a=dot(e,texture2D(u41,vec2(0.,.75))),b=dot(e,texture2D(u41,vec2(.25,.75))),c=dot(e,texture2D(u41,vec2(.5,.75))),d=dot(e,texture2D(u41,vec2(.5,.5)));vec3 f=vec3(a,b,c)*.5+g;gl_FragColor=vec4(f,d);}",
g:["u41","u39"]},{id:"s52",name:"_",c:"uniform sampler2D u39;uniform float u49;varying vec2 vv0;void main(){float g=step(.5,vv0.y),c=step(.5,vv0.x);vec4 a=texture2D(u39,vec2(vv0.x,.5));a.a=mix(a.a*u49,a.a,c);vec4 d=floor(255.*a),f=255.*(255.*a-d),b=mix(d,f,g)/255.;b.x=mix(step(a.x,1.5),b.x,c),gl_FragColor=b;}",g:["u39","u49"]}]);A.xa=V.a({isPot:!1,md:!0,isFloat:!1,width:ea,height:la});ra=V.a({isPot:!0,isFloat:!1,width:Y.Za()});v={width:2,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,l.borderWidth,
l.borderHeight,0,0,0,0,0])};sa=V.a(v);xa=V.a(v);ta=new Uint8Array(16);g=u=w=0;n=1;z=t=m=0;T={detected:0,x:0,y:0,s:1,rx:0,ry:0,rz:0};d=h=f=e=b=a=0;W();N();x()});return!0},toggle_pause:function(a){if(-1!==[v.play,v.pause,v.N].indexOf(F))return a?-1===[v.play,v.N].indexOf(F)?a=!1:(ua&&(clearTimeout(ua),ua=!1),oa&&(window.cancelAnimationFrame(oa),oa=!1),F=v.pause,a=!0):a=Z(),a},toggle_slow:function(a){-1!==[v.play,v.pause,v.N].indexOf(F)&&-1!==[v.play,v.N].indexOf(F)&&(F=a?v.N:v.play)},resize:function(){var a=
M.J.width,b=M.J.height;if(a===ea&&b===la)return!1;ea=a;la=b;W();N();ma();ca();return!0}}}();
;return JEEFACEFILTERAPI;})();