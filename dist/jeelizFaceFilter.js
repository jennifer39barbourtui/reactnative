 /**
 * Jeeliz Face Filter - https://github.com/jeeliz/jeelizFaceFilter
 *
 * Copyright 2018 Jeeliz ( https://jeeliz.com )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

var JEEFACEFILTERAPI=(function(){function oa(a,b,d){return a*(1-d)+b*d}function pa(a,b){var d=new XMLHttpRequest;d.open("GET",a,!0);d.withCredentials=!1;d.onreadystatechange=function(){4===d.readyState&&200===d.status&&b(d.responseText)};d.send()}function ta(a,b,d){return Math.min(Math.max((d-a)/(b-a),0),1)}
function ua(a){switch(a){case "relu":return"gl_FragColor=max(vec4(0.,0.,0.,0.),gl_FragColor);";case "elu":return"gl_FragColor=mix(exp(-abs(gl_FragColor))-vec4(1.,1.,1.,1.),gl_FragColor,step(0.,gl_FragColor));";case "elu01":return"gl_FragColor=mix(0.1*exp(-abs(gl_FragColor))-vec4(0.1,0.1,0.1,0.1),gl_FragColor,step(0.,gl_FragColor));";case "arctan":return"gl_FragColor=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}
function va(a,b){var d=b%8;return a[(b-d)/8]>>7-d&1}
function wa(a){var b=JSON.parse(a);a=b.ne;var d=b.nf,e=b.n,g="undefined"===typeof btoa?Buffer.from(b.data,"base64").toString("latin1"):atob(b.data),f=g.length,k;b=new Uint8Array(f);for(k=0;k<f;++k)b[k]=g.charCodeAt(k);g=new Float32Array(e);f=new Float32Array(d);k=a+d+1;var n,q;for(n=0;n<e;++n){var l=k*n;var t=0===va(b,l)?1:-1;var y=l+1;var w=1,A=0;for(q=y+a-1;q>=y;--q)A+=w*va(b,q),w*=2;q=A;y=b;w=l+1+a;A=f;var x=0,F=A.length;for(l=w;l<w+F;++l)A[x]=va(y,l),++x;for(l=y=0;l<d;++l)y+=f[l]*Math.pow(2,-l-
1);t=0===y&&0===q?0:t*(1+y)*Math.pow(2,1+q-Math.pow(2,a-1));g[n]=t}return g}
var m=function(){function a(a,b){a=c.createShader(a);c.shaderSource(a,b);c.compileShader(a);return c.getShaderParameter(a,c.COMPILE_STATUS)?a:!1}function b(b,d){b=a(c.VERTEX_SHADER,b);d=a(c.FRAGMENT_SHADER,d);var H=c.createProgram();c.attachShader(H,b);c.attachShader(H,d);c.linkProgram(H);return H}function d(a){void 0===a.X&&(a.X="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");void 0===a.ra&&(a.ra=["a0"]);void 0===a.da&&(a.da=
[2]);void 0===a.precision&&(c.getShaderPrecisionFormat&&10<=c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.MEDIUM_FLOAT).precision&&c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.MEDIUM_FLOAT).precision>c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.LOW_FLOAT).precision?a.precision="mediump":a.precision="highp");a.id=k++;void 0!==a.Lc&&a.Lc.forEach(function(b,d){a.c=a.c.replace(b,a.Aa[d])});a.Ya=0;a.da.forEach(function(b){a.Ya+=4*b});a.za=b(a.X,"precision "+a.precision+" float;\n"+a.c);a.m={};a.f.forEach(function(b){a.m[b]=
c.getUniformLocation(a.za,b)});a.attributes={};a.ea=[];a.ra.forEach(function(b){var d=c.getAttribLocation(a.za,b);a.attributes[b]=d;a.ea.push(d)});if(a.h){c.useProgram(a.za);f=a;g=a.id;for(var d in a.h)c.uniform1i(a.m[d],a.h[d])}a.Dd=!0}function e(a){xa.Rc(D);g!==a.id&&(D.R(),g=a.id,f=a,c.useProgram(a.za),a.ea.forEach(function(a){0!==a&&c.enableVertexAttribArray(a)}))}var g=-1,f=!1,k=0,n=!1,q=["u1"],l=["u0"],t={u1:0},y={u0:0},w={u1:0,u2:1},A={u3:0},x={s0:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",
f:q,h:t},s1:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:q,h:t,precision:"lowp"},s2:{c:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",f:["u1","u2"],h:w},s3:{c:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",f:q,h:t},s4:{c:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",
f:["u1","mask"],h:w},s5:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",f:q,h:t},s6:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",f:q,h:t},s7:{c:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u4;}",f:["u0","u4"],h:y},s8:{c:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;const vec4 g=vec4(.25,.25,.25,.25),e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u4,g);gl_FragColor=b*e;}",
f:["u0","u4"],h:y},s9:{c:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",f:q,h:t},s10:{c:"uniform sampler2D u1,u5;uniform float u6;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u5,vv0);gl_FragColor=mix(b,a,u6*f);}",f:["u1","u5","u6"],h:{u1:0,u5:1}},s11:{c:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u7)+texture2D(u1,vv0+u7*vec2(1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,1.)));}",
f:["u1","u7"],h:t},s12:{c:"uniform sampler2D u1;uniform vec4 u8;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 k(float a){if(a==0.)return vec4(0.,0.,0.,0.);float l=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),m=c+127.,b=(a/exp2(c)-1.)*8388608.,d=m/2.,n=fract(d)*2.,o=floor(d),p=e(b,0.,8.),q=e(b,8.,16.),r=n*128.+e(b,16.,23.),j=l+o;return vec4(p,q,r,j)/255.;}void main(){float a=dot(texture2D(u1,vv0),u8);gl_FragColor=k(a);}",
f:["u1","u8"],h:t},s13:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",f:l,h:y},s14:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(e,a);}",f:l,h:y},s15:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-e,a,step(0.,a));}",f:l,h:y},s16:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-e;gl_FragColor=mix(.1*b,a,step(0.,a));}",
f:l,h:y},s17:{c:"uniform sampler2D u0,u6,u9;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u6,vv0),d=texture2D(u9,vv0),b=a/d;gl_FragColor=c*mix(exp(-abs(b))-f,b,step(0.,a));}",f:["u0","u6","u9"],h:{u0:0,u6:1,u9:2}},s18:{c:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",f:l,h:y},s19:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(.5,.5,.5,.5);void main(){vec4 a=texture2D(u0,vv0),b=log(e+a);gl_FragColor=b;}",
f:l,h:y},s20:{c:"uniform sampler2D u0;uniform float gain;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=exp(a);}",f:["u0","u10"],h:y},s21:{c:"uniform sampler2D u0,u11;uniform float u12;const vec2 f=vec2(.5,.5);const float g=1e-5;const vec4 h=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u11,f);float b=u12*u12;vec4 c=max(b*a,g*h);gl_FragColor=texture2D(u0,vv0)/c;}",f:["u0","u13","u12"],h:{u0:0,u13:1}},s22:{c:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){float a=u14.x*u14.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u14.y),g=floor(u14.x*fract(b*u14.y)),f=(g*u14.y+d)/a;gl_FragColor=texture2D(u1,f+c/a);}",
f:["u1","u14"],h:t},s23:{c:"uniform sampler2D u15,u16,u17;varying vec2 vv0;void main(){vec4 a=texture2D(u17,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u15,b),e=texture2D(u16,c);gl_FragColor=d*e;}",f:["u15","u16","u17"],h:{u16:0,u15:1,u17:2}},s24:{c:"uniform float u18;uniform sampler2D u15,u16;varying vec2 vv0;void main(){vec2 a=fract(vv0*u18);vec4 b=texture2D(u15,vv0),c=texture2D(u16,a);gl_FragColor=b*c;}",f:["u16","u15","u18"],h:{u16:0,u15:1}},s25:{c:"uniform float u18;uniform sampler2D u15,u16,u19,u20,u21,u22;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 i=vv0*u18,m=floor(i),c=i-m;vec4 n=texture2D(u15,vv0),d=texture2D(u16,c),a=texture2D(u22,vv0);a=a*255.;vec4 o=texture2D(u19,c),p=texture2D(u20,c),q=texture2D(u21,c),j=step(-g,-a),b=e-j,k=b*step(-e-g,-a);b*=e-k;vec4 h=b*step(-2.*e-g,-a);b*=e-h;vec4 l=b;d=j*d+k*o+h*p+l*q,gl_FragColor=n*d;}",
f:"u15 u16 u18 u22 u19 u20 u21".split(" "),h:{u16:0,u15:1,u22:3,u19:4,u20:5,u21:6}},s26:{c:"uniform sampler2D u15,u16,u23;uniform float u18,u24,u25,u26;varying vec2 vv0;const vec2 j=vec2(1.,1.);void main(){vec2 a=floor(u24*vv0),g=u24*vv0-a;float b=u18/u24;vec2 c=floor(g*b),d=g*b-c,h=(a+d)/u24;float l=u24*u26/u18;vec2 m=l*c,i=(m+d*u25)/u26,e=step(i,j);vec4 n=texture2D(u15,h),o=texture2D(u16,i),p=n*o*e.x*e.y,k=texture2D(u23,h);gl_FragColor=p*u25*u25+k;}",f:"u15 u16 u18 u24 u25 u26 u23".split(" "),h:{u16:0,
u15:1,u23:2}},s27:{c:"uniform sampler2D u15,u16;varying vec2 vv0;void main(){vec4 a=texture2D(u15,vv0),b=texture2D(u16,vv0);gl_FragColor=a*b;}",f:["u15","u16"],h:{u16:0,u15:1}},s28:{c:"uniform sampler2D u1,u23;uniform float u27;varying vec2 vv0;void main(){gl_FragColor=texture2D(u23,vv0)+u27*texture2D(u1,vv0);}",f:["u1","u23","u27"],h:{u1:0,u23:1}},s29:{c:"varying vec2 vv0;uniform sampler2D u1;const vec4 g=vec4(1.,1.,1.,1.),e=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,e)*g;}",
f:q,h:t,precision:"lowp"},s30:{c:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u28;const vec4 g=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u28,vv0.y-u28))*1.,a-=texture2D(u1,vec2(vv0.x-u28,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u28,vv0.y+u28))*1.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y-u28))*1.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y+u28))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u28,vv0.y-u28))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u28))*2.,b-=texture2D(u1,vec2(vv0.x+u28,vv0.y-u28))*1.,b+=texture2D(u1,vec2(vv0.x-u28,vv0.y+u28))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u28))*2.,b+=texture2D(u1,vec2(vv0.x+u28,vv0.y+u28))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),f=texture2D(u2,vv0);gl_FragColor=f.a*e.r*g;}",
f:["u1","u2","u28"],h:w},s31:{c:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u28;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float i=0.;vec2 l=k*u28,b,c;float d,a,g=0.;for(float f=-4.;f<=4.;f+=1.)for(float e=-4.;e<=4.;e+=1.)b=vec2(f,e),d=length(b)/2.,a=exp(-d*d),c=vv0+l*b,a=1.,i+=a*texture2D(u1,c).r,g+=a;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,c).r-i/g)*j;}",f:["u1","u2","u28"],h:w},s32:{c:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 h=vec2(.5,.5),i=vec2(1.,0.),j=vec2(0.,1.);void main(){vec2 a=vv0-u7*h;vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*i),d=texture2D(u3,a+u7*j),k=texture2D(u3,a+u7),l=e(b,c),g=e(d,k);gl_FragColor=e(l,g);}",
f:["u3","u7"],h:A},s33:{c:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;const vec2 j=vec2(1.,0.),k=vec2(0.,1.),l=vec2(2.,0.),m=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*j),d=texture2D(u3,a+u7*k),g=texture2D(u3,a+u7),i=e(b,c),h=e(d,g);return e(i,h);}void main(){vec2 a=vv0+u7*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u7*l),d=f(a+u7*2.),g=f(a+u7*m),i=e(b,c),h=e(d,g);gl_FragColor=e(i,h);}",f:["u3","u7"],h:A},s34:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",
f:["u1"],h:t,precision:"lowp"},s35:{c:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;const vec4 g=vec4(1.,1.,1.,1.);const float d=15444.;void main(){vec4 a=1001./d*texture2D(u1,vv0-3.*u7)+2002./d*texture2D(u1,vv0-2.*u7)+3003./d*texture2D(u1,vv0-u7)+3432./d*texture2D(u1,vv0)+3003./d*texture2D(u1,vv0+u7)+2002./d*texture2D(u1,vv0+2.*u7)+1001./d*texture2D(u1,vv0+3.*u7);gl_FragColor=a;}",f:["u7","u1"],h:t,precision:"lowp"},s36:{c:"uniform sampler2D u1,u29,u30;varying vec2 vv0;const vec4 g=vec4(1.,1.,1.,1.);const float h=.1;void main(){vec4 a=texture2D(u29,vv0),b=texture2D(u30,vv0),c=texture2D(u1,vv0),d=max(g*h,b-a*a),f=sqrt(d);gl_FragColor=(c-a)/f;}",
f:["u1","u29","u30"],h:{u1:0,u29:1,u30:2}}},F={s37:{c:"uniform float u18,u31;uniform sampler2D u15,u16,u23;varying vec2 vv0;const vec2 o=vec2(0.,0.),h=vec2(1.,1.),i=vec2(.5,.5),m=vec2(.01,.01);void main(){vec4 j=texture2D(u23,vv0);float f=1.1111;vec2 a,l,b=o,c=m/u18,k=floor(vv0*u18+c);float p=f*u18;vec2 n=h*(f-1.)/2.;for(float d=0.;d<1.1111;d+=1.){b.x=d;for(float e=0.;e<1.1111;e+=1.)b.y=e,a=(k+i+u31*(b-n))/u18,a+=step(a,-c),a-=step(h-c,a),l=(k*f+b+i)/p,j+=texture2D(u15,l)*texture2D(u16,a);}gl_FragColor=j,gl_FragColor*=2.2222;}",
f:["u18","u15","u16","u23","u31"],Aa:["1.1111","gl_FragColor\\*=2.2222;"]},s38:{c:"uniform float u18,u31,u26;uniform sampler2D u15,u16,u23;varying vec2 vv0;const vec2 m=vec2(0.,0.),j=vec2(1.,1.),n=vec2(.5,.5),u=vec2(.01,.01);void main(){vec4 p=texture2D(u23,vv0);float q=1.1111,i=3.3333;vec2 a,s,t,r,b=m,c=m,d=u/u26,o=floor(vv0*u18+d);float k=q*u26;vec2 v=j*(q-1.)/2.;float w=k/u18;vec2 x=o*i;for(float g=0.;g<1.1111;g+=1.){b.x=g;for(float f=0.;f<1.1111;f+=1.){b.y=f;for(float h=0.;h<3.3333;h+=1.){c.x=h;for(float e=0.;e<3.3333;e+=1.)c.y=e,t=x+c+i*u31*(b-v),a=(t+n)/u26,a+=step(a,-d),a-=step(j-d,a),r=b*i+c,s=(o*w+r+n)/k,p+=texture2D(u15,s)*texture2D(u16,a);}}}gl_FragColor=p,gl_FragColor*=2.2222;}",
f:"u18 u26 u15 u16 u23 u31".split(" "),Aa:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},D={Ra:function(){return n},l:function(){if(!n){for(var a in x)d(x[a],a);m.set("s0");c.enableVertexAttribArray(0);a=ya.l();n=!0;return a}},Qb:function(a){a.forEach(function(a){D.Pb(a)})},Pb:function(a){x[a.id]=a;d(a,a.id)},nb:function(a,b,e){b||(b=a);x[b]=Object.create(F[a]);F[a].Aa&&F[a].Aa.forEach(function(a,d){x[b].c=x[b].c.replace(new RegExp(a,"g"),e[d])});d(x[b],b)},set:function(a){e(x[a])},mc:function(a){return"undefined"!==
typeof x[a]},qd:function(){return f.nd},R:function(){-1!==g&&(g=-1,f.ea.forEach(function(a){0!==a&&c.disableVertexAttribArray(a)}))},Wa:function(){var a=0;f.ea.forEach(function(b,d){d=f.da[d];c.vertexAttribPointer(b,d,c.FLOAT,!1,f.Ya,a);a+=4*d})},fb:function(){c.enableVertexAttribArray(0)},na:function(){c.vertexAttribPointer(f.ea[0],2,c.FLOAT,!1,8,0)},Hb:function(a,b){c.uniform1i(f.m[a],b)},B:function(a,b){c.uniform1f(f.m[a],b)},P:function(a,b,d){c.uniform2f(f.m[a],b,d)},Sd:function(a,b){c.uniform2fv(f.m[a],
b)},Td:function(a,b){c.uniform3fv(f.m[a],b)},Sc:function(a,b,d,e){c.uniform3f(f.m[a],b,d,e)},Ib:function(a,b){c.uniform4fv(f.m[a],b)},Ud:function(a,b){c.uniformMatrix2fv(f.m[a],!1,b)},Vd:function(a,b){c.uniformMatrix3fv(f.m[a],!1,b)},Wd:function(a,b){c.uniformMatrix4fv(f.m[a],!1,b)},L:function(a,b){D.set(a);b.forEach(function(a){switch(a.type){case "4f":c.uniform4fv(f.m[a.name],a.value);break;case "3f":c.uniform3fv(f.m[a.name],a.value);break;case "2f":c.uniform2fv(f.m[a.name],a.value);break;case "1f":c.uniform1f(f.m[a.name],
a.value);break;case "1i":c.uniform1i(f.m[a.name],a.value);break;case "mat2":c.uniformMatrix2fv(f.m[a.name],!1,a.value);break;case "mat3":c.uniformMatrix3fv(f.m[a.name],!1,a.value);break;case "mat4":c.uniformMatrix4fv(f.m[a.name],!1,a.value)}})}};return D}(),c,za=function(){function a(a){console.log("ERROR in ContextFeedForward : ",a);return!1}var b=!1,d=!1,e=!1,g=!1,f=!0,k=!1,n={v:function(){return b.width},J:function(){return b.height},rd:function(){return b},pd:function(){return c},o:function(){return f},
flush:function(){c.flush()},rc:function(){k||(k=new Uint8Array(b.width*b.height*4));c.readPixels(0,0,b.width,b.height,c.RGBA,c.UNSIGNED_BYTE,k);return k},td:function(){return b.toDataURL("image/jpeg")},ud:function(){v.I();d||(d=document.createElement("canvas"),e=d.getContext("2d"));d.width=b.width;d.height=b.height;var a=n.rc(),f=e.createImageData(d.width,d.height),g,k,w=d.width,A=d.height,x=f.data;for(k=0;k<A;++k){var F=A-k-1;for(g=0;g<w;++g){var D=4*(k*w+g);var H=4*(F*w+g);x[D]=a[H];x[D+1]=a[H+
1];x[D+2]=a[H+2];x[D+3]=a[H+3]}}e.putImageData(f,0,0);return d.toDataURL("image/png")},sd:function(a){!d&&a&&(d=document.createElement("canvas"),e=d.getContext("2d"));var g=a?d:document.createElement("canvas");g.width=b.width;g.height=b.height;(a?e:g.getContext("2d")).drawImage(b,0,0);return g},l:function(d){d.ec&&!d.ha?b=document.getElementById(d.ec):d.ha&&(b=d.ha);b||(b=document.createElement("canvas"));b.width=d&&void 0!==d.width?d.width:512;b.height=d&&void 0!==d.height?d.height:512;"undefined"===
typeof d&&(d={});void 0===d.premultipliedAlpha&&(d.premultipliedAlpha=!1);void 0===d.pb&&(d.pb=!0);void 0===d.antialias&&(d.antialias=!1);var e={antialias:d.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:d.premultipliedAlpha,stencil:!1,depth:d.pb};(c=b.getContext("webgl2",e))?f=!0:((c=b.getContext("webgl",e))||(c=b.getContext("experimental-webgl",e)),f=!1);if(!c)return a("WebGL is not enabled");(g=c.getExtension("WEBGL_lose_context"))&&b.addEventListener("webglcontextlost",d.Hc,!1);
if(!z.l())return a("Not enough capabilities");if(!z.$b()&&f)return a("Your configuration cannot process color buffer float");c.clearColor(0,0,0,0);c.disable(c.DEPTH_TEST);c.disable(c.BLEND);c.disable(c.DITHER);c.disable(c.STENCIL_TEST);c.GENERATE_MIPMAP_HINT&&c.hint(c.GENERATE_MIPMAP_HINT,c.FASTEST);c.disable(c.SAMPLE_ALPHA_TO_COVERAGE);c.disable(c.SAMPLE_COVERAGE);return!0},yc:function(){if(!m.l())return!1;c.depthFunc(c.LEQUAL);c.clearDepth(1);return!0}};return n}(),xa=function(){var a="undefined"===
typeof m?JEShaders:m;return{Rc:function(b){a!==b&&(a.R(),a=b)},Ra:function(){return a.Ra()},na:function(){a.na()},Wa:function(){a.Wa()},R:function(){a.R()},set:function(b){a.set(b)}}}(),L=function(){var a,b,d=0,e=-2,g=-2,f=!1,k={reset:function(){g=e=-2},l:function(){f||(a=c.createBuffer(),c.bindBuffer(c.ARRAY_BUFFER,a),c.bufferData(c.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),c.STATIC_DRAW),b=c.createBuffer(),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,b),c.bufferData(c.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,
1,2]),c.STATIC_DRAW),k.fa(),f=!0)},a:function(a){var b=d++,f=a.ba.length,k=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,k);c.bufferData(c.ARRAY_BUFFER,a.Lb instanceof Float32Array?a.Lb:new Float32Array(a.Lb),c.STATIC_DRAW);e=b;if(a.ba){var n=c.createBuffer();c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,n);if(65536>a.ba.length){var w=Uint16Array;var A=c.UNSIGNED_SHORT;var x=2}else w=Uint32Array,A=c.UNSIGNED_INT,x=4;c.bufferData(c.ELEMENT_ARRAY_BUFFER,a.ba instanceof w?a.ba:new w(a.ba),c.STATIC_DRAW);g=b}var F=
{Zb:function(a){e!==b&&(c.bindBuffer(c.ARRAY_BUFFER,k),e=b);a&&xa.Wa()},Xb:function(){g!==b&&(c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,n),g=b)},bind:function(a){F.Zb(a);F.Xb()},ld:function(){c.drawElements(c.TRIANGLES,f,A,0)},md:function(a,b){c.drawElements(c.TRIANGLES,a,A,b*x)},remove:function(){c.deleteBuffer(k);a.ba&&c.deleteBuffer(n);F=null}};return F},fa:function(){-1!==e&&(c.bindBuffer(c.ARRAY_BUFFER,a),e=-1);-1!==g&&(c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,b),g=-1)},g:function(a,b){a&&L.fa();b&&xa.na();
c.drawElements(c.TRIANGLES,3,c.UNSIGNED_SHORT,0)},qc:function(){c.deleteBuffer(a);c.deleteBuffer(b)}};return k}(),v=function(){var a,b,d,e=!1,g={u:-2,oc:1};return{l:function(){if(!e){a=c.createFramebuffer();var g=z.o();b=g&&c.DRAW_FRAMEBUFFER?c.DRAW_FRAMEBUFFER:c.FRAMEBUFFER;d=g&&c.READ_FRAMEBUFFER?c.READ_FRAMEBUFFER:c.FRAMEBUFFER;e=!0}},wd:function(){return b},Na:function(){return d},$:function(){return c.FRAMEBUFFER},yd:function(){return g},od:function(){return a},a:function(d){void 0===d.ob&&(d.ob=
!1);var e=d.oa?d.oa:!1,f=d.width,q=void 0!==d.height?d.height:d.width,l=a,t=!1,y=!1,w=0;e&&(f=f?f:e.v(),q=q?q:e.J());var A={Gb:function(){y||(l=c.createFramebuffer(),y=!0,w=g.oc++)},Ob:function(){A.Gb();A.j();t=c.createRenderbuffer();c.bindRenderbuffer(c.RENDERBUFFER,t);c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,f,q);c.framebufferRenderbuffer(b,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,t);c.clearDepth(1)},bind:function(a,d){w!==g.u&&(c.bindFramebuffer(b,l),g.u=w);e&&e.j();d&&c.viewport(0,0,
f,q);a&&c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT)},dd:function(){w!==g.u&&(c.bindFramebuffer(b,l),g.u=w)},clear:function(){c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT)},gd:function(){c.clear(c.COLOR_BUFFER_BIT)},hd:function(){c.clear(c.DEPTH_BUFFER_BIT)},Tc:function(){c.viewport(0,0,f,q)},j:function(){w!==g.u&&(c.bindFramebuffer(b,l),g.u=w)},rtt:function(a){e=a;g.u!==w&&(c.bindFramebuffer(c.FRAMEBUFFER,l),g.u=w);a.j()},I:function(){c.bindFramebuffer(b,null);g.u=-1},resize:function(a,b){f=a;
q=b;t&&(c.bindRenderbuffer(c.RENDERBUFFER,t),c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,f,q))},remove:function(){c.bindFramebuffer(b,l);c.framebufferTexture2D(b,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,null,0);t&&c.framebufferRenderbuffer(b,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,null);c.bindFramebuffer(b,null);c.deleteFramebuffer(l);t&&c.deleteRenderbuffer(t);A=null}};d.ob&&A.Ob();return A},I:function(){c.bindFramebuffer(b,null);g.u=-1},Zc:function(){c.bindFramebuffer(b,null);c.clear(c.COLOR_BUFFER_BIT|
c.DEPTH_BUFFER_BIT);c.viewport(0,0,z.v(),z.J());g.u=-1},reset:function(){g.u=-2},S:function(){0!==g.u&&(c.bindFramebuffer(b,a),g.u=0)},clear:function(){c.viewport(0,0,z.v(),z.J());c.clear(c.COLOR_BUFFER_BIT)}}}(),S=function(){function a(a){c.bindTexture(c.TEXTURE_2D,a)}function b(a){qa[0]=a;a=ra[0];var b=a>>16&32768,d=a>>12&2047,K=a>>23&255;return 103>K?b:142<K?b|31744|((255==K?0:1)&&a&8388607):113>K?(d|=2048,b|(d>>114-K)+(d>>113-K&1)):b=(b|K-112<<10|d>>1)+(d&1)}function d(a){var d=new Uint16Array(a.length);
a.forEach(function(a,K){d[K]=b(a)});return d}function e(){if(null!==T.Oa)return T.Oa;var a=f(d([1,1,1,1]));return null===a?!0:T.Oa=a}function g(){if(null!==T.Pa)return T.Pa;var a=f(new Uint8Array([255,255,255,255]));return null===a?!0:T.Pa=a}function f(a){if(!xa.Ra()||!x)return null;a=N.a({isFloat:!1,G:!0,array:a,width:1});v.I();c.viewport(0,0,1,1);c.clearColor(0,0,0,0);c.clear(c.COLOR_BUFFER_BIT);xa.set("s0");a.$a(0);L.g(!1,!0);var b=new Uint8Array(4);c.readPixels(0,0,1,1,c.RGBA,c.UNSIGNED_BYTE,
b);b=.9<b[0];a.remove();v.S();return b}var k=0,n,q=0,l,t=!1,y,w,A,x=!1,F=!1,D,H,J,W=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],Z=!1,na=!1,qa=new Float32Array(1),ra=new Int32Array(qa.buffer),T={Oa:null,Pa:null},N={l:function(){if(!x){w=[c.RGB,!1,c.RGB,c.RGBA];A=[c.RGB,!1,c.RGB,c.RGBA];n=[c.TEXTURE0,c.TEXTURE1,c.TEXTURE2,c.TEXTURE3,c.TEXTURE4,c.TEXTURE5,c.TEXTURE6,c.TEXTURE7];Z="undefined"!==typeof JEContext;na="undefined"!==typeof z;Z&&JEContext.Kd()&&n.push(c.TEXTURE8,c.TEXTURE9);l=[-1,-1,-1,-1,-1,
-1,-1,-1];y=[c.UNSIGNED_BYTE,c.FLOAT,c.FLOAT];if(!t){for(var a=new Float32Array(16384),b=0;16384>b;++b)a[b]=2*Math.random()-1;t={random:N.a({isFloat:!0,isPot:!0,array:a,width:64}),Kb:N.a({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}x=!0}},xc:function(){N.$c()},Bd:function(){return t.Kb},$c:function(){y[1]=z.ua()},Nc:function(){A=w=[c.RGBA,c.RGBA,c.RGBA,c.RGBA]},Md:function(a,b){m.set("s1");v.I();var d=a.v(),K=a.J();c.viewport(0,0,d,K);a.b(0);L.g(!1,!1);c.readPixels(0,0,d,K,c.RGBA,
c.UNSIGNED_BYTE,b)},pc:function(b,d,e){c.activeTexture(c.TEXTURE0);k=0;var K=c.createTexture();a(K);var g=z.o()&&c.RGBA32F?c.RGBA32F:c.FLOAT;d=d instanceof Float32Array?d:new Float32Array(d);var f=Math.log(d.length)/Math.log(2);f!==Math.floor(f)&&(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE));c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST);c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,
e);c.texImage2D(c.TEXTURE_2D,0,c.RGBA,b.v(),b.J(),0,c.RGBA,g,d);a(null);c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1);v.S();m.set("s0");b.w();c.clearColor(0,0,0,0);c.clear(c.COLOR_BUFFER_BIT);a(K);L.g(!0,!1);c.deleteTexture(K)},a:function(b){function f(){a(u);Y&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,Y);b.isPot?(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,b.sb?c.MIRRORED_REPEAT:c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,b.T?c.MIRRORED_REPEAT:c.REPEAT)):(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,
c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE));b.va&&"undefined"!==typeof JESETTINGS&&c.texParameterf(c.TEXTURE_2D,JEContext.vd().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.bd);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,b.isLinear?c.LINEAR:c.NEAREST);b.isLinear?c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,b.isMipmap&&!V?c.NEAREST_MIPMAP_LINEAR:c.LINEAR):c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,b.isMipmap&&!V?c.NEAREST_MIPMAP_NEAREST:c.NEAREST);O=w[b.la-
1];P=A[b.la-1];Q=y[t];if(z.o()){var d=c.RGBA32F;O===c.RGBA&&Q===c.FLOAT&&d&&(P=d);O===c.RGB&&Q===c.FLOAT&&d&&(P=d,O=c.RGBA)}if(b.G&&!b.isFloat||b.isFloat&&b.isMipmap&&ya.Ac())(d=c.RGBA16F)&&(P=d),Q=z.ua();b.vb&&"undefined"!==typeof c.texStorage2D&&(ia=b.vb);b.tb&&4===b.la&&(O=JEContext.zd());if(b.D)c.texImage2D(c.TEXTURE_2D,0,P,O,Q,b.D);else if(b.url)c.texImage2D(c.TEXTURE_2D,0,P,O,Q,B);else if(C){try{var e=c.getError();e!==c.NO_ERROR&&console.log("GLERR in SharedTexture :",e);c.texImage2D(c.TEXTURE_2D,
0,P,h,r,0,O,Q,C);c.getError()!==c.NO_ERROR&&(c.texImage2D(c.TEXTURE_2D,0,P,h,r,0,O,Q,null),c.getError()!==c.NO_ERROR&&c.texImage2D(c.TEXTURE_2D,0,c.RGBA,h,r,0,c.RGBA,c.UNSIGNED_BYTE,null))}catch(bb){c.texImage2D(c.TEXTURE_2D,0,P,h,r,0,O,Q,null)}b.isKeepArray||(C=null)}else c.texImage2D(c.TEXTURE_2D,0,P,h,r,0,O,Q,null);if(b.isMipmap)if(!V&&p)p.Ma(),fa=!0;else if(V){e=Math.log(Math.min(h,r))/Math.log(2);ja=Array(1+e);ja[0]=u;for(d=1;d<=e;++d){var sa=Math.pow(2,d);var g=h/sa;sa=r/sa;var f=c.createTexture();
a(f);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST);c.texImage2D(c.TEXTURE_2D,0,P,g,sa,0,O,Q,null);a(null);ja[d]=f}fa=!0}a(null);l[k]=-1;Y&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1);ka=!0;G&&p&&(G(p),G=!1)}"undefined"===typeof b.isFloat&&(b.isFloat=!1);"undefined"===typeof b.G&&(b.G=!1);"undefined"===typeof b.isPot&&(b.isPot=!0);"undefined"===typeof b.isLinear&&(b.isLinear=!1);"undefined"===typeof b.isMipmap&&(b.isMipmap=!1);
"undefined"===typeof b.Ea&&(b.Ea=!1);void 0===b.va&&(b.va=!1);void 0===b.T&&(b.T=!1);void 0===b.sb&&(b.sb=!1);void 0===b.tb&&(b.tb=!1);void 0===b.la&&(b.la=4);void 0===b.qb&&(b.qb=!1);"undefined"===typeof b.isFlipY&&(b.isFlipY=b.url||b.array?!0:!1);"undefined"===typeof b.isKeepArray&&(b.isKeepArray=!1);b.data&&(b.array="string"===typeof b.data?wa(b.data):b.isFloat?new Float32Array(b.data):new Uint8Array(b.data),b.isFlipY=!1);var t=0,K=b.D?!0:!1,x=null,X=null,R=!1,T=null;b.isFloat&&(b.G=!0);b.G&&(t=
1);b.qb||z.o()||!b.isFloat||!na||z.bb()||(b.isFloat=!1);b.isFloat&&(t=2);b.va&&Z&&!JEContext.Fd()&&(b.va=!1);var u=c.createTexture(),G=b.Ea,B=null,C=!1,h=0,r=0,ka=!1,I=q++,ba=!1,da,U,ha,ma,P,O,Q,Y=b.isFlipY,V=b.G&&b.isMipmap&&"undefined"!==typeof ya&&!ya.bc()?!0:!1,ja,ia=-1,fa=!1;"undefined"!==typeof b.width&&b.width&&(h=b.width,r="undefined"!==typeof b.height&&b.height?b.height:h);var p={get:function(){return u},v:function(){return h},J:function(){return r},Cd:function(){return b.url},Gd:function(){return b.isFloat},
Id:function(){return b.G},Jd:function(){return b.isLinear},Ma:function(){c.generateMipmap(c.TEXTURE_2D)},ab:function(b,d){V?(b||(b=p.kb()),p.Ba(d),a(ja[b]),l[d]=-1):p.b(d)},kb:function(){-1===ia&&(ia=Math.log(h)/Math.log(2));return ia},ib:function(b){if(V){b||(b=p.kb());m.set("s11");p.Ba(0);var d,sa=h,e=r;for(d=1;d<=b;++d)sa/=2,e/=2,m.P("u7",.25/sa,.25/e),c.viewport(0,0,sa,e),a(ja[d-1]),c.framebufferTexture2D(v.$(),c.COLOR_ATTACHMENT0,c.TEXTURE_2D,ja[d],0),L.g(!1,1===d);l[0]=-1}else p.Ma()},Ba:function(a){a!==
k&&(c.activeTexture(n[a]),k=a)},b:function(b){if(!ka)return!1;p.Ba(b);if(l[b]===I)return!1;a(u);l[b]=I;return!0},$a:function(b){c.activeTexture(n[b]);k=b;a(u);l[b]=I},j:function(){c.framebufferTexture2D(v.$(),c.COLOR_ATTACHMENT0,c.TEXTURE_2D,u,0)},w:function(){c.viewport(0,0,h,r);c.framebufferTexture2D(v.$(),c.COLOR_ATTACHMENT0,c.TEXTURE_2D,u,0)},Zd:function(){c.framebufferTexture2D(v.$(),c.COLOR_ATTACHMENT0,c.TEXTURE_2D,null,0)},resize:function(a,b){h=a;r=b;f()},clone:function(a){a=N.a({width:h,
height:r,G:b.G,isFloat:b.isFloat,isLinear:b.isLinear,T:b.T,isFlipY:a?!Y:Y,isPot:b.isPot});xa.set("s0");v.S();a.j();c.viewport(0,0,h,r);p.b(0);L.g(!0,!0);return a},Tc:function(){c.viewport(0,0,h,r)},remove:function(){c.deleteTexture(u);p=null},refresh:function(){p.$a(0);Y&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!0);K?c.texImage2D(c.TEXTURE_2D,0,P,O,c.UNSIGNED_BYTE,b.D):c.texImage2D(c.TEXTURE_2D,0,P,h,r,0,O,Q,C);Y&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1)},cb:function(){var a=h*r*4;U=[new Uint8Array(a),
new Uint8Array(a),new Uint8Array(a),new Uint8Array(a)];da=[new Float32Array(U[0].buffer),new Float32Array(U[1].buffer),new Float32Array(U[2].buffer),new Float32Array(U[3].buffer)];ha=new Uint8Array(4*a);ma=new Float32Array(ha.buffer);ba=!0},Fb:function(){ba||p.cb();c.readPixels(0,0,h,4*r,c.RGBA,c.UNSIGNED_BYTE,ha);var a,b=h*r,d=2*b,e=3*b;for(a=0;a<b;++a)da[0][a]=ma[a],da[1][a]=ma[a+b],da[2][a]=ma[a+d],da[3][a]=ma[a+e];return da},eb:function(){v.I();m.set("s12");p.b(0);c.viewport(0,0,h,4*r);for(var a=
0;4>a;++a)c.viewport(0,r*a,h,r),m.Ib("u8",W[a]),L.g(!1,0===a)},$d:function(b){var d=Q===y[0]&&!g();a(u);Y&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,Y);d?(R||(x=document.createElement("canvas"),x.width=h,x.height=r,X=x.getContext("2d"),T=X.createImageData(h,r),R=!0),T.data.set(b),X.putImageData(T,0,0),c.texImage2D(c.TEXTURE_2D,0,P,O,Q,x)):c.texImage2D(c.TEXTURE_2D,0,P,h,r,0,O,Q,b);l[k]=I;Y&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1)},ae:function(b,d){a(u);c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,d);c.texImage2D(c.TEXTURE_2D,
0,P,O,Q,b);l[k]=I;d&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1)},Od:function(a,d){var e=h*r,g=4*e;a=b.G?a?"RGBE":"JSON":"RGBA";d&&(a=d);d=z.o()&&!1;switch(a){case "RGBE":var f="s39";break;case "JSON":f=d?"s0":"s12";break;case "RGBA":case "RGBAARRAY":f="s6"}ba||("RGBA"===a||"RGBE"===a||"RGBAARRAY"===a?(U=new Uint8Array(g),ba=!0):"JSON"!==a||d||p.cb());v.I();m.set(f);p.b(0);if("RGBA"===a||"RGBE"===a||"RGBAARRAY"===a){c.viewport(0,0,h,r);L.g(!0,!0);c.readPixels(0,0,h,r,c.RGBA,c.UNSIGNED_BYTE,U);if("RGBAARRAY"===
a)return{data:U};F||(D=document.createElement("canvas"),H=D.getContext("2d"),F=!0);D.width=h;D.height=r;J=H.createImageData(h,r);J.data.set(U);H.putImageData(J,0,0);var k=D.toDataURL("image/png")}else if("JSON"===a)if(d)k=new Float32Array(e),c.viewport(0,0,h,r),L.g(!0,!0),c.readPixels(0,0,h,r,c.RGBA,c.FLOAT,k);else{for(k=0;4>k;++k)c.viewport(0,r*k,h,r),m.Ib("u8",W[k]),L.g(!k,!k);p.Fb();k=Array(e);for(f=0;f<e;++f)k[4*f]=da[0][f],k[4*f+1]=da[1][f],k[4*f+2]=da[2][f],k[4*f+3]=da[3][f]}return{format:a,
data:k,width:h,height:r,isMirrorY:b.T,isFlipY:"RGBA"===a?b.isFlipY:!b.isFlipY}}};b.isMipmap&&!V&&ka&&!fa&&(p.Ma(),fa=!0);if(b.url)a(u),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,1,1,0,c.RGBA,c.UNSIGNED_BYTE,null),B=new Image,B.kd="Anonymous",B.crossOrigin="Anonymous",B.src=b.url,B.onload=function(){h=B.width;r=B.height;f()};else if(b.D){var E=function(){h=void 0!==b.D.videoWidth?b.D.videoWidth:b.D.width;r=void 0!==b.D.videoHeight?b.D.videoHeight:b.D.height;h?f():setTimeout(E,1)};E()}else b.array?(b.G&&!b.isFloat?
b.array instanceof Uint16Array?(C=b.array,f()):e()?(C=d(b.array),f()):(f(),N.pc(p,b.array,Y)):(C=b.isFloat?b.array instanceof Float32Array?b.array:new Float32Array(b.array):b.array instanceof Uint8Array?b.array:new Uint8Array(b.array),f()),b.isKeepArray||(C&&C!==b.array&&(C=null),delete b.array)):f();p.uc=p.v;G&&ka&&(G(p),G=!1);return p},I:function(b){b!==k&&(c.activeTexture(n[b]),k=b);l[b]=-1;a(null)},ed:function(a){t.random.b(a)},reset:function(){for(var a=0;a<n.length;++a)l[a]=-1;k=-1},Nd:function(){k=
-1},Xd:function(){for(var a=0;a<n.length;++a)N.I(a)},qc:function(){t&&(t.random.remove(),t.Kb.remove())},Yd:function(a,b){if("RGBA"===a.format||"RGBE"===a.format){var d=new Image;d.src=a.data;d.onload=function(){N.a({T:a.isMirrorY,isFlipY:a.isFlipY,isFloat:!1,D:d,Ea:function(d){if("RGBA"===a.format)b(d);else{var e=a.width,f=a.height,g=N.a({T:a.isMirrorY,isFloat:!0,width:e,height:f,isFlipY:a.isFlipY});v.S();c.viewport(0,0,e,f);m.set("s40");g.j();d.b(0);L.g(!0,!0);N.I(0);b(g);c.flush();setTimeout(d.remove,
50)}}})}}else"JSON"===a.format?b(N.a({isFloat:!0,isFlipY:a.isFlipY,width:a.width,height:a.height,array:new Float32Array(a.data)})):b(!1)}};return N}(),Ca={a:function(a){var b=[S.a(a),S.a(a)],d=[b[1],b[0]],e=d,g={Qc:function(a){e[1].j();e[0].b(a);g.Jb()},Rd:function(a){e[1].w();e[0].b(a);g.Jb()},Jb:function(){e=e===b?d:b},refresh:function(){e[0].refresh();e[1].refresh()},b:function(a){e[0].b(a)}};return g}},z=function(){function a(){b="undefined"===typeof za?JEContext:za;d=!0}var b,d=!1,e=!1,g=!1,
f=!1,k=!1,n=!1,q=!1,l=!1,t=!1,y=!1,w=!1,A=!0,x=!0,F=!0,D,H="undefined"===typeof window?{}:window,J={l:function(){if(d)return!0;a();J.gb();J.La();J.kc();J.lc();v.l();S.l();if(!J.gc())return!1;L.l();S.xc();return!0},v:function(){d||a();return b.v()},J:function(){d||a();return b.J()},o:function(){d||a();return b.o()},kc:function(){w=(y=c.getExtension("EXT_color_buffer_float")||c.getExtension("WEBGL_color_buffer_float")||c.getExtension("OES_color_buffer_float"))?!0:!1;H.GL_EXT_COLORBUFFERFLOAT=y},lc:function(){c.getExtension("EXT_color_buffer_half_float")||
c.getExtension("WEBGL_color_buffer_half_float")||c.getExtension("OES_color_buffer_half_float")},gb:function(){if(!e){this.o()||(g=c.getExtension("OES_texture_float")||c.getExtension("MOZ_OES_texture_float")||c.getExtension("WEBKIT_OES_texture_float"),k=(H.GL_EXT_FLOAT=g)?!0:!1);if(k||this.o())f=c.getExtension("OES_texture_float_linear")||c.getExtension("MOZ_OES_texture_float_linear")||c.getExtension("WEBKIT_OES_texture_float_linear"),H.GL_EXT_FLOATLINEAR=f;e=!0}},La:function(){if(!t){if(!this.o()){if(n=
c.getExtension("OES_texture_half_float")||c.getExtension("MOZ_OES_texture_half_float")||c.getExtension("WEBKIT_OES_texture_half_float"))D=n.HALF_FLOAT_OES,q=!0;H.GL_EXT_HALFFLOAT=n}if(q||this.o())l=c.getExtension("OES_texture_half_float_linear")||c.getExtension("MOZ_OES_texture_half_float_linear")||c.getExtension("WEBKIT_OES_texture_half_float_linear"),H.GL_EXT_HALFFLOATLINEAR=l;t=!0}},ua:function(){if(J.o())return c.HALF_FLOAT;J.La();return q?D:c.FLOAT},bb:function(){return A},ac:function(){return x},
fd:function(){return F},$b:function(){return w},ic:function(){x=A=!0;var a=c.createFramebuffer();c.bindFramebuffer(c.FRAMEBUFFER,a);var b=c.createTexture();c.bindTexture(c.TEXTURE_2D,b);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST);c.texImage2D(c.TEXTURE_2D,0,J.o()&&c.RGBA32F?c.RGBA32F:c.RGBA,1,1,0,c.RGBA,c.FLOAT,null);c.framebufferTexture2D(v.$(),c.COLOR_ATTACHMENT0,c.TEXTURE_2D,b,0);var d=c.checkFramebufferStatus(v.Na());
d!==c.FRAMEBUFFER_COMPLETE&&(A=!1);c.texImage2D(c.TEXTURE_2D,0,J.o()&&c.RGBA16F?c.RGBA16F:c.RGBA,1,1,0,c.RGBA,J.ua(),null);c.framebufferTexture2D(v.$(),c.COLOR_ATTACHMENT0,c.TEXTURE_2D,b,0);d=c.checkFramebufferStatus(v.Na());d!==c.FRAMEBUFFER_COMPLETE&&(x=!1);c.bindTexture(c.TEXTURE_2D,null);c.bindFramebuffer(c.FRAMEBUFFER,null);c.deleteTexture(b);c.deleteFramebuffer(a)},hc:function(){var a=v.a({width:1});a.Gb();var b=S.a({width:1,isFloat:!0,la:3});a.j();b.j();c.flush();c.checkFramebufferStatus(v.Na())!==
c.FRAMEBUFFER_COMPLETE?(S.Nc(),F=!1):F=!0;a.remove();b.remove()},gc:function(){J.ic();if(!A&&!x)return!1;J.hc();return!0}};return J}(),ya=function(){var a=!1,b=[.8,1,.8,1],d=0,e,g=new Uint8Array(4),f=b.concat(b,b,b),k=!0,n={l:function(){function b(a,b,d,e){c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,e?c.NEAREST_MIPMAP_NEAREST:c.LINEAR);try{var f=c.getError();f!==c.NO_ERROR&&console.log("GLERR in test_mipmapping() :",f);c.texImage2D(c.TEXTURE_2D,0,a,2,2,0,c.RGBA,b,d);f=c.getError();if(f!==c.NO_ERROR)return!1}catch(W){return!1}e&&
c.generateMipmap(c.TEXTURE_2D);L.fa();L.g(!1,!0);c.readPixels(0,0,1,1,c.RGBA,c.UNSIGNED_BYTE,g);f=c.getError();f===c.INVALID_OPERATION&&"undefined"!==typeof c.PIXEL_PACK_BUFFER&&(c.bindBuffer(c.PIXEL_PACK_BUFFER,null),c.readPixels(0,0,1,1,c.RGBA,c.UNSIGNED_BYTE,g),f=c.getError());return f!==c.NO_ERROR?!1:0!==g[0]}function l(a){return z.bb()&&b(y,c.FLOAT,new Float32Array(f),a)?(d=3,!0):!1}function n(a){return z.ac()?b(w,z.ua(),new Uint16Array(f),a)||b(w,c.FLOAT,new Float32Array(f),a)?(d=2,!0):!1:!1}
z.gb();z.La();var y=c.RGBA,w=c.RGBA;if(za.o()){var A=c.RGBA32F;A&&(y=A);(A=c.RGBA16F)&&(w=A)}L.l();v.reset();v.I();c.viewport(0,0,1,1);m.set("s0");a=!0;e=c.createTexture();c.activeTexture(c.TEXTURE0);c.bindTexture(c.TEXTURE_2D,e);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST);if(n(!0)||l(!0))return!0;k=!1;if(n(!1)||l(!1))return!0;if(za.o()){w=y=c.RGBA;if(n(!0)||l(!0))return!0;
k=!1;if(n(!1)||l(!1))return!0}return!1},bc:function(){return k},xd:function(){return d},Hd:function(){a||n.l();return 3===d},Ac:function(){a||n.l();return 2===d}};return n}(),Da={a:function(a){var b=S.a(a.alpha),d=S.a(a.beta);return{jc:function(){b.b(1);d.b(2)}}}},Ga={a:function(a){var b=a.Vc;b.index=a.index;b.V=a.V;b.parent=a.parent;switch(b.type){case "input":a=Ea.a(b);break;default:a=Fa.a(b)}return a}},Ea={a:function(a){"undefined"===typeof a.sift&&(a.sift=!1);"undefined"===typeof a.DWT&&(a.DWT=
!1);"undefined"===typeof a.blur&&(a.blur=!1);"undefined"===typeof a.siftOutWidth&&(a.siftOutWidth=!1);"undefined"===typeof a.filterBank&&(a.filterBank=!1);"undefined"===typeof a.poolType&&(a.poolType="max");"undefined"===typeof a.postpreprocessing&&(a.postpreprocessing="copy");"undefined"===typeof a.density&&(a.density=1);a.filterBank&&(FilterBank.Qd(a.poolType,a.postpreprocessing),FilterBank.Pd(a.density));var b=!1;if(a.mask){b=!0;SETTINGS&&void 0!==SETTINGS.Wb&&(a.mask=SETTINGS.Wb+a.mask);var d=
S.a({isFloat:!1,url:a.mask})}var e=!1,g="undefined"!==typeof a.preprocessing?a.preprocessing:!1,f=!1;a.sift?Sift.l({wc:c,ha:!1,width:a.size,Ld:a.siftOutWidth}):a.DWT&&DWT.l({wc:c,ha:!1,width:a.size});switch(g){case "sobel":var k="s30";f=!0;break;case "meanNormalization":k="s31";f=!0;break;case "grayScale":k="s29";f=!1;break;case "copy":k="s0";break;case "inputLightRegulation":k="s29";Ha.l({width:a.size,yb:a.nBlurPass,zc:!1});e=!0;break;case "direct":case "none":k=!1;break;default:k="s3"}b&&(k+="Mask");
if(a.blur)var n=S.a({isFloat:!1,isPot:!1,width:a.size});var q=S.a({isFloat:!1,isPot:!1,width:a.size}),l={v:function(){return a.sift?Sift.aa():a.filterBank?FilterBank.aa():a.size},aa:function(){return l.v()},tc:function(){return a.sift?Sift.ka():a.DWT?DWT.ka():a.filterBank?FilterBank.ka():e?Ha.ka():q},F:function(){v.S();a.blur&&(n.w(),m.set("s41"),m.P("u7",1/a.size,1/a.size),L.g(!1,!0),n.b(0));k&&(m.set(k),f&&m.B("u28",1/a.size),q.w(),b&&d.b(1),L.g(!1,!1),q.b(0),e?Ha.ya(q):a.sift?(m.R(),Sift.ya()):
a.DWT?(m.R(),DWT.ya(4)):a.filterBank&&(m.R(),FilterBank.ya(q)))}};return l}},Fa={a:function(a){"undefined"===typeof a.disableNormalize&&(a.disableNormalize=!1);var b=[],d=[],e,g,f=!1,k,n=!0,q,l,t=a.isReorganize?a.isReorganize:!1,y=a.kernelsNumber?!0:!1,w=a.dynPelu?Da.a(a.dynPelu):!1,A=w?!0:!1,x={isEnabled:!1},F;if("softmax"===a.type){a.activation="softmax";a.size=Math.pow(2,Math.ceil(Math.log(Math.sqrt(a.num_classes))/Math.log(2)));a.sparsity="undefined"!==typeof a.sparsity?a.sparsity:a.V.aa();a.gain=
"undefined"!==typeof a.gain?a.gain:1;m.L("s20",[{type:"1f",name:"u10",value:a.gain}]);var D=S.a({isFloat:!0,isPot:!1,width:a.size}),H=S.a({isFloat:!0,isPot:!1,width:a.size,isMipmap:!0});n=!1;var J=new Uint8Array(Math.pow(4*a.size,2)),W;for(W=0;W<a.size*a.size;++W){var Z=W<a.num_classes?255:0;J[4*W]=Z;J[4*W+1]=Z;J[4*W+2]=Z;J[4*W+3]=Z}var na=S.a({isFloat:!1,isPot:!1,width:a.size,array:J})}else a.cost?(a.sparsity="undefined"!==typeof a.sparsity?a.sparsity:a.V.aa(),n=!1):"full"===a.connectivityUp&&(a.sparsity=
a.V.aa());var qa={elu:"s15",elu01:"s16",relu:"s14",arctan:"s18",sigmoid:"s13",copy:"s0",softplus:"s19",softmax:"s20",dynPelu:"s17"}[a.activation],ra=a.sparsity*a.sparsity,T=!1,N=a.size;if(a.maxPooling){switch(a.maxPooling.size){case 2:var K="s32";break;case 4:K="s33"}T=!0;N/=a.maxPooling.size;var ca=S.a({isFloat:!0,isPot:!1,width:N})}var M=void 0!==a.Gc&&a.Gc?!0:!1,aa=null,ea=null,X=null;M&&(aa="s42"+a.index.toString(),m.nb("s42",aa,[((a.normalization.n-1)/2).toFixed(1)]),m.L(aa,[{type:"1i",name:"u1",
value:0},{type:"2f",name:"u7",value:[1/a.size,1/a.size]},{type:"1f",name:"u6",value:a.normalization.alpha},{type:"1f",name:"u9",value:a.normalization.beta},{type:"1f",name:"u32",value:a.normalization.k}]),ea=S.a({isFloat:!0,isPot:!0,width:a.size}),X=S.a({isFloat:!0,isPot:!0,width:a.size}));var R,la,u,G;n&&(G=S.a({isFloat:!0,isPot:!1,width:a.size}));var B=S.a(a.bias),C,h={v:function(){return a.size},aa:function(){return N},lb:function(){return a.num_classes},Yb:function(a){F.b(a)},Jc:function(){a.remap&&
a.remap.isEnabled&&(x={isEnabled:!0,Cc:S.a({isFloat:!1,isFlipY:!1,array:new Uint8Array(a.remap.maskTexture.data),width:a.remap.maskTexture.width,isPot:!1}),layers:a.remap.layers.map(function(b){return a.parent.sc(b)}),depth:a.remap.depth})},Pc:function(){switch(a.connectivityUp){case "gaussian":C=Ia.a(a.connectivity);break;case "direct":C=Ja.a(a.connectivity);break;case "square":C=Ka.a(a.connectivity);break;case "squareFast":C=La.a(a.connectivity,a.activation);break;case "full":C=Ma.a(a.connectivity);
break;case "conv":l=a.kernelsNumber,C=Na.a(a.connectivity),t&&(q=S.a({width:N,isFloat:!0,isFlipY:!1,isPot:!1}))}if(C.W){var b=a.size*a.sparsity;la=Math.log(b/a.size)/Math.log(2);R=S.a({isMipmap:!0,isFloat:!0,isPot:!0,width:b,vb:la});u=S.a({isFloat:!0,isPot:!0,width:a.size})}},F:function(b,d){F=b;C.W?(R.w(),y&&B.b(2),C.F(x),R.b(0),R.ib(la),u.w(),y?m.set("s0"):(m.set("s28"),m.B("u27",ra),B.b(1)),R.ab(la,0),L.g(!1,!1),m.set(qa),M?ea.j():G.j(),u.b(0),A&&w.jc(),L.g(!1,!1)):(G.w(),B.b(1),C.F());M&&(m.set(aa),
X.j(),ea.b(0),L.g(!1,!1),m.set("s43"),m.B("u6",1),G.j(),X.b(1),L.g(!1,!1));if(n)return T?(ca.w(),G.b(0),m.set(K),m.P("u7",1/a.size,1/a.size),L.g(!1,!1),d=ca):d=G,d.b(0),t&&(q.j(),m.set("s22"),m.P("u14",l,N/l),L.g(!1,!1),d=q,q.b(0)),d;if("softmax"===a.type){m.set("s20");G.b(0);D.j();L.g(!1,!1);a.disableNormalize?b=D:(m.set("s2"),D.b(0),na.b(1),H.j(),L.g(!1,!1),m.set("s0"),g.w(),H.b(0),H.ib(!1),L.g(!1,!1),m.set("s21"),e.w(),H.ab(!1,0),m.B("u12",G.uc()),g.b(1),L.g(!1,!1),b=e);if(d){switch(f){case "cpuRGBAAvg":break;
default:var r=h.Eb(b)}return r}return!1}if(a.cost){m.set("gpuRawAvg"===f?"s8":"s7");d=G;a.disableNormalize||(m.B("u4",1/a.size),e.w(),G.b(0),L.g(!1,!1),d=e);switch(f){case "cpuRGBA2Float":d.eb();r=h.Eb(d);k(r);break;case "gpuRawAvg":case "gpuRaw":d.b(0),k(d)}return!1}},dc:function(h){h&&"undefined"!==typeof h.Db&&(f=h.Db,k=h.Ic);G=S.a({isFloat:!0,isPot:!0,isMipmap:"softmax"===a.type,width:a.size});"softmax"===a.type&&(g=S.a({isFloat:!0,isPot:!0,width:1}));var n=0,l=0,y="undefined"!==typeof a.num_classes&&
a.num_classes?a.num_classes:a.size*a.size;for(h=0;h<y;++h)b.push(n+(a.size-1-l)*a.size),d.push([-1,-1,-1,-1]),++n,n===a.size&&(n=0,++l);a.disableNormalize||(e=S.a({isFloat:!0,isPot:!0,width:a.size}))},Eb:function(a){a.eb();var e=a.Fb();b.forEach(function(a,b){d[b][0]=e[0][a];d[b][1]=e[1][a];d[b][2]=e[2][a];d[b][3]=e[3][a]});return d}};a.V&&h.Pc(a.V);return h}};
function Oa(){var a={Ed:!1},b,d,e;a||(a={});this.sc=function(a){return b[a]};this.Mc=function(a){var f=!1;b=a.map(function(a,b){return f=a=Ga.a({index:b,parent:this,Vc:a,V:f})});d=b[0];e=b[b.length-1];b.forEach(function(a,b){0!==b&&a.Jc()})};this.F=function(a,d){var e=d;b.forEach(function(b){e=b.F(e,a)});return e};this.jb=function(){return d.v()};this.ka=function(){return e.tc()};this.Oc=function(a){e.dc(a)};this.lb=function(){return e.lb()}}
var Ja={a:function(a){var b=S.a(a.weights);delete a.weights.data;return{W:!0,ja:function(){return 1},vc:function(){return b},F:function(){m.set("s27");b.b(1);L.g(!1,!1)}}}},Ma={a:function(a){var b=a.fromLayerSize,d=S.a(a.weights);return{W:!0,ja:function(){return b},F:function(b){if(b.isEnabled){m.set("s25");b.Cc.b(3);var e,f=Math.min(b.layers.length,b.depth);for(e=0;e<f;++e)b.layers[e].Yb(4+e)}else m.set("s24");m.B("u18",a.toLayerSize);d.b(1);L.g(!1,!1)}}}},Ia={a:function(a){var b=a.toSparsity*a.toLayerSize,
d=b/a.fromLayerSize,e=S.a(a.weights);S.a({width:b,isFloat:!0,array:new Float32Array(a.fromBindings),isPot:!0});var g=S.a({width:b,isFloat:!0,array:new Float32Array(a.toBindings),isPot:!0});return{W:!0,ja:function(){return d},F:function(){m.set("s23");e.b(1);g.b(2);L.g(!1,!0)}}}},Ka={a:function(a){var b=a.fromLayerSize,d=a.toLayerSize,e=a.toSparsity,g=e*d,f=g/b,k=b/d,n,q,l,t,y=0,w=0,A=0,x=Array(e*d*e*d*4),F=Array(e*d*e*d*4),D=Array(b*b);for(n=0;n<D.length;++n)D[n]=0;var H=Math.floor(e/2),J=.5/d,W=
.5/b,Z=.5/g;for(n=0;n<d;++n)for(q=0;q<d;++q){var na=Math.round(n*k);var qa=Math.round(q*k);var ra=n/d;var T=q/d;ra+=J;T+=J;for(l=0;l<e;++l)for(t=0;t<e;++t){var N=y/g;var K=w/g;var ca=na+l-H;var M=qa+t-H;0>ca&&(ca+=b);0>M&&(M+=b);ca>=b&&(ca-=b);M>=b&&(M-=b);var aa=ca/b;var ea=M/b;K=1-K-1/g;aa+=W;ea+=W;N+=Z;K+=Z;var X=n*e+l,R=q*e+t;R=d*e-R-1;X=R*d*e+X;x[4*X]=N;x[4*X+1]=K;x[4*X+2]=aa;x[4*X+3]=ea;aa=D[M*b+ca]++;ea=aa%f;ca=ca*f+ea;M=M*f+(aa-ea)/f;M=b*f-1-M;M=M*b*f+ca;F[4*M]=N;F[4*M+1]=K;F[4*M+2]=ra;F[4*
M+3]=T;++y>=g&&(y=0,++w);++A}}var la=S.a(a.weights);S.a({width:g,isFloat:!0,array:new Float32Array(F),isPot:!0});F=null;var u=S.a({width:g,isFloat:!0,array:new Float32Array(x),isPot:!0});x=null;return{W:!0,ja:function(){return f},F:function(){m.set("s23");la.b(1);u.b(2);L.g(!1,!1)}}}},Na={a:function(a){var b=a.kernelsNumber,d=a.toSparsity,e=d*a.toLayerSize/a.fromLayerSize,g=S.a(a.weights);return{W:!0,ja:function(){return e},Ad:function(){return d},vc:function(){return g},F:function(){m.set("s26");
m.B("u24",b);m.B("u25",d);m.B("u18",a.toLayerSize);m.B("u26",a.fromLayerSize);g.b(1);L.g(!1,!1)}}}},La={a:function(a,b){var d=a.fromLayerSize,e=a.toLayerSize,g=a.toSparsity,f=a.stride?a.stride:1,k=g*e/d,n=e<d,q=d/e,l=S.a(a.weights),t="s44"+[d.toString(),e.toString(),g.toString(),f.toString(),b].join("_");m.mc(t)||(a=ua(b),e=[{type:"1f",name:"u18",value:e},{type:"1f",name:"u31",value:f}],n&&e.push({type:"1f",name:"u26",value:d}),d=[(n?k:g).toFixed(1),a],n&&d.push(q.toFixed(1)),m.nb(n?"s38":"s37",t,
d),m.L(t,e.concat([{type:"1i",name:"u16",value:0},{type:"1i",name:"u23",value:1},{type:"1i",name:"u15",value:3}])));return{W:!1,ja:function(){return k},F:function(){m.set(t);l.b(3);L.g(!1,!1)}}}},Ha=function(){var a,b,d,e,g,f,k,n,q;return{l:function(l){a=l.yb?l.yb:3;b=l.width?l.width:64;e=l.zc?!0:!1;l={isFloat:!1,width:b,isPot:!1,isFlipY:!1};g=S.a(l);f=S.a(l);k=S.a(l);n=S.a(l);q=S.a({isFloat:!0,width:b,isPot:!1,isFlipY:!1});d=1/b},ya:function(b){m.set("s35");for(var l=0;l<a;++l)g.j(),m.P("u7",d,0),
L.g(e,!1),f.j(),g.b(0),m.P("u7",0,d),L.g(e,!1),f.b(0);m.set("s34");n.j();b.b(0);L.g(e);m.set("s35");for(l=0;l<a;++l)k.j(),n.b(0),m.P("u7",d,0),L.g(e,!1),n.j(),k.b(0),m.P("u7",0,d),L.g(e,!1);m.set("s36");q.j();b.b(0);f.b(1);n.b(2);L.g(e,!1);q.b(0)},ka:function(){return q}}}();function Pa(a,b){a[b]=!0;a.setAttribute(b,"true")}
function Qa(){var a=!1,b=navigator.userAgent||navigator.vendor||window.opera;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(b)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(b.substr(0,
4)))a=!0;return a}function Ra(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}function Sa(){var a=navigator.userAgent.toLowerCase();return-1==a.indexOf("safari")||-1<a.indexOf("chrome")?!1:!0}function Ta(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?!0:!1}
function Ua(a){if(!a)return a;var b=!1;if(a.video){var d=function(a){var b={};"undefined"!==typeof a.min&&(b.min=a.min);"undefined"!==typeof a.max&&(b.max=a.max);"undefined"!==typeof a.ideal&&(b.ideal=a.ideal);return b};b={};"undefined"!==typeof a.video.width&&(b.width=d(a.video.width));"undefined"!==typeof a.video.height&&(b.height=d(a.video.height));"undefined"!==typeof a.video.facingMode&&(b.facingMode=a.video.facingMode)}b={audio:a.audio,video:b};"undefined"!==typeof a.deviceId&&(b.deviceId=a.deviceId);
return b}function Va(a){var b=a.video.width;a.video.width=a.video.height;a.video.height=b;return a}
function Wa(a){function b(a){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(b,d){return Math.abs(b-a)-Math.abs(d-a)})}function d(b){e.push(b(Ua(a)))}var e=[];if(!a||!a.video)return e;if(a.video.width&&a.video.height){if(a.video.width.ideal&&a.video.height.ideal)for(var g=b(a.video.width.ideal).slice(0,3),f=b(a.video.height.ideal).slice(0,3),k=0,n;k<g.length;++k){n=g[k];for(var q=0,l;q<f.length;++q)if(l=f[q],n!==a.video.width.ideal||l!==a.video.height.ideal){var t=Math.max(n,
l)/Math.min(n,l);t<4/3-.1||t>16/9+.1||d(function(a){a.video.width.ideal=n;a.video.height.ideal=l;return a})}}d(function(a){return Va(a)})}a.video.facingMode&&(d(function(a){delete a.video.facingMode;return a}),a.video.width&&a.video.height&&d(function(a){Va(a);delete a.video.facingMode;return a}));a.video.width&&a.video.height&&(a.video.width.ideal&&a.video.height.ideal&&d(function(a){delete a.video.width.ideal;delete a.video.height.ideal;return a}),d(function(a){delete a.video.width;delete a.video.height;
return a}));e.push({audio:a.audio,video:!0});return e}function Xa(a){try{var b=window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(e){b=window.innerHeight>window.innerWidth}if(b&&a&&a.video){b=a.video.width;var d=a.video.height;b&&d&&b.ideal&&d.ideal&&b.ideal>d.ideal&&(a.video.height=b,a.video.width=d)}}
function Ya(a){a.volume=0;Pa(a,"muted");if(Sa()){if(1===a.volume){var b=function(){a.volume=0;window.removeEventListener("mousemove",b,!1);window.removeEventListener("touchstart",b,!1)};window.addEventListener("mousemove",b,!1);window.addEventListener("touchstart",b,!1)}setTimeout(function(){a.volume=0;Pa(a,"muted")},5)}}
function Za(a,b,d,e){navigator.mediaDevices.getUserMedia(e).then(function(e){function f(){setTimeout(function(){if(a.currentTime){var f=a.videoWidth,g=a.videoHeight;if(0===f||0===g)d("VIDEO_NULLSIZE");else{f=a.videoWidth;g=a.videoHeight;f&&(a.style.width=f.toString()+"px");g&&(a.style.height=g.toString()+"px");f={cc:null,Uc:null,Dc:null};try{var q=e.getVideoTracks()[0];q&&(f.Dc=q,f.cc=q.getCapabilities(),f.Uc=q.getSettings())}catch(l){}Ra()?a.parentNode&&null!==a.parentNode?(b(a,e,f),setTimeout(function(){a.play()},
100)):(document.body.appendChild(a),Ya(a),b(a,e,f),setTimeout(function(){a.style.transform="scale(0.0001,0.0001)";a.style.position="fixed";a.style.bottom="0px";a.style.right="0px";Ya(a);setTimeout(function(){a.play()},100)},80)):b(a,e,f)}}else d("VIDEO_NOTSTARTED")},200)}"undefined"!==typeof a.srcObject?a.srcObject=e:(a.src=window.URL.createObjectURL(e),a.videoStream=e);Ya(a);a.addEventListener("loadeddata",function(){var b=a.play();Ya(a);"undefined"===typeof b?f():b.then(function(){f()}).catch(function(){d("VIDEO_PLAYPROMISEREJECTED")})},
!1)}).catch(d)}
function $a(a,b,d){var e=Ta()?document.createElement("video"):!1;e?Ta()?(d&&d.video&&(Ra()?Xa(d):Qa()&&Xa(d),d.video.width&&d.video.width.ideal&&(e.style.width=d.video.width.ideal+"px"),d.video.height&&d.video.height.ideal&&(e.style.height=d.video.height.ideal+"px")),Pa(e,"autoplay"),Pa(e,"playsinline"),d&&d.audio?e.volume=0:Pa(e,"muted"),Za(e,a,function(){function g(d){if(0===d.length)b("INVALID_FALLBACKCONSTRAINS");else{var f=d.shift();Za(e,a,function(){g(d)},f)}}var f=Wa(d);g(f)},d)):b&&b("MEDIASTREAMAPI_NOTFOUND"):
b&&b("VIDEO_NOTPROVIDED")}function ab(a){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return a(!1,"NOTSUPPORTED"),!1;navigator.mediaDevices.enumerateDevices().then(function(b){(b=b.filter(function(a){return a.kind&&-1!==a.kind.toLowerCase().indexOf("video")&&a.label&&a.deviceId}))&&b.length&&0<b.length?a(b,!1):a(!1,"NODEVICESFOUND")}).catch(function(){a(!1,"PROMISEREJECTED")})}
window.JEEFACEFILTERAPI=function(){var a,b,d,e,g,f,k,n,q,l,t,y,w,A;function x(a){if(C!==B.pause){var b=C===B.play?r.Ca:u.Vb;ja=setTimeout(J.bind(null,a),b)}}function F(){if(-1!==[B.play,B.U].indexOf(C))return!1;C=B.play;E.timestamp=Date.now();ia&&window.cancelAnimationFrame(ia);J(0)}function D(a,b,d,e,f){a=4*(3*b+a)+d;return e+(Q[a]/255+Q[a+12]/65025)*(f-e)}function H(){v.S();L.reset();S.reset();m.R();m.fb();c.disable(c.DEPTH_TEST);c.disable(c.BLEND);L.fa();m.na()}function J(){if(C!==B.pause){m.fb();
L.reset();L.fa();c.disable(c.DEPTH_TEST);v.S();m.na();if(!h.Qa){var a=h.element.currentTime-h.xa;0>a&&(h.xa=h.element.currentTime);1E3*a<u.ad||(h.oa.refresh(),h.xa+=a,m.set("s47"),h.pa.w(),h.oa.b(0),L.g(!1,!1))}if(p.M.length>E.H)p.M.splice(0,p.M.length-E.H);else for(;p.M.length<E.H;)p.M.push(0);if(1!==p.i)if(V.every(T)){var b=0,d=0;for(a=0;a<V.length;++a)V[a].detected>b&&(b=V[a].detected,d=0);for(a=0;a<E.H;++a)p.M[a]=d}else{a=0;b=!1;for(d=p.ub;a<E.H;++a){if(T(V[d]))if(b){do++d===p.i&&(d=0);while(T(V[d]))
}else b=!0;p.M[a]=d++;d>=p.i&&(d=0)}p.ub=d}for(var e=0;e<E.H;++e)p.Z=p.M[e],p.Sa=(.5+p.Z)/p.i,p.rb=p.M.lastIndexOf(p.Z)===e,m.set("s48"),1!==p.i&&m.B("u36",p.Sa),P.w(),h.pa.b(0),O.b(1),L.g(!1,!1),P.b(0),ka.F(!1,P);a=Date.now();E.ia=a-E.timestamp;E.timestamp=a;I.nDetectsPerLoop||(a=u.Da,E.Ab=E.zb/E.ia,E.Bb=E.Ab*a+E.Bb*(1-a),E.Cb=1E3/E.ia,E.ca=E.Cb*u.Da+E.ca*(1-u.Da),E.ca>u.Y[1]?(E.H=Math.min(E.H+1,u.qa[1]),E.ca=(u.Y[0]+u.Y[1])/2):E.ca<u.Y[0]&&(E.H=Math.max(E.H-1,u.qa[0]),E.ca=(u.Y[0]+u.Y[1])/2));v.I();
c.viewport(0,0,3,2*p.i);m.set("s46");O.b(0);L.g(!1,!1);c.readPixels(0,0,3,2*p.i,c.RGBA,c.UNSIGNED_BYTE,Q);for(a=0;a<p.i;++a){b=Y[a];var f=[a];d=V[a];var g=Aa[a],k=2*a;b.x=D(0,k,1,-1,1);b.y=D(0,k,2,-1,1);b.K=D(0,k,3,0,1);b.Ta=D(1,k,0,-fa[0],fa[0]);b.Ua=D(1,k,1,-fa[1],fa[1]);b.Va=D(1,k,2,-fa[2],fa[2]);b.ta=D(1,k,3,0,1);for(e=0;e<u.wa;++e)b.hb[e]=u.nc[e](D(2,k,e,0,1));f.fc=b.ta-d.detected;f.Ja=b.x-d.x;f.Ka=b.y-d.y;f.Ia=b.K-d.s;f.Fa=b.Ta-d.rx;f.Ga=b.Ua-d.ry;f.Ha=b.Va-d.rz;e=Math.sqrt(f.Ja*f.Ja+f.Ka*f.Ka+
f.Ia*f.Ia)/E.ia;f=Math.sqrt(f.Fa*f.Fa+f.Ga*f.Ga+f.Ha*f.Ha)/E.ia;e=1-ta(ba.translationFactorRange[0],ba.translationFactorRange[1],e);f=1-ta(ba.rotationFactorRange[0],ba.rotationFactorRange[1],f);f=e*f*ta(ba.qualityFactorRange[0],ba.qualityFactorRange[1],b.ta);k=g[++Ba[a]%g.length]=f;for(e=0;e<g.length;++e)k=Math.min(k,g[e]);k=Math.max(.5,k);f=Math.min(k,f);g=oa(ba.alphaRange[1],ba.alphaRange[0],Math.pow(f,u.Tb));d.x=oa(d.x,b.x,g);d.y=oa(d.y,b.y,g);d.s=oa(d.s,b.K,g);d.rx=oa(d.rx,b.Ta,g);d.ry=oa(d.ry,
b.Ua,g);d.rz=oa(d.rz,b.Va,g);d.detected=oa(d.detected,b.ta,u.Rb);g=Math.max(g,u.Sb);for(e=0;e<u.wa;++e)d.expressions[e]=oa(d.expressions[e],b.hb[e],g);b.ma=d.detected>u.wb?b.ma+1:0}v.Zc();v.reset();S.reset();c.enable(c.DEPTH_TEST);r.sa&&(1===p.i?r.sa(V[0]):r.sa(V));c.disable(c.BLEND);if(C===B.play||C===B.U)ia=window.requestAnimationFrame(x)}}function W(){function a(a){for(var b=0,d=[];b<p.i;++b)d.push(Object.assign({},a));return d}h.pa=S.a({isPot:!1,isLinear:!0,isFloat:!1,width:U,height:ha});P=S.a({isPot:!0,
isFloat:!1,width:ka.jb()});var b={width:3,height:p.i,isFloat:!0,isPot:!1,array:function(a){for(var b=new Float32Array(a.length*p.i),d=0,e;d<p.i;++d)for(e=0;e<a.length;++e)b[d*a.length+e]=a[e];return b}(new Float32Array([0,I.borderWidth,I.borderHeight,0,0,0,0,0,0,0,0,0]))};O=Ca.a(b);Q=new Uint8Array(8*b.width*p.i);Y=a({ta:0,x:0,y:0,K:1,Ta:0,Ua:0,Va:0,hb:new Float32Array(u.wa),ma:0});V=a({detected:0,x:0,y:0,s:1,rx:0,ry:0,rz:0,expressions:new Float32Array(u.wa)});a({fc:0,Ja:0,Ka:0,Ia:0,Fa:0,Ga:0,Ha:0})}
function Z(){m.L("s48",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u34",value:1},{type:"2f",name:"u35",value:ma},{type:"1f",name:"u36",value:.5}]);m.L("s49",[{type:"1i",name:"u37",value:0},{type:"1i",name:"u34",value:1},{type:"1f",name:"u40",value:u.Yc},{type:"1f",name:"u41",value:u.Nb},{type:"1f",name:"u42",value:u.Mb},{type:"3f",name:"u39",value:[u.Xa[0]*ma[0],u.Xa[1]*ma[1],u.Xa[2]]},{type:"1f",name:"u36",value:.5},{type:"1f",name:"u43",value:1}]);var a=[{type:"1i",name:"u37",value:0}];m.L("s50",
a);m.L("s51",a);m.L("s46",[{type:"1i",name:"u34",value:0},{type:"1f",name:"u45",value:ma[0]},{type:"2f",name:"u44",value:[0,.5/p.i]}])}function na(){var h=ka.jb(),p=U/h;f=I.minScale*p;k=I.maxScale*p;n=(1-2*I.borderWidth)/I.nStepsX;q=(1-2*I.borderHeight)/I.nStepsY;l=(k-f)/I.nStepsScale;t=I.borderWidth;y=I.borderHeight;w=1-I.borderWidth;A=1-I.borderHeight;ma=[h/U,h/ha];a=I.borderWidth;b=I.borderHeight;d=f;e=I.borderWidth;g=I.borderHeight;da=f}function qa(a){var b=r.Za;"JSON"!==b.toUpperCase().split(".").pop()&&
(b+=u.save);pa(b,function(b){b=JSON.parse(b);b.exportData&&b.exportData.thetaXYZfactor&&(fa=b.exportData.thetaXYZfactor);a(b)})}function ra(){if(za.l({ha:r.N,width:U,height:ha,debug:!1,Hc:function(){R("GLCONTEXT_LOST")},antialias:!0,premultipliedAlpha:!0})){if(za.yc())return!0;R("GL_INCOMPATIBLE");return!1}R("GL_INCOMPATIBLE");return!1}function T(a){return a.detected<u.wb}function N(a,b,d,e){return d>a?Math.max(0,a+b/2-(d-e/2)):Math.max(0,d+e/2-(a-b/2))}function K(){return Y.some(function(a,b){if(b===
p.Z)return!1;b=Y[p.Z];if(b.ma>a.ma||3>a.ma||N(b.x/2,b.K,a.x/2,a.K)<u.xb*b.K)return!1;var d=U/ha;return N(b.y/2,b.K*d,a.y/2,a.K*d)>u.xb*b.K*d})}function ca(){var h=p.Z;O.Qc(1);1!==p.i&&(c.viewport(0,0,3,p.i),m.set("s0"),m.Hb("u1",1),L.g(!1,!1),m.Hb("u1",0));c.viewport(0,h,1,1);m.set("s49");1!==p.i&&m.B("u36",p.Sa);if(1<p.i){var r=K()?0:1;m.B("u43",r)}m.Sc("u38",e,g,da);L.g(!1,!1);p.rb&&(c.viewport(1,h,1,1),m.set("s50"),L.g(!1,!1),c.viewport(2,h,1,1),m.set("s51"),L.g(!1,!1));d+=l;d>k&&(a+=n,d=f,a>w&&
(a=t,b+=q,b>A&&(b=y)));e=a+.8*(Math.random()-.5)*n;g=b+.8*(Math.random()-.5)*q;da=d+.8*(Math.random()-.5)*l}function M(){m.L("s47",[{type:"1i",name:"u1",value:0},{type:"mat2",name:"u33",value:h.C}])}function aa(){h.A[0]=.5;h.A[1]=.5;var a=h.O[1]/h.O[0],b=za.J()/za.v();90===Math.abs(G.rotate)&&(a=1/a);a>b?h.A[1]*=b/a:h.A[0]*=a/b;h.C[0]=0;h.C[1]=0;h.C[2]=0;h.C[3]=0;switch(G.rotate){case 0:h.C[0]=h.A[0];h.C[3]=h.A[1];break;case 180:h.C[0]=-h.A[0];h.C[3]=-h.A[1];break;case 90:h.C[1]=h.A[0];h.C[2]=-h.A[1];
break;case -90:h.C[1]=-h.A[0],h.C[2]=h.A[1]}}function ea(a,b){if(C===B.error)return!1;var d=a.videoHeight;h.O[0]=a.videoWidth;h.O[1]=d;h.element=a;b&&b();return!0}function X(a,b,d){a&&a();a={video:{facingMode:{ideal:G.facingMode},width:{min:G.minWidth,max:G.maxWidth,ideal:G.idealWidth},height:{min:G.minHeight,max:G.maxHeight,ideal:G.idealHeight}},audio:!1};G.deviceId&&(a.deviceId=G.deviceId);$a(function(a){b&&b(a);d(a)},function(){R("WEBCAM_UNAVAILABLE")},a)}function R(a){C!==B.error&&(C=B.error,
r.ga_&&r.ga_(a))}function la(a,b){for(var d in a)"undefined"!==typeof b[d]&&(a[d]=b[d]);b===I&&I.nDetectsPerLoop&&(E.H=I.nDetectsPerLoop,E.zb=I.nDetectsPerLoop)}var u={save:"NNC.json",Ub:0,Vb:25,Da:.2,Y:[45,60],cd:1/3.5,qa:[2,5],Kc:{minScale:.15,maxScale:.6,borderWidth:.2,borderHeight:.2,nStepsX:6,nStepsY:5,nStepsScale:3,nDetectsPerLoop:0},Xa:[.092,.092,.3],Yc:50,xb:.12,wb:.6,Ec:8,Nb:.75,Mb:1,Wc:{translationFactorRange:[.0015,.005],rotationFactorRange:[.003,.02],qualityFactorRange:[.9,
.98],alphaRange:[.05,1]},Xc:[.65,1,.262],Rb:.2,Tb:2,Sb:.1,Fc:8,wa:1,nc:[ta.bind(null,.3,.75)],ad:20},G={facingMode:"user",idealWidth:800,idealHeight:600,minWidth:480,maxWidth:1280,minHeight:480,maxHeight:1280,rotate:0},B={Bc:-1,error:-2,mb:0,play:1,pause:2,U:3},C=B.mb,h={Qa:!1,element:!1,oa:!1,pa:!1,O:[0,0],A:[.5,.5],C:[.5,0,0,.5],xa:0},r={ga_:!1,sa:!1,Za:"./",N:!1,Ca:u.Ub},ka,I=Object.create(u.Kc),ba=Object.create(u.Wc);var da=d=g=e=b=a=k=f=A=w=y=t=l=q=n=0;var U,ha,ma,P,O,Q,Y,V,ja=!1,ia=!1,fa=u.Xc,
p={i:1,Z:0,M:[0],rb:!1,ub:0,Sa:0},E={ia:0,timestamp:0,Ab:0,Bb:0,H:u.qa[0],zb:u.qa[0],Cb:0,ca:0,jd:1},Aa=[],Ba=[];return{init:function(a){function b(){C!==B.error&&2===++e&&(aa(),h.oa=S.a({D:h.element,isPot:!1,isFloat:!1,isFlipY:!0}),M(),r.ga_&&(r.ga_(!1,{GL:c,canvasElement:r.N,videoTexture:h.pa.get(),maxFacesDetected:p.i}),H()),F())}if(C!==B.mb)return a.callbackReady&&a.callbackReady("ALREADY_INITIALIZED"),!1;C=B.Bc;a.callbackReady&&(r.ga_=a.callbackReady);a.callbackTrack&&(r.sa=a.callbackTrack);"undefined"!==
typeof a.animateDelay&&(r.Ca=a.animateDelay);"undefined"!==typeof a.NNCpath&&(r.Za=a.NNCpath);"undefined"!==typeof a.maxFacesDetected&&(p.i=Math.max(1,a.maxFacesDetected));if(p.i>u.Ec)return R("MAXFACES_TOOHIGH"),!1;if(!a.canvasId)return R("NO_CANVASID"),!1;r.N=document.getElementById(a.canvasId);if(!r.N)return R("INVALID_CANVASID"),!1;U=r.N.width;ha=r.N.height;if(!U||!ha)return R("INVALID_CANVASDIMENSIONS"),!1;for(var d=0;d<p.i;++d)Aa.push(new Float32Array(u.Fc)),Ba.push(0);a.scanSettings&&la(I,
a.scanSettings);a.stabilizationSettings&&la(ba,a.stabilizationSettings);var e=0;if(a.videoSettings&&a.videoSettings.videoElement)ea(a.videoSettings.videoElement,b);else{if(a.videoSettings)for(var f in a.videoSettings)G[f]=a.videoSettings[f];X(a.onWebcamAsk,a.onWebcamGet,function(a){ea(a,b)})}qa(function(a){if(!ra())return!1;ka=new Oa;ka.Mc(a.layers);ka.Oc({Db:"gpuRawAvg",Ic:ca});m.Qb([{id:"s47",name:"_",X:"attribute vec2 a0;uniform mat2 u33;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=vec2(.5,.5)+u33*a0;}",
ra:["a0"],da:[2],c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:["u1","u33"],precision:"lowp"},{id:"s48",name:"_",c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",X:"attribute vec2 a0;uniform sampler2D u34;uniform vec2 u35;uniform float u36;varying vec2 vv0;void main(){vec4 a=texture2D(u34,vec2(.17,u36));vec2 b=a.gb,c=a.a*u35;vv0=b+a0*.5*c,gl_Position=vec4(a0,0.,1.);}",ra:["a0"],da:[2],f:["u1","u34","u35","u36"],precision:"lowp"},
{id:"s49",name:"_",c:"uniform sampler2D u37,u34;uniform vec3 u38,u39;uniform float u40,u41,u42,u36,u43;const vec4 k=vec4(1.,1.,1.,1.),l=vec4(0.,0.,0.,0.),e=vec4(.25,.25,.25,.25);void main(){vec4 c=texture2D(u37,vec2(.5,.5)),d=texture2D(u37,vec2(.75,.5));float g=dot(e,texture2D(u37,vec2(.75,.75))),h=dot(e,texture2D(u37,vec2(0.,.5))),i=dot(e,texture2D(u37,vec2(.25,.5)));vec4 a=texture2D(u34,vec2(.17,u36));float b=dot(c,e),j=dot(d,e);bool f=b>u41&&b>j+u42;f?a.r=2.:a.r>u40?a.r=0.:a.r>1.9?a.r+=1.:0.,a.r*=u43;if(a.r<.9)a=vec4(1.,u38);else a.r*=step(1.9,a.r),a.gba+=vec3(g,h,i)*u39*a.a;gl_FragColor=a;}",
X:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",f:"u37 u34 u38 u40 u39 u43 u41 u42 u36".split(" ")},{id:"s50",name:"_",X:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",c:"uniform sampler2D u37;const vec4 e=vec4(.25,.25,.25,.25);const vec3 g=vec3(.5,.5,.5);void main(){float a=dot(e,texture2D(u37,vec2(0.,.75))),b=dot(e,texture2D(u37,vec2(.25,.75))),c=dot(e,texture2D(u37,vec2(.5,.75))),d=dot(e,texture2D(u37,vec2(.5,.5)));vec3 f=vec3(a,b,c)*.5+g;gl_FragColor=vec4(f,d);}",
f:["u37"]},{id:"s51",name:"_",X:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",c:"uniform sampler2D u37;const vec4 e=vec4(.25,.25,.25,.25);void main(){float a=dot(e,texture2D(u37,vec2(.25,.25)));gl_FragColor=vec4(a,0.,0.,0.);}",f:["u37"]},{id:"s46",name:"_",c:"uniform sampler2D u34;uniform vec2 u44;uniform float u45;varying vec2 vv0;void main(){float g=step(.5,mod(gl_FragCoord.y+1.5,2.)),c=step(.33,vv0.x);vec4 a=texture2D(u34,vv0+u44);a.a=mix(a.a*u45,a.a,c);vec4 d=floor(255.*a),f=255.*(255.*a-d),b=mix(d,f,g)/255.;b.x=mix(step(a.x,1.5),b.x,c),gl_FragColor=b;}",
f:["u34","u45","u44"]}]);W();na();Z();b()});return!0},toggle_pause:function(a){if(-1!==[B.play,B.pause,B.U].indexOf(C))return a?-1===[B.play,B.U].indexOf(C)?a=!1:(ja&&(clearTimeout(ja),ja=!1),ia&&(window.cancelAnimationFrame(ia),ia=!1),C=B.pause,a=!0):a=F(),a},toggle_slow:function(a){-1!==[B.play,B.pause,B.U].indexOf(C)&&-1!==[B.play,B.U].indexOf(C)&&(C=a?B.U:B.play)},set_animateDelay:function(a){r.Ca=a},resize:function(){var a=r.N.width,b=r.N.height;if(a===U&&b===ha)return!1;U=a;ha=b;na();Z();aa();
M();return!0},set_inputTexture:function(a,b,d){h.O[0]=b;h.O[1]=d;h.Qa=!0;aa();H();M();m.set("s47");h.pa.w();c.activeTexture(c.TEXTURE0);c.bindTexture(c.TEXTURE_2D,a);L.g(!0,!0)},reset_inputTexture:function(){h.O[0]=h.element.videoWidth;h.O[1]=h.element.videoHeight;h.Qa=!1;aa();M()},get_videoDevices:function(a){return ab(a)},set_scanSettings:function(a){la(I,a);na();Z()},set_stabilizationSettings:function(a){la(ba,a)}}}();
;return JEEFACEFILTERAPI;})();