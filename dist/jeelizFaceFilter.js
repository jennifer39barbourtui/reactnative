 /**
 * Jeeliz Face Filter - https://github.com/jeeliz/jeelizFaceFilter
 *
 * Copyright 2018 Jeeliz ( https://jeeliz.com )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

window['JEEFACEFILTERAPI']=(function(){"use strict";function ia(a,b,f){return a*(1-f)+b*f}function la(a,b){var f=new XMLHttpRequest;f.open("GET",a,!0);f.withCredentials=!1;f.onreadystatechange=function(){4===f.readyState&&200===f.status&&b(f.responseText)};f.send()}function ma(a,b,f){return Math.min(Math.max((f-a)/(b-a),0),1)}function na(a,b){var f=b%8;return a[(b-f)/8]>>7-f&1}
function oa(a){var b=JSON.parse(a);a=b.ne;var f=b.nf,g=b.n,h="undefined"===typeof btoa?Buffer.from(b.data,"base64").toString("latin1"):atob(b.data),d=h.length,p;b=new Uint8Array(d);for(p=0;p<d;++p)b[p]=h.charCodeAt(p);h=new Float32Array(g);d=new Float32Array(f);p=a+f+1;var e,n;for(e=0;e<g;++e){var l=p*e;var u=0===na(b,l)?1:-1;var w=l+1;var q=1,x=0;for(n=w+a-1;n>=w;--n)x+=q*na(b,n),q*=2;n=x;w=b;q=l+1+a;x=d;var B=0,y=x.length;for(l=q;l<q+y;++l)x[B]=na(w,l),++B;for(l=w=0;l<f;++l)w+=d[l]*Math.pow(2,-l-
1);u=0===w&&0===n?0:u*(1+w)*Math.pow(2,1+n-Math.pow(2,a-1));h[e]=u}return h}
var m=function(){function a(a,b){a=c.createShader(a);c.shaderSource(a,b);c.compileShader(a);return c.getShaderParameter(a,c.COMPILE_STATUS)?a:!1}function b(b,e,d){b=a(c.VERTEX_SHADER,b,d+" VERTEX");e=a(c.FRAGMENT_SHADER,e,d+" FRAGMENT");d=c.createProgram();c.attachShader(d,b);c.attachShader(d,e);c.linkProgram(d);return d}function f(a){void 0===a.T&&(a.T="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");void 0===a.ka&&(a.ka=["a0"]);
void 0===a.ca&&(a.ca=[2]);void 0===a.precision&&(c.getShaderPrecisionFormat&&10<=c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.MEDIUM_FLOAT).precision?a.precision="mediump":a.precision="highp");void 0===a.v&&(a.v=[]);a.id=p++;void 0!==a.xc&&a.xc.forEach(function(b,e){a.c=a.c.replace(b,a.vb[e])});a.Ra=0;a.ca.forEach(function(b){a.Ra+=4*b});a.va=b(a.T,"precision "+a.precision+" float;\n"+a.c,a.name);console.log(a.name);a.m={};a.f.forEach(function(b){a.m[b]=c.getUniformLocation(a.va,b)});a.attributes=
{};a.da=[];a.ka.forEach(function(b){var e=c.getAttribLocation(a.va,b);a.attributes[b]=e;a.da.push(e)});if(a.h){c.useProgram(a.va);d=a;h=a.id;for(var e in a.h)c.uniform1i(a.m[e],a.h[e])}a.pd=!0}function g(a){pa.Dc(T);h!==a.id&&(T.R(),h=a.id,d=a,c.useProgram(a.va),a.da.forEach(function(a){0!==a&&c.enableVertexAttribArray(a)}))}var h=-1,d=!1,p=0,e=!1,n=["u0"],l=["u1"],u={u0:0},w={u1:0},q={u0:0,u2:1},x={u3:0},B={u4:0,u5:1},y={s0:{name:"_",c:"uniform sampler2D u0;varying vec2 vv0;void main(){gl_FragColor=texture2D(u0,vv0);}",
f:n,h:u},s1:{name:"_",c:"uniform sampler2D u0;varying vec2 vv0;void main(){gl_FragColor=texture2D(u0,vv0);}",f:n,h:u,precision:"lowp"},s2:{name:"_",c:"uniform sampler2D u0,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u0,vv0);gl_FragColor=a*b;}",f:["u0","u2"],h:q},s3:{name:"_",c:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a.r*f;}",f:n,h:u},s4:{name:"_",c:"uniform sampler2D u0,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u0,vv0);gl_FragColor=a.a*b.r*f;}",
f:["u0","mask"],h:q},s5:{name:"_",c:"uniform sampler2D u0;varying vec2 vv0;void main(){gl_FragColor=texture2D(u0,vec2(1.-vv0.x,vv0.y));}",f:n,h:u},s6:{name:"_",c:"uniform sampler2D u0;varying vec2 vv0;void main(){gl_FragColor=texture2D(u0,vec2(vv0.x,1.-vv0.y));}",f:n,h:u},s7:{name:"_",c:"uniform sampler2D u1;uniform float u6;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*u6;}",f:["u1","u6"],h:w},s8:{name:"_",c:"uniform sampler2D u1;uniform float u6;varying vec2 vv0;const vec4 g=vec4(.25,.25,.25,.25),e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);float b=dot(a*u6,g);gl_FragColor=b*e;}",
f:["u1","u6"],h:w},s9:{name:"_",c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u0,vv0));gl_FragColor=a*e;}",f:n,h:u},s10:{name:"_",c:"uniform sampler2D u0,u7;uniform float u8;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0),b=texture2D(u7,vv0);gl_FragColor=mix(b,a,u8*f);}",f:["u0","u7","u8"],h:{u0:0,u7:1}},s11:{name:"_",c:"uniform sampler2D u0;uniform vec2 u9;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u0,vv0+u9)+texture2D(u0,vv0+u9*vec2(1.,-1.))+texture2D(u0,vv0+u9*vec2(-1.,-1.))+texture2D(u0,vv0+u9*vec2(-1.,1.)));}",
f:["u0","u9"],h:u},s12:{name:"_",c:"uniform sampler2D u0;uniform vec4 u10;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 k(float a){if(a==0.)return vec4(0.,0.,0.,0.);float l=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),m=c+127.,b=(a/exp2(c)-1.)*8388608.,d=m/2.,n=fract(d)*2.,o=floor(d),p=e(b,0.,8.),q=e(b,8.,16.),r=n*128.+e(b,16.,23.),j=l+o;return vec4(p,q,r,j)/255.;}void main(){float a=dot(texture2D(u0,vv0),u10);gl_FragColor=k(a);}",
f:["u0","u10"],h:u},s13:{name:"_",c:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",f:l,h:w,v:l,A:!0},s14:{name:"_",c:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=max(e,a);}",f:l,h:w,v:l,A:!0},s15:{name:"_",c:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=mix(exp(-abs(a))-e,a,step(0.,a));}",
f:l,h:w,v:l,A:!0},s16:{name:"_",c:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0),b=exp(-abs(a))-e;gl_FragColor=mix(.1*b,a,step(0.,a));}",f:l,h:w,v:l,A:!0},s17:{name:"_",c:"uniform sampler2D u1,u8,u11;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0),c=texture2D(u8,vv0),d=texture2D(u11,vv0),b=a/d;gl_FragColor=c*mix(exp(-abs(b))-f,b,step(0.,a));}",f:["u1","u8","u11"],h:{u1:0,u8:1,u11:2},v:l,A:!0},s18:{name:"_",
c:"uniform sampler2D u1;const float e=3.141593;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=atan(e*a)/e;gl_FragColor=b;}",f:l,h:w,v:l,A:!0},s19:{name:"_",c:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(.5,.5,.5,.5);void main(){vec4 a=texture2D(u1,vv0),b=log(e+a);gl_FragColor=b;}",f:l,h:w,v:l,A:!0},s20:{name:"_",c:"uniform sampler2D u1;uniform float gain;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=exp(a);}",f:["u1","u12"],h:w,v:l,A:!0},
s21:{name:"_",c:"uniform sampler2D u1,u13;uniform float u14;const vec2 f=vec2(.5,.5);const float g=1e-5;const vec4 h=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u13,f);float b=u14*u14;vec4 c=max(b*a,g*h);gl_FragColor=texture2D(u1,vv0)/c;}",f:["u1","u15","u14"],h:{u1:0,u15:1}},s22:{name:"_",c:"uniform sampler2D u0;uniform vec2 u16;varying vec2 vv0;void main(){float a=u16.x*u16.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u16.y),g=floor(u16.x*fract(b*u16.y)),f=(g*u16.y+d)/a;gl_FragColor=texture2D(u0,f+c/a);}",
f:["u0","u16"],h:u},s23:{name:"_",c:"uniform sampler2D u17,u5,u18;varying vec2 vv0;void main(){vec4 a=texture2D(u18,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u17,b),e=texture2D(u5,c);gl_FragColor=d*e;}",f:["u17","u5","u18"],v:["u17","u5","u18"],h:{u5:0,u17:1,u18:2},A:!0},s24:{name:"_",c:"uniform float u19;uniform sampler2D u17,u5;varying vec2 vv0;void main(){vec2 a=fract(vv0*u19);vec4 b=texture2D(u17,vv0),c=texture2D(u5,a);gl_FragColor=b*c;}",f:["u5","u17","u19"],v:["u5","u17"],h:{u5:0,u17:1},A:!0},
s25:{name:"_",c:"uniform float u19;uniform sampler2D u17,u5,u20,u21,u22,u23;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 i=vv0*u19,m=floor(i),c=i-m;vec4 n=texture2D(u17,vv0),d=texture2D(u5,c),a=texture2D(u23,vv0);a=a*255.;vec4 o=texture2D(u20,c),p=texture2D(u21,c),q=texture2D(u22,c),j=step(-g,-a),b=e-j,k=b*step(-e-g,-a);b*=e-k;vec4 h=b*step(-2.*e-g,-a);b*=e-h;vec4 l=b;d=j*d+k*o+h*p+l*q,gl_FragColor=n*d;}",f:"u17 u5 u19 u23 u20 u21 u22".split(" "),h:{u5:0,
u17:1,u23:3,u20:4,u21:5,u22:6},A:!0},s26:{name:"_",c:"uniform sampler2D u17,u5,u24;uniform float u19,u25,u26,u27;varying vec2 vv0;const vec2 j=vec2(1.,1.);void main(){vec2 a=floor(u25*vv0),g=u25*vv0-a;float b=u19/u25;vec2 c=floor(g*b),d=g*b-c,h=(a+d)/u25;float l=u25*u27/u19;vec2 m=l*c,i=(m+d*u26)/u27,e=step(i,j);vec4 n=texture2D(u17,h),o=texture2D(u5,i),p=n*o*e.x*e.y,k=texture2D(u24,h);gl_FragColor=p*u26*u26+k;}",f:"u17 u5 u19 u25 u26 u27 u24".split(" "),v:["u17","u5","u24"],h:{u5:0,u17:1,u24:2},
A:!0},s27:{name:"_",c:"uniform sampler2D u17,u5;varying vec2 vv0;void main(){vec4 a=texture2D(u17,vv0),b=texture2D(u5,vv0);gl_FragColor=a*b;}",f:["u17","u5"],v:["u17","u5"],h:{u5:0,u17:1},A:!0},s28:{name:"_",c:"uniform sampler2D u0,u24;uniform float u28;varying vec2 vv0;void main(){gl_FragColor=texture2D(u24,vv0)+u28*texture2D(u0,vv0);}",f:["u0","u24","u28"],v:["u0","u24"],A:!0,h:{u0:0,u24:1}},s29:{name:"_",c:"varying vec2 vv0;uniform sampler2D u0;const vec4 g=vec4(1.,1.,1.,1.),e=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=dot(a,e)*g;}",
f:n,h:u,precision:"lowp"},s30:{name:"_",c:"varying vec2 vv0;uniform sampler2D u0,u2;uniform float u29;const vec4 g=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u0,vec2(vv0.x-u29,vv0.y-u29))*1.,a-=texture2D(u0,vec2(vv0.x-u29,vv0.y))*2.,a-=texture2D(u0,vec2(vv0.x-u29,vv0.y+u29))*1.,a+=texture2D(u0,vec2(vv0.x+u29,vv0.y-u29))*1.,a+=texture2D(u0,vec2(vv0.x+u29,vv0.y))*2.,a+=texture2D(u0,vec2(vv0.x+u29,vv0.y+u29))*1.;vec4 b=vec4(0.);b-=texture2D(u0,vec2(vv0.x-u29,vv0.y-u29))*1.,b-=texture2D(u0,vec2(vv0.x,vv0.y-u29))*2.,b-=texture2D(u0,vec2(vv0.x+u29,vv0.y-u29))*1.,b+=texture2D(u0,vec2(vv0.x-u29,vv0.y+u29))*1.,b+=texture2D(u0,vec2(vv0.x,vv0.y+u29))*2.,b+=texture2D(u0,vec2(vv0.x+u29,vv0.y+u29))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u0,vv0).a),f=texture2D(u2,vv0);gl_FragColor=f.a*e.r*g;}",
f:["u0","u2","u29"],h:q},s31:{name:"_",c:"varying vec2 vv0;uniform sampler2D u0,u2;uniform float u29;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float i=0.;vec2 l=k*u29,b,c;float d,a,g=0.;for(float f=-4.;f<=4.;f+=1.)for(float e=-4.;e<=4.;e+=1.)b=vec2(f,e),d=length(b)/2.,a=exp(-d*d),c=vv0+l*b,a=1.,i+=a*texture2D(u0,c).r,g+=a;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u0,c).r-i/g)*j;}",f:["u0","u2","u29"],h:q},s32:{name:"_",c:"uniform sampler2D u3;uniform vec2 u9;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 h=vec2(.5,.5),i=vec2(1.,0.),j=vec2(0.,1.);void main(){vec2 a=vv0-u9*h;vec4 b=texture2D(u3,a),c=texture2D(u3,a+u9*i),d=texture2D(u3,a+u9*j),k=texture2D(u3,a+u9),l=e(b,c),g=e(d,k);gl_FragColor=e(l,g);}",
f:["u3","u9"],h:x},s33:{name:"_",c:"uniform sampler2D u3;uniform vec2 u9;varying vec2 vv0;const vec2 j=vec2(1.,0.),k=vec2(0.,1.),l=vec2(2.,0.),m=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u3,a),c=texture2D(u3,a+u9*j),d=texture2D(u3,a+u9*k),g=texture2D(u3,a+u9),i=e(b,c),h=e(d,g);return e(i,h);}void main(){vec2 a=vv0+u9*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u9*l),d=f(a+u9*2.),g=f(a+u9*m),i=e(b,c),h=e(d,g);gl_FragColor=e(i,h);}",f:["u3","u9"],h:x},
s34:{name:"_",c:"uniform sampler2D u0;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*a;}",f:["u0"],h:u,precision:"lowp"},s35:{name:"_",c:"uniform sampler2D u0;uniform vec2 u9;varying vec2 vv0;const vec4 g=vec4(1.,1.,1.,1.);const float d=15444.;void main(){vec4 a=1001./d*texture2D(u0,vv0-3.*u9)+2002./d*texture2D(u0,vv0-2.*u9)+3003./d*texture2D(u0,vv0-u9)+3432./d*texture2D(u0,vv0)+3003./d*texture2D(u0,vv0+u9)+2002./d*texture2D(u0,vv0+2.*u9)+1001./d*texture2D(u0,vv0+3.*u9);gl_FragColor=a;}",
f:["u9","u0"],h:u,precision:"lowp"},s36:{name:"_",c:"uniform sampler2D u0,u30,u31;varying vec2 vv0;const vec4 g=vec4(1.,1.,1.,1.);const float h=.1;void main(){vec4 a=texture2D(u30,vv0),b=texture2D(u31,vv0),c=texture2D(u0,vv0),d=max(g*h,b-a*a),f=sqrt(d);gl_FragColor=(c-a)/f;}",f:["u0","u30","u31"],h:{u0:0,u30:1,u31:2},A:!0},s37:{name:"_",c:"uniform sampler2D u17,u32,u33;varying vec2 vv0;void main(){vec4 a=texture2D(u33,vv0);vec2 b=a.rg;vec4 c=texture2D(u17,b);vec2 d=a.ba;vec4 e=texture2D(u32,d);gl_FragColor=c*e;}",
f:["u17","u32","u33"],h:{u32:0,u33:1,u17:2}},s38:{name:"_",c:"uniform sampler2D u17,u32;uniform float u19,u27;varying vec2 vv0;void main(){float d=u19*u27;vec2 b=vv0*u27,c=floor(b),a=b-c;a.y=1.-a.y;vec2 g=floor(a*u19),h=(g*u27+c)/d;vec4 i=texture2D(u17,h),e=texture2D(u32,a);gl_FragColor=i*e;}",f:["u17","u32","u19","u27"],h:{u32:0,u17:1}},s39:{name:"_",c:"uniform sampler2D u17,u32;uniform float u19,u27,u26,u25;varying vec2 vv0;const vec2 e=vec2(1.,1.);void main(){float k=u19*u26/u27,d=u25*u27/u19,l=k/u25,m=u19/u25,n=k/u25;vec2 g=e-vv0,c=floor(u27*g),h=u27*g-c,i=floor(u25*h),j=u25*h-i,q=j*l,r=floor(c/d),s=c-r*d,t=floor(c/d),u=t+n*j,a=(u+i*m)/u19;a=mod(a,e),a=e-a;vec2 v=s-d*q,b=mod(v/u26,e);b=e-b,b+=vec2(1./u19,1./u19),b=mod(b,e);vec2 w=floor(a*u25),f=(w+b)/u25;f=mod(f,e);vec4 x=texture2D(u17,f),o=texture2D(u32,a);gl_FragColor=x*o;}",
f:"u17 u32 u19 u27 u26 u25".split(" "),h:{u32:0,u17:1}},s40:{name:"_",c:"uniform sampler2D u1,u34,u35;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u34,vv0),c=texture2D(u35,vv0);gl_FragColor=a-b;}",f:["u1","u34","u35"],h:{u1:0,u34:1,u35:2}},s41:{name:"_",c:"uniform sampler2D u1,u34,u35;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u34,vv0),c=texture2D(u35,vv0);gl_FragColor=c*(a-b);}",f:["u1","u34","u35"],h:{u1:0,u34:1,u35:2}},
s42:{name:"_",c:"uniform sampler2D u4,u5;uniform float u28;varying vec2 vv0;void main(){vec4 a=u28*texture2D(u4,vv0),b=texture2D(u5,vv0);gl_FragColor=a;}",f:["u4","u5","u28"],h:B},s43:{name:"_",c:"uniform sampler2D u4,u5;uniform float u28;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);vec4 g(vec4 b){vec4 a=exp(-b);return a/((f+a)*(f+a));}void main(){vec4 a=u28*texture2D(u4,vv0),b=texture2D(u5,vv0);gl_FragColor=a*g(b);}",f:["u4","u5","u28"],h:B},s44:{name:"_",c:"uniform sampler2D u4,u5;uniform float u28;varying vec2 vv0;const vec4 g=vec4(0.,0.,0.,0.),i=vec4(1.,1.,1.,1.);const float h=1e-4;vec4 f(vec4 a){return h+step(g,a);}void main(){vec4 a=u28*texture2D(u4,vv0),b=texture2D(u5,vv0);gl_FragColor=a*f(b);}",
f:["u4","u5","u28"],h:B},s45:{name:"_",c:"uniform sampler2D u4,u5;uniform float u28;varying vec2 vv0;const vec4 g=vec4(1.,1.,1.,1.);vec4 f(vec4 a){vec4 b=exp(-abs(a));return mix(b,g,step(0.,a));}void main(){vec4 a=u28*texture2D(u4,vv0),b=texture2D(u5,vv0);gl_FragColor=a*f(b);}",f:["u4","u5","u28"],h:B},s46:{name:"_",c:"uniform sampler2D u4,u5;uniform float u28;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);const float h=3.141593;vec4 g(vec4 b){vec4 a=b*h;return e/(e+a*a);}void main(){vec2 a=vv0;vec4 b=u28*texture2D(u4,a),c=texture2D(u5,a);gl_FragColor=b*g(c);}",
f:["u4","u5","u28"],h:B}},F={},T={Ga:function(){return e},l:function(){if(!e){for(var a in y)f(y[a],a);m.set("s0");c.enableVertexAttribArray(0);a=qa.l();e=!0;return a}},Fb:function(a){a.forEach(function(a){T.Eb(a)})},Eb:function(a){y[a.id]=a;f(a,a.id)},oc:function(a,b,e){b||(b=a);y[b]=Object.create(F[a]);F[a].vb&&F[a].vb.forEach(function(a,d){y[b].c=y[b].c.replace(new RegExp(a,"g"),e[d])});f(y[b],b)},set:function(a){g(y[a])},ad:function(){return d.Yc},R:function(){-1!==h&&(h=-1,d.da.forEach(function(a){0!==
a&&c.disableVertexAttribArray(a)}))},Pa:function(){var a=0;d.da.forEach(function(b,e){e=d.ca[e];c.vertexAttribPointer(b,e,c.FLOAT,!1,d.Ra,a);a+=4*e})},Zb:function(){c.enableVertexAttribArray(0)},wa:function(){c.vertexAttribPointer(d.da[0],2,c.FLOAT,!1,8,0)},Gd:function(a,b){c.uniform1i(d.m[a],b)},B:function(a,b){c.uniform1f(d.m[a],b)},H:function(a,b,e){c.uniform2f(d.m[a],b,e)},Hd:function(a,b){c.uniform2fv(d.m[a],b)},Id:function(a,b){c.uniform3fv(d.m[a],b)},Ec:function(a,b,e,g){c.uniform3f(d.m[a],
b,e,g)},xb:function(a,b){c.uniform4fv(d.m[a],b)},Jd:function(a,b){c.uniformMatrix2fv(d.m[a],!1,b)},Kd:function(a,b){c.uniformMatrix3fv(d.m[a],!1,b)},Ld:function(a,b){c.uniformMatrix4fv(d.m[a],!1,b)},L:function(a,b){T.set(a);b.forEach(function(a){switch(a.type){case "4f":c.uniform4fv(d.m[a.name],a.value);break;case "3f":c.uniform3fv(d.m[a.name],a.value);break;case "2f":c.uniform2fv(d.m[a.name],a.value);break;case "1f":c.uniform1f(d.m[a.name],a.value);break;case "1i":c.uniform1i(d.m[a.name],a.value);
break;case "mat2":c.uniformMatrix2fv(d.m[a.name],!1,a.value);break;case "mat3":c.uniformMatrix3fv(d.m[a.name],!1,a.value);break;case "mat4":c.uniformMatrix4fv(d.m[a.name],!1,a.value)}})}};return T}(),c,ra=function(){var a=!1,b=!1,f=!1,g=!1,h=!0,d=!1,p={w:function(){return a.width},I:function(){return a.height},bd:function(){return a},$c:function(){return c},o:function(){return h},flush:function(){c.flush()},fc:function(){d||(d=new Uint8Array(a.width*a.height*4));c.readPixels(0,0,a.width,a.height,
c.RGBA,c.UNSIGNED_BYTE,d);return d},dd:function(){return a.toDataURL("image/jpeg")},ed:function(){r.F();b||(b=document.createElement("canvas"),f=b.getContext("2d"));b.width=a.width;b.height=a.height;var e=p.fc(),d=f.createImageData(b.width,b.height),g,h,w=b.width,q=b.height,x=d.data;for(h=0;h<q;++h){var B=q-h-1;for(g=0;g<w;++g){var y=4*(h*w+g);var F=4*(B*w+g);x[y]=e[F];x[y+1]=e[F+1];x[y+2]=e[F+2];x[y+3]=e[F+3]}}f.putImageData(d,0,0);return b.toDataURL("image/png")},cd:function(e){!b&&e&&(b=document.createElement("canvas"),
f=b.getContext("2d"));var d=e?b:document.createElement("canvas");d.width=a.width;d.height=a.height;(e?f:d.getContext("2d")).drawImage(a,0,0);return d},l:function(b){b.Ub&&!b.fa?a=document.getElementById(b.Ub):b.fa&&(a=b.fa);a||(a=document.createElement("canvas"));a.width=b&&void 0!==b.width?b.width:512;a.height=b&&void 0!==b.height?b.height:512;"undefined"===typeof b&&(b={});void 0===b.premultipliedAlpha&&(b.premultipliedAlpha=!1);void 0===b.kb&&(b.kb=!0);void 0===b.antialias&&(b.antialias=!1);var d=
{antialias:b.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:b.premultipliedAlpha,stencil:!1,depth:b.kb};(c=a.getContext("webgl2",d))?h=!0:((c=a.getContext("webgl",d))||(c=a.getContext("experimental-webgl",d)),h=!1);if(!c)return!1;(g=c.getExtension("WEBGL_lose_context"))&&a.addEventListener("webglcontextlost",b.uc,!1);if(!t.l()||!t.Qb()&&h)return!1;c.clearColor(0,0,0,0);c.disable(c.DEPTH_TEST);c.disable(c.BLEND);c.disable(c.DITHER);c.disable(c.STENCIL_TEST);c.GENERATE_MIPMAP_HINT&&
c.hint(c.GENERATE_MIPMAP_HINT,c.FASTEST);c.disable(c.SAMPLE_ALPHA_TO_COVERAGE);c.disable(c.SAMPLE_COVERAGE);return!0},nc:function(){if(!m.l())return!1;c.depthFunc(c.LEQUAL);c.clearDepth(1);return!0}};return p}(),pa=function(){var a="undefined"===typeof m?JEShaders:m;return{Dc:function(b){a!==b&&(a.R(),a=b)},Ga:function(){return a.Ga()},wa:function(){a.wa()},Pa:function(){a.Pa()},R:function(){a.R()},set:function(b){a.set(b)}}}(),R=function(){var a,b,f=0,g=-2,h=-2,d=!1,p={reset:function(){h=g=-2},l:function(){d||
(a=c.createBuffer(),c.bindBuffer(c.ARRAY_BUFFER,a),c.bufferData(c.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),c.STATIC_DRAW),b=c.createBuffer(),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,b),c.bufferData(c.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),c.STATIC_DRAW),p.la(),d=!0)},a:function(a){var b=f++,d=a.Z.length,e=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,e);c.bufferData(c.ARRAY_BUFFER,a.Ab instanceof Float32Array?a.Ab:new Float32Array(a.Ab),c.STATIC_DRAW);g=b;if(a.Z){var p=c.createBuffer();c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,
p);if(65536>a.Z.length){var q=Uint16Array;var x=c.UNSIGNED_SHORT;var B=2}else q=Uint32Array,x=c.UNSIGNED_INT,B=4;c.bufferData(c.ELEMENT_ARRAY_BUFFER,a.Z instanceof q?a.Z:new q(a.Z),c.STATIC_DRAW);h=b}var y={Pb:function(a){g!==b&&(c.bindBuffer(c.ARRAY_BUFFER,e),g=b);a&&pa.Pa()},Nb:function(){h!==b&&(c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,p),h=b)},bind:function(a){y.Pb(a);y.Nb()},Vc:function(){c.drawElements(c.TRIANGLES,d,x,0)},Wc:function(a,b){c.drawElements(c.TRIANGLES,a,x,b*B)},remove:function(){c.deleteBuffer(e);
a.Z&&c.deleteBuffer(p);y=null}};return y},la:function(){-1!==g&&(c.bindBuffer(c.ARRAY_BUFFER,a),g=-1);-1!==h&&(c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,b),h=-1)},g:function(a,b){a&&R.la();b&&pa.wa();c.drawElements(c.TRIANGLES,3,c.UNSIGNED_SHORT,0)},ec:function(){c.deleteBuffer(a);c.deleteBuffer(b)}};return p}(),r=function(){var a,b,f,g=!1,h={u:-2,cc:1};return{l:function(){if(!g){a=c.createFramebuffer();var d=t.o();b=d&&c.DRAW_FRAMEBUFFER?c.DRAW_FRAMEBUFFER:c.FRAMEBUFFER;f=d&&c.READ_FRAMEBUFFER?c.READ_FRAMEBUFFER:
c.FRAMEBUFFER;g=!0}},hd:function(){return b},cb:function(){return f},oa:function(){return c.FRAMEBUFFER},kd:function(){return h},Zc:function(){return a},a:function(d){void 0===d.jb&&(d.jb=!1);var g=d.ia?d.ia:!1,e=d.width,f=void 0!==d.height?d.height:d.width,l=a,u=!1,w=!1,q=0;g&&(e=e?e:g.w(),f=f?f:g.I());var x={Na:function(){w||(l=c.createFramebuffer(),w=!0,q=h.cc++)},Db:function(){x.Na();x.i();u=c.createRenderbuffer();c.bindRenderbuffer(c.RENDERBUFFER,u);c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,
e,f);c.framebufferRenderbuffer(b,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,u);c.clearDepth(1)},bind:function(a,d){q!==h.u&&(c.bindFramebuffer(b,l),h.u=q);g&&g.i();d&&c.viewport(0,0,e,f);a&&c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT)},Nc:function(){q!==h.u&&(c.bindFramebuffer(b,l),h.u=q)},clear:function(){c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT)},Rc:function(){c.clear(c.COLOR_BUFFER_BIT)},Sc:function(){c.clear(c.DEPTH_BUFFER_BIT)},Fc:function(){c.viewport(0,0,e,f)},i:function(){q!==h.u&&(c.bindFramebuffer(b,
l),h.u=q)},rtt:function(a){g=a;h.u!==q&&(c.bindFramebuffer(c.FRAMEBUFFER,l),h.u=q);a.i()},F:function(){c.bindFramebuffer(b,null);h.u=-1},resize:function(a,b){e=a;f=b;u&&(c.bindRenderbuffer(c.RENDERBUFFER,u),c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,e,f))},remove:function(){c.bindFramebuffer(b,l);c.framebufferTexture2D(b,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,null,0);u&&c.framebufferRenderbuffer(b,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,null);c.bindFramebuffer(b,null);c.deleteFramebuffer(l);u&&
c.deleteRenderbuffer(u);x=null}};d.jb&&x.Db();return x},F:function(){c.bindFramebuffer(b,null);h.u=-1},Ic:function(){c.bindFramebuffer(b,null);c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT);c.viewport(0,0,t.w(),t.I());h.u=-1},reset:function(){h.u=-2},V:function(){0!==h.u&&(c.bindFramebuffer(b,a),h.u=0)},clear:function(){c.viewport(0,0,t.w(),t.I());c.clear(c.COLOR_BUFFER_BIT)}}}(),V=function(){function a(a){c.bindTexture(c.TEXTURE_2D,a)}function b(a){Q[0]=a;a=ja[0];var b=a>>16&32768,H=a>>12&2047,d=
a>>23&255;return 103>d?b:142<d?b|31744|((255==d?0:1)&&a&8388607):113>d?(H|=2048,b|(H>>114-d)+(H>>113-d&1)):b=(b|d-112<<10|H>>1)+(H&1)}function f(a){var H=new Uint16Array(a.length);a.forEach(function(a,d){H[d]=b(a)});return H}function g(){if(void 0!==ba)return ba;if(!pa.Ga()||!q)return!0;var a=W.a({isFloat:!1,D:!0,array:f([1,1,1,1]),width:1});r.F();c.viewport(0,0,1,1);c.clearColor(0,0,0,0);c.clear(c.COLOR_BUFFER_BIT);pa.set("s0");a.Ua(0);R.g(!1,!0);var b=new Uint8Array(4);c.readPixels(0,0,1,1,c.RGBA,
c.UNSIGNED_BYTE,b);ba=.9<b[0];a.remove();r.V();return ba}var h=0,d,p=0,e,n=!1,l,u,w,q=!1,x=!1,B,y,F,T=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],P=!1,ea=!1,Q=new Float32Array(1),ja=new Int32Array(Q.buffer),ba=void 0,W={l:function(){if(!q){u=[c.RGB,!1,c.RGB,c.RGBA];w=[c.RGB,!1,c.RGB,c.RGBA];d=[c.TEXTURE0,c.TEXTURE1,c.TEXTURE2,c.TEXTURE3,c.TEXTURE4,c.TEXTURE5,c.TEXTURE6,c.TEXTURE7];P="undefined"!==typeof JEContext;ea="undefined"!==typeof t;P&&JEContext.wd()&&d.push(c.TEXTURE8,c.TEXTURE9);e=[-1,-1,-1,
-1,-1,-1,-1,-1];l=[c.UNSIGNED_BYTE,c.FLOAT,c.FLOAT];if(!n){for(var a=new Float32Array(16384),b=0;16384>b;++b)a[b]=2*Math.random()-1;n={random:W.a({isFloat:!0,isPot:!0,array:a,width:64}),zb:W.a({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}q=!0}},mc:function(){W.Jc()},nd:function(){return n.zb},Jc:function(){l[1]=t.pa()},zc:function(){w=u=[c.RGBA,c.RGBA,c.RGBA,c.RGBA]},yd:function(a,b){m.set("s1");r.F();var H=a.w(),d=a.I();c.viewport(0,0,H,d);a.b(0);R.g(!1,!1);c.readPixels(0,0,H,
d,c.RGBA,c.UNSIGNED_BYTE,b)},dc:function(b,d,e){c.activeTexture(c.TEXTURE0);h=0;var H=c.createTexture();a(H);var g=t.o()&&c.RGBA32F?c.RGBA32F:c.FLOAT;d=d instanceof Float32Array?d:new Float32Array(d);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST);c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,e);c.texImage2D(c.TEXTURE_2D,0,c.RGBA,b.w(),b.I(),0,c.RGBA,g,d);a(null);c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1);r.V();m.set("s0");b.j();c.clearColor(0,
0,0,0);c.clear(c.COLOR_BUFFER_BIT);a(H);R.g(!0,!1);c.deleteTexture(H)},a:function(b){function n(){a(I);X&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,X);b.isPot?(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,b.lb?c.MIRRORED_REPEAT:c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,b.M?c.MIRRORED_REPEAT:c.REPEAT)):(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE));b.ra&&"undefined"!==typeof JESETTINGS&&c.texParameterf(c.TEXTURE_2D,
JEContext.fd().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.Lc);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,b.isLinear?c.LINEAR:c.NEAREST);b.isLinear?c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,b.isMipmap&&!Y?c.NEAREST_MIPMAP_LINEAR:c.LINEAR):c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,b.isMipmap&&!Y?c.NEAREST_MIPMAP_NEAREST:c.NEAREST);b.Ha&&"undefined"!==typeof c.texStorage2D&&(J=b.Ha,c.texStorage2D(c.TEXTURE_2D,b.Ha,N,k,v));S=u[b.N-1];N=w[b.N-1];M=l[H];if(t.o()){var d=c.RGBA32F;S===c.RGBA&&
M===c.FLOAT&&d&&(N=d);S===c.RGB&&M===c.FLOAT&&d&&(N=d,S=c.RGBA)}if(b.D&&!b.isFloat||b.isFloat&&b.isMipmap&&qa.qc())(d=c.RGBA16F)&&(N=d),M=t.pa();b.mb&&4===b.N&&(S=JEContext.ld());b.C?c.texImage2D(c.TEXTURE_2D,0,N,S,M,b.C):b.url?c.texImage2D(c.TEXTURE_2D,0,N,S,M,Q):O?(c.texImage2D(c.TEXTURE_2D,0,N,k,v,0,S,M,O),b.isKeepArray||(O=null)):c.texImage2D(c.TEXTURE_2D,0,N,k,v,0,S,M,null);if(b.isMipmap)if(!Y&&E)E.W(),ka=!0;else if(Y){d=Math.log(Math.min(k,v))/Math.log(2);var g;C=Array(1+d);C[0]=I;for(g=1;g<=
d;++g){var f=Math.pow(2,g);var n=k/f;f=v/f;var p=c.createTexture();a(p);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST);c.texImage2D(c.TEXTURE_2D,0,N,n,f,0,S,M,null);a(null);C[g]=p}ka=!0}a(null);e[h]=-1;X&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1);z=!0;L&&E&&(L(E),L=!1)}"undefined"===typeof b.isFloat&&(b.isFloat=!1);"undefined"===typeof b.D&&(b.D=!1);"undefined"===typeof b.isPot&&(b.isPot=!0);"undefined"===typeof b.isLinear&&
(b.isLinear=!1);"undefined"===typeof b.isMipmap&&(b.isMipmap=!1);"undefined"===typeof b.Aa&&(b.Aa=!1);void 0===b.ra&&(b.ra=!1);void 0===b.M&&(b.M=!1);void 0===b.lb&&(b.lb=!1);void 0===b.mb&&(b.mb=!1);void 0===b.N&&(b.N=4);void 0===b.Fa&&(b.Fa=!1);"undefined"===typeof b.isFlipY&&(b.isFlipY=b.url||b.array?!0:!1);"undefined"===typeof b.isKeepArray&&(b.isKeepArray=!1);b.data&&(b.array="string"===typeof b.data?oa(b.data):b.isFloat?new Float32Array(b.data):new Uint8Array(b.data),b.isFlipY=!1);var H=0,q=
b.C?!0:!1;b.isFloat&&(b.D=!0);b.D&&(H=1);b.Fa||t.o()||!b.isFloat||!ea||t.Wa()||(b.isFloat=!1);b.isFloat&&(H=2);b.ra&&P&&!JEContext.rd()&&(b.ra=!1);var I=c.createTexture(),L=b.Aa,Q=null,O=!1,k=0,v=0,z=!1,G=p++,A=!1,D,U,ca,Z,N,S,M,X=b.isFlipY,Y=b.D&&b.isMipmap&&qa&&!qa.Rb(),C,J=-1,ka=!1;"undefined"!==typeof b.width&&b.width&&(k=b.width,v="undefined"!==typeof b.height&&b.height?b.height:k);var E={get:function(){return I},w:function(){return k},I:function(){return v},od:function(){return b.url},sd:function(){return b.isFloat},
ud:function(){return b.D},vd:function(){return b.isLinear},W:function(){c.generateMipmap(c.TEXTURE_2D)},Va:function(b,d){Y?(b||(b=E.fb()),E.ya(d),a(C[b]),e[d]=-1):E.b(d)},fb:function(){-1===J&&(J=Math.log(k)/Math.log(2));return J},bb:function(b){if(Y){b||(b=E.fb());m.set("s11");E.ya(0);var d,g=k,f=v;for(d=1;d<=b;++d)g/=2,f/=2,m.H("u9",.25/g,.25/f),c.viewport(0,0,g,f),a(C[d-1]),c.framebufferTexture2D(r.oa(),c.COLOR_ATTACHMENT0,c.TEXTURE_2D,C[d],0),R.g(!1,1===d);e[0]=-1}else E.W()},ya:function(a){a!==
h&&(c.activeTexture(d[a]),h=a)},b:function(b){if(!z)return!1;E.ya(b);if(e[b]===G)return!1;a(I);e[b]=G;return!0},Ua:function(b){c.activeTexture(d[b]);h=b;a(I);e[b]=G},i:function(){c.framebufferTexture2D(r.oa(),c.COLOR_ATTACHMENT0,c.TEXTURE_2D,I,0)},j:function(){c.viewport(0,0,k,v);c.framebufferTexture2D(r.oa(),c.COLOR_ATTACHMENT0,c.TEXTURE_2D,I,0)},Pd:function(){c.framebufferTexture2D(r.oa(),c.COLOR_ATTACHMENT0,c.TEXTURE_2D,null,0)},resize:function(a,b){k=a;v=b;n()},clone:function(a){a=W.a({width:k,
height:v,D:b.D,isFloat:b.isFloat,isLinear:b.isLinear,M:b.M,isFlipY:a?!X:X,isPot:b.isPot});pa.set("s0");r.V();a.i();c.viewport(0,0,k,v);E.b(0);R.g(!0,!0);return a},Fc:function(){c.viewport(0,0,k,v)},remove:function(){c.deleteTexture(I);E=null},refresh:function(){E.Ua(0);X&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!0);q?c.texImage2D(c.TEXTURE_2D,0,N,S,c.UNSIGNED_BYTE,b.C):c.texImage2D(c.TEXTURE_2D,0,N,k,v,0,S,M,O);X&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1)},Xa:function(){var a=k*v*4;U=[new Uint8Array(a),
new Uint8Array(a),new Uint8Array(a),new Uint8Array(a)];D=[new Float32Array(U[0].buffer),new Float32Array(U[1].buffer),new Float32Array(U[2].buffer),new Float32Array(U[3].buffer)];ca=new Uint8Array(4*a);Z=new Float32Array(ca.buffer);A=!0},ub:function(){A||E.Xa();c.readPixels(0,0,k,4*v,c.RGBA,c.UNSIGNED_BYTE,ca);var a,b=k*v,d=2*b,g=3*b;for(a=0;a<b;++a)D[0][a]=Z[a],D[1][a]=Z[a+b],D[2][a]=Z[a+d],D[3][a]=Z[a+g];return D},Za:function(){r.F();m.set("s12");E.b(0);c.viewport(0,0,k,4*v);for(var a=0;4>a;++a)c.viewport(0,
v*a,k,v),m.xb("u10",T[a]),R.g(!1,0===a)},Qd:function(b){a(I);X&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,X);c.texImage2D(c.TEXTURE_2D,0,N,k,v,0,S,M,b);e[h]=G;X&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1)},Rd:function(b,d){a(I);c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,d);c.texImage2D(c.TEXTURE_2D,0,N,S,M,b);e[h]=G;d&&c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1)},Bd:function(a,d){var g=k*v,e=4*g;a=b.D?a?"RGBE":"JSON":"RGBA";d&&(a=d);d=t.o()&&!1;switch(a){case "RGBE":var f="s47";break;case "JSON":f=d?"s0":"s12";break;
case "RGBA":case "RGBAARRAY":f="s6"}A||("RGBA"===a||"RGBE"===a||"RGBAARRAY"===a?(U=new Uint8Array(e),A=!0):"JSON"!==a||d||E.Xa());r.F();m.set(f);E.b(0);if("RGBA"===a||"RGBE"===a||"RGBAARRAY"===a){c.viewport(0,0,k,v);R.g(!0,!0);c.readPixels(0,0,k,v,c.RGBA,c.UNSIGNED_BYTE,U);if("RGBAARRAY"===a)return{data:U};x||(B=document.createElement("canvas"),y=B.getContext("2d"),x=!0);B.width=k;B.height=v;F=y.createImageData(k,v);F.data.set(U);y.putImageData(F,0,0);var h=B.toDataURL("image/png")}else if("JSON"===
a)if(d)h=new Float32Array(g),c.viewport(0,0,k,v),R.g(!0,!0),c.readPixels(0,0,k,v,c.RGBA,c.FLOAT,h);else{for(h=0;4>h;++h)c.viewport(0,v*h,k,v),m.xb("u10",T[h]),R.g(!h,!h);E.ub();h=Array(g);for(f=0;f<g;++f)h[4*f]=D[0][f],h[4*f+1]=D[1][f],h[4*f+2]=D[2][f],h[4*f+3]=D[3][f]}return{format:a,data:h,width:k,height:v,isMirrorY:b.M,isFlipY:"RGBA"===a?b.isFlipY:!b.isFlipY}}};b.isMipmap&&!Y&&z&&!ka&&(E.W(),ka=!0);if(b.url)a(I),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,1,1,0,c.RGBA,c.UNSIGNED_BYTE,null),Q=new Image,
Q.Uc="Anonymous",Q.crossOrigin="Anonymous",Q.src=b.url,Q.onload=function(){k=Q.width;v=Q.height;n()};else if(b.C){var ba=function(){k=void 0!==b.C.videoWidth?b.C.videoWidth:b.C.width;v=void 0!==b.C.videoHeight?b.C.videoHeight:b.C.height;k?n():setTimeout(ba,1)};ba()}else b.array?(b.D&&!b.isFloat?b.array instanceof Uint16Array?(O=b.array,n()):g()?(O=f(b.array),n()):(n(),W.dc(E,b.array,X)):(O=b.isFloat?b.array instanceof Float32Array?b.array:new Float32Array(b.array):b.array instanceof Uint8Array?b.array:
new Uint8Array(b.array),n()),b.isKeepArray||(O&&O!==b.array&&(O=null),delete b.array)):n();E.ic=E.w;L&&z&&(L(E),L=!1);return E},F:function(b){b!==h&&(c.activeTexture(d[b]),h=b);e[b]=-1;a(null)},Oc:function(a){n.random.b(a)},reset:function(){for(var a=0;a<d.length;++a)e[a]=-1;h=-1},Ad:function(){h=-1},Nd:function(){for(var a=0;a<d.length;++a)W.F(a)},ec:function(){n&&(n.random.remove(),n.zb.remove())},Od:function(a,b){if("RGBA"===a.format||"RGBE"===a.format){var d=new Image;d.src=a.data;d.onload=function(){W.a({M:a.isMirrorY,
isFlipY:a.isFlipY,isFloat:!1,C:d,Aa:function(d){if("RGBA"===a.format)b(d);else{var g=a.width,f=a.height,h=W.a({M:a.isMirrorY,isFloat:!0,width:g,height:f,isFlipY:a.isFlipY});r.V();c.viewport(0,0,g,f);m.set("s48");h.i();d.b(0);R.g(!0,!0);W.F(0);b(h);c.flush();setTimeout(d.remove,50)}}})}}else"JSON"===a.format?b(W.a({isFloat:!0,isFlipY:a.isFlipY,width:a.width,height:a.height,array:new Float32Array(a.data)})):b(!1)}};return W}(),ta={a:function(a){var b=[V.a(a),V.a(a)],f=[b[1],b[0]],g=f,h={Cc:function(a){g[1].i();
g[0].b(a);h.yb()},Fd:function(a){g[1].j();g[0].b(a);h.yb()},yb:function(){g=g===b?f:b},refresh:function(){g[0].refresh();g[1].refresh()},b:function(a){g[0].b(a)}};return h}},t=function(){function a(){b="undefined"===typeof ra?JEContext:ra;f=!0}var b,f=!1,g=!1,h=!1,d=!1,p=!1,e=!1,n=!1,l=!1,u=!1,w=!1,q=!1,x=!0,B=!0,y=!0,F,T,P={l:function(){if(f)return!0;a();P.o()||(P.$a(),P.na());P.$b();P.ac();r.l();V.l();if(!P.Vb())return!1;R.l();V.mc();return!0},w:function(){f||a();return b.w()},I:function(){f||a();
return b.I()},o:function(){f||a();return b.o()},$b:function(){q=(w=c.getExtension("EXT_color_buffer_float")||c.getExtension("WEBGL_color_buffer_float")||c.getExtension("OES_color_buffer_float"))?!0:!1;window.GL_EXT_COLORBUFFERFLOAT=w},ac:function(){c.getExtension("EXT_color_buffer_half_float")||c.getExtension("WEBGL_color_buffer_half_float")||c.getExtension("OES_color_buffer_half_float")},$a:function(){if(!g){this.o()||(h=c.getExtension("OES_texture_float")||c.getExtension("MOZ_OES_texture_float")||
c.getExtension("WEBKIT_OES_texture_float"),p=(window.GL_EXT_FLOAT=h)?!0:!1);if(p||this.o())d=c.getExtension("OES_texture_float_linear")||c.getExtension("MOZ_OES_texture_float_linear")||c.getExtension("WEBKIT_OES_texture_float_linear"),window.GL_EXT_FLOATLINEAR=d;g=!0}},na:function(){if(!u){if(!this.o()){if(e=c.getExtension("OES_texture_half_float")||c.getExtension("MOZ_OES_texture_half_float")||c.getExtension("WEBKIT_OES_texture_half_float"))T=e.HALF_FLOAT_OES,n=!0;window.GL_EXT_HALFFLOAT=e}if(n||
this.o())l=c.getExtension("OES_texture_half_float_linear")||c.getExtension("MOZ_OES_texture_half_float_linear")||c.getExtension("WEBKIT_OES_texture_half_float_linear"),window.GL_EXT_HALFFLOATLINEAR=l;u=!0}},pa:function(){if(P.o())return c.HALF_FLOAT;P.na();return n?T:c.FLOAT},Wa:function(){return x},Qc:function(){return B},Pc:function(){return y},Qb:function(){return q},Xb:function(){F=!P.o();if(!F)return B=x=!0;var a=r.a({width:1});a.Na();var b=V.a({width:1,isFloat:!0,Fa:!0,N:4});a.i();b.i();c.flush();
P.na();if(!n)return!1;b.remove();b=V.a({width:1,isFloat:!1,D:!0,N:4});b.i();if(c.checkFramebufferStatus(r.cb())!==c.FRAMEBUFFER_COMPLETE)return!1;x=!1;B=!0;a.remove();b.remove();return!0},Wb:function(){var a=r.a({width:1});a.Na();var b=V.a({width:1,isFloat:!0,N:3});a.i();b.i();c.flush();c.checkFramebufferStatus(r.cb())!==c.FRAMEBUFFER_COMPLETE?(V.zc(),y=!1):y=!0;a.remove();b.remove();return!0},Vb:function(){return P.Xb()&&P.Wb()?!0:!1}};return P}(),qa=function(){var a=!1,b=[.8,1,.8,1],f=0,g,h=new Uint8Array(4),
d=b.concat(b).concat(b).concat(b),p=!0,e={l:function(){function b(a,b,d){c.texImage2D(c.TEXTURE_2D,0,a,2,2,0,c.RGBA,b,d);c.generateMipmap(c.TEXTURE_2D);R.la();R.g(!1,!0);c.readPixels(0,0,1,1,c.RGBA,c.UNSIGNED_BYTE,h);return 0!==h[0]}function e(){if(b(u,c.FLOAT,new Float32Array(d))){if(!t.Wa())return f=2,!0;f=3;return!0}return!1}t.$a();t.na();var u=c.RGBA,w=c.RGBA;if(ra.o()){var q=c.RGBA32F;q&&(u=q);(q=c.RGBA16F)&&(w=q)}R.l();r.reset();r.F();c.viewport(0,0,1,1);m.set("s0");a=!0;g=c.createTexture();
c.activeTexture(c.TEXTURE0);c.bindTexture(c.TEXTURE_2D,g);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST_MIPMAP_NEAREST);if(function(){return b(w,t.pa(),new Uint16Array(d))||b(w,c.FLOAT,new Float32Array(d))?(f=2,!0):!1}()||e())return!0;p=!1;c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST);c.texParameteri(c.TEXTURE_2D,
c.TEXTURE_MIN_FILTER,c.LINEAR);return b(w,t.pa(),new Float32Array(d))?(f=2,!0):!1},Rb:function(){return p},jd:function(){return f},td:function(){a||e.l();return 3===f},qc:function(){a||e.l();return 2===f}};return e}(),ua={a:function(a){var b=V.a(a.alpha),f=V.a(a.beta);return{Yb:function(){b.b(1);f.b(2)}}}},xa={a:function(a){var b=a.Gc;b.index=a.index;b.P=a.P;b.parent=a.parent;switch(b.type){case "input":a=va.a(b);break;default:a=wa.a(b)}return a}},va={a:function(a){"undefined"===typeof a.sift&&(a.sift=
!1);"undefined"===typeof a.DWT&&(a.DWT=!1);"undefined"===typeof a.blur&&(a.blur=!1);"undefined"===typeof a.siftOutWidth&&(a.siftOutWidth=!1);"undefined"===typeof a.filterBank&&(a.filterBank=!1);"undefined"===typeof a.poolType&&(a.poolType="max");"undefined"===typeof a.postpreprocessing&&(a.postpreprocessing="copy");"undefined"===typeof a.density&&(a.density=1);a.filterBank&&(FilterBank.Ed(a.poolType,a.postpreprocessing),FilterBank.Cd(a.density));var b=!1;if(a.mask){b=!0;SETTINGS&&void 0!==SETTINGS.Lb&&
(a.mask=SETTINGS.Lb+a.mask);var f=V.a({isFloat:!1,url:a.mask})}var g=!1,h="undefined"!==typeof a.preprocessing?a.preprocessing:!1,d=!1;a.sift?Sift.l({lc:c,fa:!1,width:a.size,xd:a.siftOutWidth}):a.DWT&&DWT.l({lc:c,fa:!1,width:a.size});switch(h){case "sobel":var p="s30";d=!0;break;case "meanNormalization":p="s31";d=!0;break;case "grayScale":p="s29";d=!1;break;case "copy":p="s0";break;case "inputLightRegulation":p="s29";ya.l({width:a.size,nb:a.nBlurPass,pc:!1});g=!0;break;case "direct":case "none":p=
!1;break;default:p="s3"}b&&(p+="Mask");if(a.blur)var e=V.a({isFloat:!1,isPot:!1,width:a.size});var n=V.a({isFloat:!1,isPot:!1,width:a.size}),l,u,w,q={w:function(){return a.sift?Sift.Y():a.filterBank?FilterBank.Y():a.size},Y:function(){return q.w()},hb:function(){return a.sift?Sift.ha():a.DWT?DWT.ha():a.filterBank?FilterBank.ha():g?ya.ha():n},G:function(){r.V();a.blur&&(e.j(),m.set("s49"),m.H("u9",1/a.size,1/a.size),R.g(!1,!0),e.b(0));p&&(m.set(p),d&&m.B("u29",1/a.size),n.j(),b&&f.b(1),R.g(!1,!1),
n.b(0),g?ya.ua(n):a.sift?(m.R(),Sift.ua()):a.DWT?(m.R(),DWT.ua(4)):a.filterBank&&(m.R(),FilterBank.ua(n)))},Dd:function(a){l=a},Oa:function(b){l=b;u="s42";w=V.a({isFloat:!0,isPot:!0,width:a.size})},Da:function(){return w},K:function(){var a=q.hb(),b=l.Da();l.Ea().K(b);b=l.Ea().X();m.set(u);m.B("u28",b*b);a.b(1);w.j();R.g(!1,!1);w.b(0)}};return q}},wa={a:function(a){"undefined"===typeof a.disableNormalize&&(a.disableNormalize=!1);var b=[],f=[],g,h,d=!1,p,e=!0,n,l,u=a.isReorganize?a.isReorganize:!1,
w=a.kernelsNumber?!0:!1,q,x,B,y,F,T,P,ea,Q=a.dynPelu?ua.a(a.dynPelu):!1,ja=Q?!0:!1,ba={isEnabled:!1},W;if("softmax"===a.type){a.activation="softmax";a.size=Math.pow(2,Math.ceil(Math.log(Math.sqrt(a.num_classes))/Math.log(2)));a.sparsity="undefined"!==typeof a.sparsity?a.sparsity:a.P.Y();a.gain="undefined"!==typeof a.gain?a.gain:1;m.L("s20",[{type:"1f",name:"u12",value:a.gain}]);var H=V.a({isFloat:!0,isPot:!1,width:a.size}),fa=V.a({isFloat:!0,isPot:!1,width:a.size,isMipmap:!0});e=!1;var da=new Uint8Array(Math.pow(4*
a.size,2)),aa;for(aa=0;aa<a.size*a.size;++aa){var I=aa<a.num_classes?255:0;da[4*aa]=I;da[4*aa+1]=I;da[4*aa+2]=I;da[4*aa+3]=I}var L=V.a({isFloat:!1,isPot:!1,width:a.size,array:da})}else a.cost?(a.sparsity="undefined"!==typeof a.sparsity?a.sparsity:a.P.Y(),e=!1):"full"===a.connectivityUp&&(a.sparsity=a.P.Y());var ha={elu:"s15",elu01:"s16",relu:"s14",arctan:"s18",sigmoid:"s13",copy:"s0",softplus:"s19",softmax:"s20",dynPelu:"s17"}[a.activation],O=a.sparsity*a.sparsity,k=!1,v=a.size;if(a.maxPooling){switch(a.maxPooling.size){case 2:var z=
"s32";break;case 4:z="s33"}k=!0;v/=a.maxPooling.size;var G=V.a({isFloat:!0,isPot:!1,width:v})}var A="undefined"!==typeof a.normalization&&a.normalization?!0:!1;if(A){var D="s50"+a.index;m.oc("s50",D,[((a.normalization.n-1)/2).toFixed(1)]);m.L(D,[{type:"1i",name:"u0",value:0},{type:"2f",name:"u9",value:[1/a.size,1/a.size]},{type:"1f",name:"u8",value:a.normalization.alpha},{type:"1f",name:"u11",value:a.normalization.beta},{type:"1f",name:"u36",value:a.normalization.k}]);var U=V.a({isFloat:!0,isPot:!0,
width:a.size});var ca=V.a({isFloat:!0,isPot:!0,width:a.size})}da=a.size*a.sparsity;var Z=Math.log(da/a.size)/Math.log(2),N=V.a({isMipmap:!0,isFloat:!0,isPot:!0,width:da,Ha:Z}),S=V.a({isFloat:!0,isPot:!0,width:a.size}),M;e&&(M=V.a({isFloat:!0,isPot:!1,width:a.size}));var X=V.a(a.bias),Y,C={w:function(){return a.size},Y:function(){return v},gb:function(){return a.num_classes},Ob:function(a){W.b(a)},wc:function(){a.remap&&a.remap.isEnabled&&(ba={isEnabled:!0,sc:V.a({isFloat:!1,isFlipY:!1,array:new Uint8Array(a.remap.maskTexture.data),
width:a.remap.maskTexture.width,isPot:!1}),layers:a.remap.layers.map(function(b){return a.parent.hc(b)}),depth:a.remap.depth})},Bc:function(){switch(a.connectivityUp){case "gaussian":Y=za.a(a.connectivity);break;case "direct":Y=Aa.a(a.connectivity);break;case "square":Y=Ba.a(a.connectivity);break;case "full":Y=Ca.a(a.connectivity);break;case "conv":l=a.kernelsNumber,Y=Da.a(a.connectivity),u&&(n=V.a({width:v,isFloat:!0,isFlipY:!1,isPot:!1}))}},G:function(b,f){W=b;N.j();w&&X.b(2);Y.G(ba);N.b(0);N.bb(Z);
S.j();w?m.set("s0"):(m.set("s28"),m.B("u28",O),X.b(1));N.Va(Z,0);R.g(!1,!1);m.set(ha);A?U.i():M.i();S.b(0);ja&&Q.Yb();R.g(!1,!1);A&&(m.set(D),ca.i(),U.b(0),R.g(!1,!1),m.set("s51"),m.B("u8",1),M.i(),ca.b(1),R.g(!1,!1));if(e)return k?(G.j(),M.b(0),m.set(z),m.H("u9",1/a.size,1/a.size),R.g(!1,!1),f=G):f=M,f.b(0),u&&(n.i(),m.set("s22"),m.H("u16",l,v/l),R.g(!1,!1),f=n,n.b(0)),T=f;if("softmax"===a.type){m.set("s20");M.b(0);H.i();R.g(!1,!1);a.disableNormalize?b=H:(m.set("s2"),H.b(0),L.b(1),fa.i(),R.g(!1,
!1),m.set("s0"),h.j(),fa.b(0),fa.bb(!1),R.g(!1,!1),m.set("s21"),g.j(),fa.Va(!1,0),m.B("u14",M.ic()),h.b(1),R.g(!1,!1),b=g);if(f){switch(d){case "cpuRGBAAvg":break;default:var q=C.rb(b)}return q}return!1}if(a.cost){m.set("gpuRawAvg"===d?"s8":"s7");f=M;a.disableNormalize||(m.B("u6",1/a.size),g.j(),M.b(0),R.g(!1,!1),f=g);T=f;switch(d){case "cpuRGBA2Float":f.Za();q=C.rb(f);p(q);break;case "gpuRawAvg":case "gpuRaw":f.b(0),p(f)}return!1}},Tb:function(e){e&&"undefined"!==typeof e.qb&&(d=e.qb,p=e.vc);M=V.a({isFloat:!0,
isPot:!0,isMipmap:"softmax"===a.type,width:a.size});"softmax"===a.type&&(h=V.a({isFloat:!0,isPot:!0,width:1}));var k=0,l=0,n="undefined"!==typeof a.num_classes?a.num_classes:a.size*a.size;for(e=0;e<n;++e)b.push(k+(a.size-1-l)*a.size),f.push([-1,-1,-1,-1]),++k,k===a.size&&(k=0,++l);a.disableNormalize||(g=V.a({isFloat:!0,isPot:!0,width:a.size}))},rb:function(a){a.Za();var d=a.ub();b.forEach(function(a,b){f[b][0]=d[0][a];f[b][1]=d[1][a];f[b][2]=d[2][a];f[b][3]=d[3][a]});return f},Oa:function(b){F=b;
ea={Md:"s43",zd:"s44",Tc:"s42",Xc:"s45",Mc:"s46"}[a.activation];b={isFloat:!0,isPot:!0,width:a.size};P=V.a(b);x=V.a(b);k&&V.a(b);u&&(B=V.a(b));e||(y=V.a({isFloat:!0,isPot:!1,width:a.size}))},Da:function(){return q},K:function(b){if(!e){y.j();m.set("quadratic"===a.cost?"s41":"s40");b.b(1);T.b(0);R.g(!1,!1);y.b(0);var d=1}b=S;e&&(d=F.Da(),u&&(P.j(),m.set("s22"),S.b(0),m.H("u16",l,v/l),R.g(!1,!1),b=P,d.b(0)),F.Ea().K(d),d=F.Ea().X());m.set(ea);m.B("u28",d*d);b.b(1);x.j();R.g(!1,!1);q=x;u&&(m.set("s22"),
B.j(),x.b(0),m.H("u16",v/l,l),R.g(!1,!1),q=B);q.b(0)}};a.P&&C.Bc(a.P);return C}};
function Ea(){var a={qd:!1},b,f,g;a||(a={});this.hc=function(a){return b[a]};this.yc=function(a){var d=!1;b=a.map(function(a,b){return d=a=xa.a({index:b,parent:this,Gc:a,P:d})});f=b[0];g=b[b.length-1];b.forEach(function(a,b){0!==b&&a.wc()})};this.G=function(a,d){var f=d;b.forEach(function(b){f=b.G(f,a)});return f};this.Oa=function(){for(var a=b.length-1,d;0<=a;--a)d=a!==b.length-1?b[a+1]:!1,b[a].Oa(d)};this.K=function(a){for(var d=b.length-1;0<=d;--d)b[d].K(a)};this.eb=function(){return f.w()};this.ha=
function(){return g.hb()};this.Ac=function(a){g.Tb(a)};this.gb=function(){return g.gb()}}
var Aa={a:function(a){var b=V.a(a.weights);delete a.weights.data;return{X:function(){return 1},qa:function(){return b},G:function(){m.set("s27");b.b(1);R.g(!1,!1)}}}},Ca={a:function(a){var b=a.fromLayerSize*a.toLayerSize,f=a.fromLayerSize,g=V.a(a.weights),h=V.a({isFloat:!0,isPot:!0,width:b,isMipmap:!0}),d=V.a({isFloat:!0,isPot:!0,width:a.fromLayerSize});return{X:function(){return f},qa:function(){return g},gd:function(){return _fboWeights},G:function(b){if(b.isEnabled){m.set("s25");b.sc.b(3);var d,
f=Math.min(b.layers.length,b.depth);for(d=0;d<f;++d)b.layers[d].Ob(4+d)}else m.set("s24");m.B("u19",a.toLayerSize);g.b(1);R.g(!1,!1)},K:function(){m.set("s38");m.B("u19",a.toLayerSize);m.B("u27",a.fromLayerSize);h.j();g.b(1);R.g(!1,!1);d.j();m.set("s0");h.b(0);h.W();R.g(!1,!1);d.b(0)}}}},za={a:function(a){var b=a.toSparsity*a.toLayerSize,f=b/a.fromLayerSize,g=V.a(a.weights),h=V.a({isFloat:!0,isPot:!0,width:b,array:new Float32Array(a.weightsFromTo)}),d=V.a({width:b,isFloat:!0,array:new Float32Array(a.fromBindings),
isPot:!0}),p=V.a({width:b,isFloat:!0,array:new Float32Array(a.toBindings),isPot:!0});return{X:function(){return f},qa:function(){return g},gc:function(){return d},jc:function(){return p},kc:function(){return h},G:function(){m.set("s23");g.b(1);p.b(2);R.g(!1,!0)}}}},Ba={a:function(a){var b=a.fromLayerSize,f=a.toLayerSize,g=a.toSparsity*f,h=g/b,d=a.toSparsity,p=b/f,e,n,l,u,w=0,q=0,x=0,B=Array(d*f*d*f*4),y=Array(d*f*d*f*4),F=Array(d*f*d*f*4),T=Array(b*b);for(e=0;e<T.length;++e)T[e]=0;var P=Math.floor(d/
2),ea=.5/f,Q=.5/b,ja=.5/g;for(e=0;e<f;++e)for(n=0;n<f;++n){var ba=Math.round(e*p);var W=Math.round(n*p);var H=e/f;var fa=n/f;H+=ea;fa+=ea;for(l=0;l<d;++l)for(u=0;u<d;++u){var da=w/g;var aa=q/g;var I=ba+l-P;var L=W+u-P;0>I&&(I+=b);0>L&&(L+=b);I>=b&&(I-=b);L>=b&&(L-=b);var ha=I/b;var O=L/b;aa=1-aa-1/g;ha+=Q;O+=Q;da+=ja;aa+=ja;B[4*x]=ha;B[4*x+1]=O;B[4*x+2]=H;B[4*x+3]=fa;var k=e*d+l,v=n*d+u;v=f*d-v-1;k=v*f*d+k;y[4*k]=da;y[4*k+1]=aa;y[4*k+2]=ha;y[4*k+3]=O;ha=T[L*b+I]++;O=ha%h;I=I*h+O;L=L*h+(ha-O)/h;L=
b*h-1-L;L=L*b*h+I;F[4*L]=da;F[4*L+1]=aa;F[4*L+2]=H;F[4*L+3]=fa;++w>=g&&(w=0,++q);++x}}var z=V.a(a.weights),G=V.a({isFloat:!0,isPot:!0,width:g,array:new Float32Array(B)}),A=V.a({width:g,isFloat:!0,array:new Float32Array(F),isPot:!0});F=null;var D=V.a({width:g,isFloat:!0,array:new Float32Array(y),isPot:!0});y=null;var U=V.a({isFloat:!0,isPot:!0,width:g,isMipmap:!0}),ca=V.a({isFloat:!0,isPot:!0,width:g/h});return{X:function(){return h},qa:function(){return z},gc:function(){return A},jc:function(){return D},
kc:function(){return G},G:function(){m.set("s23");z.b(1);D.b(2);R.g(!1,!1)},K:function(){m.set("s37");U.j();A.b(1);z.b(2);R.g(!1,!1);m.set("s0");ca.j();U.b(0);U.W();R.g(!1,!1);ca.b(0)}}}},Da={a:function(a){function b(){m.B("u25",f);m.B("u26",g);m.B("u19",a.toLayerSize);m.B("u27",a.fromLayerSize)}var f=a.kernelsNumber,g=a.toSparsity,h=g*a.toLayerSize,d=h/a.fromLayerSize,p=V.a(a.weights),e=V.a({isFloat:!0,isPot:!0,width:h,isMipmap:!0}),n=V.a({isFloat:!0,isPot:!0,width:a.fromLayerSize});return{X:function(){return d},
md:function(){return g},qa:function(){return p},G:function(){m.set("s26");b();p.b(1);R.g(!1,!1)},K:function(){m.set("s39");b();e.j();p.b(1);R.g(!1,!1);m.set("s0");n.j();e.b(0);e.W();R.g(!1,!1);n.b(0)}}}},ya=function(){var a,b,f,g,h,d,p,e,n;return{l:function(l){a=l.nb?l.nb:3;b=l.width?l.width:64;g=l.pc?!0:!1;l={isFloat:!1,width:b,isPot:!1,isFlipY:!1};h=V.a(l);d=V.a(l);p=V.a(l);e=V.a(l);n=V.a({isFloat:!0,width:b,isPot:!1,isFlipY:!1});f=1/b},ua:function(b){m.set("s35");for(var l=0;l<a;++l)h.i(),m.H("u9",
f,0),R.g(g,!1),d.i(),h.b(0),m.H("u9",0,f),R.g(g,!1),d.b(0);m.set("s34");e.i();b.b(0);R.g(g);m.set("s35");for(l=0;l<a;++l)p.i(),e.b(0),m.H("u9",f,0),R.g(g,!1),e.i(),p.b(0),m.H("u9",0,f),R.g(g,!1);m.set("s36");n.i();b.b(0);d.b(1);e.b(2);R.g(g,!1);n.b(0)},ha:function(){return n}}}();function Fa(){if(!Ga())return!1;var a=document.createElement("video");a.autoplay=!0;return a}
function Ha(){var a=!1,b=navigator.userAgent||navigator.vendor||window.opera;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(b)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(b.substr(0,
4)))a=!0;return a}function Ia(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}function Ja(){var a=navigator.userAgent.toLowerCase();return-1==a.indexOf("safari")||-1<a.indexOf("chrome")?!1:!0}function Ga(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?!0:!1}
function Ka(a,b,f,g){if(a)if(Ga()){var h=g&&g.audio;g&&g.video&&g.video.width&&g.video.width.ideal&&(a.style.width=g.video.width.ideal+"px");g&&g.video&&g.video.height&&g.video.height.ideal&&(a.style.height=g.video.height.ideal+"px");a.setAttribute("autoplay","");h?a.volume=0:a.setAttribute("muted","");a.setAttribute("playsinline","");Ia()&&(g.video.width&&delete g.video.width,g.video.height&&delete g.video.height);if(g&&g.video&&Ha()&&!Ia()){g.video.width&&g.video.width.ideal&&delete g.video.width.ideal;
g.video.height&&g.video.height.ideal&&delete g.video.height.ideal;try{var d=window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(p){d=window.innerHeight>window.innerWidth}d&&(h=g.video.height,g.video.height=g.video.width,g.video.width=h)}(function(d){return navigator.mediaDevices.getUserMedia(d).then(function(d){function f(){a.play();b(a,d)}Ia()||a.addEventListener("loadeddata",f,!1);"undefined"!==typeof a.srcObject?a.srcObject=d:(a.src=window.URL.createObjectURL(d),a.videoStream=d);if(Ja()&&
(a.volume=0,1===a.volume)){var g=function(){a.volume=0;window.removeEventListener("mousemove",g,!1);window.removeEventListener("touchstart",g,!1)};window.addEventListener("mousemove",g,!1);window.addEventListener("touchstart",g,!1)}Ia()&&f()}).catch(function(a){f(a)})})(g)}else f&&f();else f&&f()}
window.JEEFACEFILTERAPI=function(){var a,b,f,g,h,d,p,e,n,l,u,w,q,x,B,y,F,T;function P(a){if(G!==z.pause){var b=G===z.play?k.Jb:k.Kb;ka=setTimeout(ja.bind(null,a),b)}}function ea(){if(-1!==[z.play,z.O].indexOf(G))return!1;G=z.play;K.timestamp=Date.now();E&&window.cancelAnimationFrame(E);ja(0)}function Q(a,b,d,f){a=4*a+b;return d+(Y[a]/255+Y[a+8]/65025)*(f-d)}function ja(){if(G!==z.pause){m.Zb();R.reset();R.la();c.disable(c.DEPTH_TEST);r.V();m.wa();var e=A.element.currentTime-A.ta;0>e&&(A.ta=A.element.currentTime);
1E3*e<k.Kc||(A.ia.refresh(),A.ta+=e,m.set("s54"),A.xa.j(),A.ia.b(0),R.g(!1,!1));for(e=0;e<K.$;++e)sa=e===K.$-1,m.set("s55"),M.j(),A.xa.b(0),X.b(1),R.g(!1,!1),M.b(0),U.G(!1,M);e=Date.now();K.ga_=e-K.timestamp;var l=k.za;K.timestamp=e;K.ob=K.tc/K.ga_;K.Ia=K.ob*l+K.Ia*(1-l);K.pb=1E3/K.ga_;K.aa=K.pb*k.za+K.aa*(1-k.za);K.aa>k.U[1]?(K.$=Math.min(K.$+1,k.ja[1]),K.aa=(k.U[0]+k.U[1])/2):K.aa<k.U[0]&&(K.$=Math.max(K.$-1,k.ja[0]),K.aa=(k.U[0]+k.U[1])/2);K.Sb=k.Mb/Math.max(K.Ia,.001);r.F();c.viewport(0,0,3,2);m.set("s53");
X.b(0);R.g(!1,!1);c.readPixels(0,0,3,2,c.RGBA,c.UNSIGNED_BYTE,Y);C.x=Q(0,1,-1,1);C.y=Q(0,2,-1,1);C.Ma=Q(0,3,0,1);C.Ja=Q(1,0,-k.ba[0],k.ba[0]);C.Ka=Q(1,1,-k.ba[1],k.ba[1]);C.La=Q(1,2,-k.ba[2],k.ba[2]);C.Ca=Q(1,3,0,1);for(e=0;e<k.sa;++e)C.ab[e]=k.bc[e](Q(2,e,0,1));a=C.x-J.x;b=C.y-J.y;f=C.Ma-J.s;g=C.Ja-J.rx;h=C.Ka-J.ry;d=C.La-J.rz;e=Math.sqrt(a*a+b*b+f*f)/K.ga_;l=Math.sqrt(g*g+h*h+d*d)/K.ga_;e=1-ma(k.Ya[0],k.Ya[1],e);l=1-ma(k.tb[0],k.tb[1],l);e=ia(k.Ta[0],k.Ta[1],1-Math.pow(e*l*ma(k.sb[0],k.sb[1],C.Ca),
k.Ib));J.x=ia(J.x,C.x,e);J.y=ia(J.y,C.y,e);J.s=ia(J.s,C.Ma,e);J.rx=ia(J.rx,C.Ja,e);J.ry=ia(J.ry,C.Ka,e);J.rz=ia(J.rz,C.La,e);J.detected=ia(J.detected,C.Ca,k.Gb);l=Math.max(e,k.Hb);for(e=0;e<k.sa;++e)J.expressions[e]=ia(J.expressions[e],C.ab[e],l);r.Ic();r.reset();V.reset();c.enable(c.DEPTH_TEST);D.Ba&&D.Ba(J);c.disable(c.BLEND);if(G===z.play||G===z.O)E=window.requestAnimationFrame(P)}}function ba(){m.L("s55",[{type:"1i",name:"u0",value:0},{type:"1i",name:"u39",value:1},{type:"2f",name:"u40",value:S}]);
m.L("s56",[{type:"1i",name:"u41",value:0},{type:"1i",name:"u39",value:1},{type:"1f",name:"u44",value:k.minScaleTracked},{type:"1f",name:"u45",value:k.maxScaleTracked},{type:"1f",name:"u46",value:k.Hc},{type:"1f",name:"u47",value:k.Cb},{type:"1f",name:"u48",value:k.Bb},{type:"3f",name:"u43",value:[k.Qa[0]*S[0],k.Qa[1]*S[1],k.Qa[2]]}]);var a=[{type:"1i",name:"u41",value:0}];m.L("s57",a);m.L("s58",a);m.L("s53",[{type:"1i",name:"u39",value:0},{type:"1f",name:"u49",value:S[0]}])}function W(){var a=U.eb(),
b=Z/a;l=k.minScale*b;u=k.maxScale*b;w=(1-2*k.borderWidth)/k.nStepsX;q=(1-2*k.borderHeight)/k.nStepsY;x=(u-l)/k.nStepsScale;B=k.borderWidth;y=k.borderHeight;F=1-k.borderWidth;T=1-k.borderHeight;S=[a/Z,a/N];p=0;e=k.borderWidth;n=k.borderHeight;ca=l}function H(a){la(D.Sa+k.save,function(b){b=JSON.parse(b);a(b)})}function fa(){if(ra.l({fa:D.J,width:Z,height:N,debug:!1,uc:function(){O("GLCONTEXT_LOST")},antialias:!0,premultipliedAlpha:!0})){if(ra.nc())return!0;O("GL_INCOMPATIBLE");return!1}O("GL_INCOMPATIBLE");
return!1}function da(){X.Cc(1);c.viewport(0,0,1,1);m.set("s56");m.Ec("u42",e,n,ca);R.g(!1,!1);sa&&(c.viewport(1,0,1,1),m.set("s57"),R.g(!1,!1),c.viewport(2,0,1,1),m.set("s58"),R.g(!1,!1));1!==++p%2&&(ca+=x,ca>u&&(e+=w,ca=l,e>F&&(e=B,n+=q,n>T&&(n=y))))}function aa(){m.L("s54",[{type:"1i",name:"u0",value:0},{type:"2f",name:"u37",value:A.S}])}function I(){A.S[0]=.5;A.S[1]=.5;var a=A.ma[1]/A.ma[0],b=ra.I()/ra.w();a>b?A.S[1]*=b/a:A.S[0]*=a/b}function L(a,b){if(G===z.error)return!1;if(0===a.currentTime){var d=
a.play();void 0!==d&&d.then(function(){}).catch(function(){});setTimeout(L.bind(null,a,b),v.wb);return!1}d=a.videoWidth;var f=a.videoHeight;if(0===d||0===f)return setTimeout(L.bind(null,a,b),v.wb),!1;A.ma[0]=d;A.ma[1]=f;A.element=a;b&&b();return!0}function ha(a,b,d){a&&a();a={facingMode:{ideal:"user"},width:{min:v.minWidth,max:v.maxWidth,ideal:v.idealWidth},height:{min:v.minHeight,max:v.maxHeight,ideal:v.idealHeight}};Ka(Fa(),function(a){b&&b(a);d(a)},function(){O("WEBCAM_UNAVAILABLE")},{video:a,
audio:!1})}function O(a){G!==z.error&&(G=z.error,D.ea&&D.ea(a))}var k={save:"NNC.json",Jb:0,Kb:25,za:.2,U:[45,60],Mb:1/3.5,ja:[2,5],minScale:.2,maxScale:.75,borderWidth:.4,borderHeight:.35,nStepsX:5,nStepsY:4,nStepsScale:3,Qa:[.088,.088,.25],Hc:55,minScaleTracked:.6,maxScaleTracked:5.8,Cb:.7,Bb:1,Ya:[.003,.01],tb:[.01,.1],sb:[.6,.7],ba:[.65,1.1,.262],Ta:[.04,1],Gb:.2,Ib:3,Hb:.1,sa:1,bc:[ma.bind(null,.3,.75)],Kc:20},v={idealWidth:800,idealHeight:600,minWidth:800,maxWidth:1280,
minHeight:600,maxHeight:1280,wb:100},z={rc:-1,error:-2,ib:0,play:1,pause:2,O:3},G=z.ib,A={element:!1,ia:!1,xa:!1,ma:[0,0],S:[.5,.5],ta:0},D={ea:!1,Ba:!1,Sa:"./",J:!1},U;var ca=n=e=p=u=l=T=F=y=B=x=q=w=0;var Z,N,S,M,X,Y,C,J,ka=!1,E=!1,sa=!1,K={ga_:0,timestamp:0,ob:0,Ia:0,$:k.ja[0],tc:k.ja[0],pb:0,aa:0,Sb:1};return{init:function(e){function l(){G!==z.error&&2===++n&&(I(),A.ia=V.a({C:A.element,isPot:!1,isFloat:!1,isFlipY:!0}),aa(),D.ea&&(D.ea(!1,{GL:c,canvasElement:D.J,videoTexture:A.xa.get()}),c.disable(c.BLEND)),
ea())}if(G!==z.ib)return e.callbackReady&&e.callbackReady("ALREADY_INITIALIZED"),!1;G=z.rc;e.callbackReady&&(D.ea=e.callbackReady);e.callbackTrack&&(D.Ba=e.callbackTrack);"undefined"!==typeof e.NNCpath&&(D.Sa=e.NNCpath);if(!e.canvasId)return O("NO_CANVASID"),!1;D.J=document.getElementById(e.canvasId);if(!D.J)return O("INVALID_CANVASID"),!1;Z=D.J.width;N=D.J.height;if(!Z||!N)return O("INVALID_CANVASDIMENSIONS"),!1;var n=0;ha(e.onWebcamAsk,e.onWebcamGet,function(a){L(a,l)});H(function(e){if(!fa())return!1;
U=new Ea;U.yc(e.layers);U.Ac({qb:"gpuRawAvg",vc:da});m.Fb([{id:"s54",name:"_",T:"attribute vec2 a0;uniform vec2 u37;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=vec2(.5,.5)+u37*a0;}",ka:["a0"],ca:[2],c:"uniform sampler2D u0;varying vec2 vv0;void main(){gl_FragColor=texture2D(u0,vv0);}",f:["u0","u37"],precision:"lowp"},{id:"s55",name:"_",c:"uniform sampler2D u0;varying vec2 vv0;void main(){gl_FragColor=texture2D(u0,vv0);}",T:"attribute vec2 a0;uniform sampler2D u39;uniform vec2 u40;varying vec2 vv0;void main(){vec4 a=texture2D(u39,vec2(.17,.5));vec2 b=a.gb,c=a.a*u40;vv0=b+a0*.5*c,gl_Position=vec4(a0,0.,1.);}",
ka:["a0"],ca:[2],f:["u0","u39","u40"],precision:"lowp"},{id:"s56",name:"_",c:"uniform sampler2D u41,u39;uniform vec3 u42,u43;uniform float u44,u45,u46,u47,u48;const vec4 k=vec4(1.,1.,1.,1.),l=vec4(0.,0.,0.,0.),e=vec4(.25,.25,.25,.25);void main(){vec4 c=texture2D(u41,vec2(.5,.5)),d=texture2D(u41,vec2(.75,.5));float g=dot(e,texture2D(u41,vec2(.75,.75))),h=dot(e,texture2D(u41,vec2(0.,.5))),i=dot(e,texture2D(u41,vec2(.25,.5)));vec4 a=texture2D(u39,vec2(.17,.5));float b=dot(c,e),j=dot(d,e);bool f=b>u47&&b>j+u48;f?a.r=2.:a.r>u46?a.r=0.:a.r>1.9&&(a.a>u45||a.a<u44)?a.r=0.:a.r>1.9?a.r+=1.:0.;if(a.r<.9)a=vec4(1.,u42);else a.r*=step(1.9,a.r),a.gba+=vec3(g,h,i)*u43*a.a;gl_FragColor=a;}",
T:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",f:"u41 u39 u42 u44 u45 u46 u43 u47 u48".split(" ")},{id:"s57",name:"_",T:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",c:"uniform sampler2D u41;const vec4 e=vec4(.25,.25,.25,.25);const vec3 g=vec3(.5,.5,.5);void main(){float a=dot(e,texture2D(u41,vec2(0.,.75))),b=dot(e,texture2D(u41,vec2(.25,.75))),c=dot(e,texture2D(u41,vec2(.5,.75))),d=dot(e,texture2D(u41,vec2(.5,.5)));vec3 f=vec3(a,b,c)*.5+g;gl_FragColor=vec4(f,d);}",
f:["u41"]},{id:"s58",name:"_",T:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",c:"uniform sampler2D u41;const vec4 e=vec4(.25,.25,.25,.25);void main(){float a=dot(e,texture2D(u41,vec2(.25,.25)));gl_FragColor=vec4(a,0.,0.,0.);}",f:["u41"]},{id:"s53",name:"_",c:"uniform sampler2D u39;uniform float u49;varying vec2 vv0;void main(){float g=step(.5,vv0.y),c=step(.33,vv0.x);vec4 a=texture2D(u39,vec2(vv0.x,.5));a.a=mix(a.a*u49,a.a,c);vec4 d=floor(255.*a),f=255.*(255.*a-d),b=mix(d,f,g)/255.;b.x=mix(step(a.x,1.5),b.x,c),gl_FragColor=b;}",
f:["u39","u49"]}]);A.xa=V.a({isPot:!1,isLinear:!0,isFloat:!1,width:Z,height:N});M=V.a({isPot:!0,isFloat:!1,width:U.eb()});e={width:3,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,k.borderWidth,k.borderHeight,0,0,0,0,0,0,0,0,0])};X=ta.a(e);Y=new Uint8Array(8*e.width);C={Ca:0,x:0,y:0,Ma:1,Ja:0,Ka:0,La:0,ab:new Float32Array(k.sa)};J={detected:0,x:0,y:0,s:1,rx:0,ry:0,rz:0,expressions:new Float32Array(k.sa)};d=h=g=f=b=a=0;W();ba();l()});return!0},toggle_pause:function(a){if(-1!==[z.play,z.pause,
z.O].indexOf(G))return a?-1===[z.play,z.O].indexOf(G)?a=!1:(ka&&(clearTimeout(ka),ka=!1),E&&(window.cancelAnimationFrame(E),E=!1),G=z.pause,a=!0):a=ea(),a},toggle_slow:function(a){-1!==[z.play,z.pause,z.O].indexOf(G)&&-1!==[z.play,z.O].indexOf(G)&&(G=a?z.O:z.play)},resize:function(){var a=D.J.width,b=D.J.height;if(a===Z&&b===N)return!1;Z=a;N=b;W();ba();I();aa();return!0}}}();
;return JEEFACEFILTERAPI;})();