 /**
 * Jeeliz Face Filter - https://github.com/jeeliz/jeelizFaceFilter
 *
 * Copyright 2018 Jeeliz ( https://jeeliz.com )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

var JEEFACEFILTERAPI=(function(){window.JEEFACEFILTERAPIGEN=function(){function Fb(a){var c=null,d=null,e=null,m=0;this.B=function(h){this.De(h.Ua);e.Hd({Lb:h.Lb,Ib:h.Ib})};this.ae=function(h){return c[h]};this.De=function(h){var r=null;m=h.length;c=h.map(function(n,k){n=Object.assign({},n,{index:k,parent:this,ab:r,ke:k===m-1});return r=k=0===k?Gb.instance(n):Hb.instance(n)});d=c[0];e=c[m-1];c.forEach(function(n,k){0!==k&&n.ye()})};this.T=function(h,r){var n=r;c.forEach(function(k){n=k.T(n,h)});return n};this.$d=function(){return d.G()};
this.Cc=function(){return e.be()};this.zc=function(){return e.zc()};this.m=function(){c&&(c.forEach(function(h){h.m()}),e=d=c=null,m=0)};"undefined"!==typeof a&&this.B(a)}function bb(a,c){var d=c%8;return a[(c-d)/8]>>7-d&1}function Ib(a){var c=JSON.parse(a);a=c.ne;var d=c.nf,e=c.n;var m="undefined"===typeof btoa?Buffer.from(c.data,"base64").toString("latin1"):atob(c.data);var h=m.length;c=new Uint8Array(h);for(var r=0;r<h;++r)c[r]=m.charCodeAt(r);m=new Float32Array(e);h=new Float32Array(d);r=a+d+
1;for(var n=0;n<e;++n){for(var k=r*n,u=0===bb(c,k)?1:-1,g=k+1,x=1,f=0,l=g+a-1;l>=g;--l)f+=x*bb(c,l),x*=2;g=f;k=k+1+a;x=h.length;f=0;for(l=k;l<k+x;++l)h[f]=bb(c,l,!0),++f;for(x=k=0;x<d;++x)k+=h[x]*Math.pow(2,-x-1);m[n]=0===k&&0===g?0:u*(1+k)*Math.pow(2,1+g-Math.pow(2,a-1))}return m}function Va(){return-1!==[ca.ready,ca.play,ca.pause].indexOf(ia)}function Jb(a){if(ia!==ca.pause){var c=ia===ca.play?L.Ea:Y.ud;Wa=setTimeout(ob.bind(null,a),c)}}function cb(){if(ia===ca.play)return!1;ia=ca.play;Na&&window.cancelAnimationFrame(Na);
ob(0)}function pb(){if(ia!==ca.play)return!1;Wa&&(clearTimeout(Wa),Wa=null);Na&&(window.cancelAnimationFrame(Na),Na=null);ia=ca.pause;return!0}function Ea(a,c,d,e,m){a=4*(3*c+a)+d;return e+(U.buffer[a]/255+U.buffer[a+12]/65025)*(m-e)}function db(){b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1);sa.ba();V.reset();X.reset();y.O();y.nc();b.disable(b.DEPTH_TEST);b.disable(b.BLEND);V.wa();y.pa()}function qb(){sa.N();b.viewport(0,0,3,2*J.o);y.set("s49");U.ra.h(0);V.l(!1,!1);return Ga.Be(0,0,3,2*J.o,U.buffer)}function ob(){ia!==
ca.pause&&(y.nc(),V.reset(),V.wa(),b.disable(b.DEPTH_TEST),b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1),y.pa(),Y.Jd?qb().then(function(){rb();sb()}):(rb(),qb().then(sb)))}function rb(){sa.ba();if(!w.Ra)if(w.Qa)w.element.needsUpdate&&(w.L.Te(w.element.arrayBuffer),w.element.needsUpdate=!1);else{var a=w.element.currentTime,c=a-w.bb;0>c&&(w.bb=a);1E3*c<Y.Ve||(w.bb+=c,w.L.refresh())}a=za.Ac();if(J.U.length>a)J.U.splice(0,J.U.length-a);else for(;J.U.length<a;)J.U.push(0);if(1!==J.o)if(oa.every(eb)){for(var d=
0,e=c=0;e<oa.length;++e)oa[e].detected>d&&(d=oa[e].detected,c=0);for(d=0;d<a;++d)J.U[d]=c}else{c=J.Qc;d=0;for(e=!1;d<a;++d){if(eb(oa[c]))if(e){do++c===J.o&&(c=0);while(eb(oa[c]))}else e=!0;J.U[d]=c++;c>=J.o&&(c=0)}J.Qc=c}for(a=0;a<za.Ac();++a)J.ja=J.U[a],J.Hb=(.5+J.ja)/J.o,J.Lc=J.U.lastIndexOf(J.ja)===a,y.set("s51"),c=oa[J.ja],y.F("u37",1+Oa.Ob*(Math.cos(c.ry)-1)),L.ma&&y.F("u36",c.rz),1!==J.o&&y.F("u35",J.Hb),Z.oa.fa(),w.L.h(0),U.ra.h(1),V.l(!1,!1),Z.oa.h(0),Pa.T(!1,Z.oa);za.Oe()}function sb(){for(var a=
0;a<J.o;++a)if(-1!==J.U.indexOf(a)){var c=a,d=Sa[c],e=[c],m=oa[c],h=fb[c],r=2*c;d.Ia=Ea(1,r,3,0,1);m.detected=pa.X(m.detected,d.Ia,Y.rd);if(d.Ia<Y.Sc)L.ma&&(m.rz=0,m.ry=0);else{var n=U.Ba;d.x=Ea(0,r,1,-1,1);d.y=Ea(0,r,2,-1,1);d.$=Ea(0,r,3,0,1);d.Mb=Ea(1,r,0,-n[0],n[0]);d.Nb=Ea(1,r,1,-n[1],n[1]);d.Ca=Ea(1,r,2,-n[2],n[2]);for(n=0;n<U.Y;++n)d.uc[n]=U.Aa[n](Ea(2,r,n,0,1));e.tb=d.x-m.xRaw;e.ub=d.y-m.yRaw;e.sb=d.$-m.sRaw;e.pb=d.Mb-m.rx;e.qb=d.Nb-m.ry;e.rb=L.ma?d.Ca:d.Ca-m.rz;r=za.Xd();e=(1-Xa.Va(ta.translationFactorRange[0],
ta.translationFactorRange[1],Math.sqrt(e.tb*e.tb+e.ub*e.ub+e.sb*e.sb)/r))*(1-Xa.Va(ta.rotationFactorRange[0],ta.rotationFactorRange[1],Math.sqrt(e.pb*e.pb+e.qb*e.qb+e.rb*e.rb)/r))*Xa.Va(ta.qualityFactorRange[0],ta.qualityFactorRange[1],d.Ia);c=h[++gb[c]%h.length]=e;for(r=0;r<h.length;++r)c=Math.min(c,h[r]);c=Math.max(.5,c);e=Math.min(c,e);h=pa.X(ta.alphaRange[1],ta.alphaRange[0],Math.pow(e,Y.td));m.xRaw=pa.X(m.xRaw,d.x,h);m.yRaw=pa.X(m.yRaw,d.y,h);m.sRaw=pa.X(m.sRaw,d.$,h);m.rx=pa.X(m.rx,d.Mb,h);
m.ry=pa.X(m.ry,d.Nb,h);m.rz=L.ma?m.rz+h*d.Ca:pa.X(m.rz,d.Ca,h);c=m.sRaw*Oa.ob*Math.sin(m.ry);e=Math.sin(m.rz)*c/Qa;m.x=m.xRaw+Math.cos(m.rz)*c;m.y=m.yRaw+e;m.s=m.sRaw;h=Math.max(h,Y.sd);for(c=0;c<U.Y;++c)m.expressions[c]=pa.X(m.expressions[c],d.uc[c],h);++d.Ya}}sa.Re();sa.reset();X.reset();b.enable(b.DEPTH_TEST);L.Ha&&(1===J.o?L.Ha(oa[0]):L.Ha(oa));b.disable(b.BLEND);ia===ca.play&&(Na=window.requestAnimationFrame(Jb))}function tb(){Z.oa=X.instance({isPot:!0,isFloat:!1,width:Pa.$d()});for(var a=Y.jd,
c=J.o,d=new Float32Array([0,.5,.5,0,0,0,0,0,0,0,0,0]),e=new Float32Array(d.length*J.o),m=0,h;m<J.o;++m)for(h=0;h<d.length;++h)e[m*d.length+h]=d[h];U.ra=Kb.instance({width:a,height:c,isFloat:!0,isPot:!1,array:e})}function Lb(){function a(c){for(var d=[],e=0;e<J.o;++e)d.push(JSON.parse(JSON.stringify(c)));return d}U.buffer=new Uint8Array(8*Y.jd*J.o);Sa=a({Ia:0,x:0,y:0,$:1,Mb:0,Nb:0,Ca:0,uc:new Float32Array(U.Y),Ya:0});oa=a({detected:0,x:0,y:0,s:1,xRaw:0,yRaw:0,sRaw:1,rx:0,ry:0,rz:0,expressions:new Float32Array(U.Y)});
a({tb:0,ub:0,sb:0,pb:0,qb:0,rb:0})}function hb(){y.S("s51",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u33",value:1},{type:"2f",name:"u34",value:Z.C},{type:"1f",name:"u35",value:.5},{type:"1f",name:"u36",value:0}]);y.S("s52",[{type:"1i",name:"u38",value:0},{type:"1i",name:"u33",value:1},{type:"1f",name:"u41",value:Y.Pe},{type:"1f",name:"u42",value:na.threshold},{type:"3f",name:"u40",value:[U.M[0]*Z.C[0],U.M[1]*Z.C[1],U.M[2]]},{type:"1f",name:"u35",value:.5},{type:"1f",name:"u43",value:1},{type:"1f",
name:"u36",value:0}]);var a=[{type:"1i",name:"u38",value:0}];y.S("s53",a);y.S("s54",a);y.S("s49",[{type:"1i",name:"u33",value:0},{type:"1f",name:"u46",value:Z.C[0]},{type:"2f",name:"u45",value:[0,.5/J.o]}])}function ib(){Z.C[0]=1;Z.C[1]=Z.P/Z.K;ub.B({$a:na.overlapFactors,Wc:na.nScaleLevels,P:Z.P,K:Z.K,cd:na.scale0Factor,M:U.M,dd:na.scanCenterFirst})}function Mb(a){if(L.sa)vb("string"===typeof L.sa?JSON.parse(L.sa):L.sa,a);else{var c=L.Zb;"JSON"!==c.toUpperCase().split(".").pop()&&(c+=Y.neuralNetworkPath);
wb.get(c,function(d){d=JSON.parse(d);vb(d,a)})}}function vb(a,c){if(a.exportData){var d=a.exportData;d.rotationEulerAnglesFactors&&(U.Ba=d.rotationEulerAnglesFactors);d.translationScalingFactors&&(U.M=d.translationScalingFactors);"undefined"!==typeof d.nExpressions&&(U.Y=d.nExpressions);Oa.Ob=.4;Oa.ob=.7;"undefined"!==typeof d.fgScaleXFactor&&(Oa.Ob=d.fgScaleXFactor);"undefined"!==typeof d.fgDisplaceXFactor&&(Oa.ob=d.fgDisplaceXFactor)}U.Y||(U.Y=Y.Vc);if(!U.Aa)for(U.Aa=[],d=0;d<U.Y;++d)U.Aa.push(Y.Rd);
c(a)}function Nb(){if(Ga.B({lb:L.ca,width:Z.P,height:Z.K,debug:!1,Xc:function(){Ha("GLCONTEXT_LOST")},antialias:L.antialias,premultipliedAlpha:!0}))return!0;Ha("GL_INCOMPATIBLE");return!1}function eb(a){return a.detected<=Y.Sc}function xb(a,c,d,e){return d>a?Math.max(0,a+c/2-(d-e/2)):Math.max(0,d+e/2-(a-c/2))}function Ob(){return Sa.some(function(a,c){if(c===J.ja)return!1;c=Sa[J.ja];if(c.Ya>a.Ya||3>a.Ya||xb(c.x,c.$,a.x,a.$)<Y.Tc*c.$)return!1;var d=Z.P/Z.K;return xb(c.y,c.$*d,a.y,a.$*d)>Y.Tc*c.$*d})}
function Pb(){var a=J.ja;U.ra.Ge(1);1!==J.o&&(b.viewport(0,0,3,J.o),y.set("s0"),y.hd("u1",1),V.l(!1,!1),y.hd("u1",0));b.viewport(0,a,1,1);y.set("s52");L.ma&&y.F("u36",oa[a].rz);1!==J.o&&y.F("u35",J.Hb);if(1<J.o){var c=Ob()?0:1;y.F("u43",c)}y.Ie("u39",ub.get());V.l(!1,!1);J.Lc&&(b.viewport(1,a,1,1),y.set("s53"),V.l(!1,!1),b.viewport(2,a,1,1),y.set("s54"),V.l(!1,!1))}function yb(){w.L&&w.L.remove();w.Qa=w.element.isFakeVideo?!0:!1;if(w.Qa){var a=zb();a={isFlipY:!1,array:w.element.arrayBuffer,width:a.w,
height:a.na,isKeepArray:!0}}else a={J:w.element};w.Sb=X.instance(Object.assign({isPot:!1,isLinear:!0,isFloat:!1},a));w.L=w.Sb}function Ia(){var a=[{type:"mat2",name:"u32",value:w.u}];y.S("s50",[{type:"1i",name:"u1",value:0}].concat(a));y.S("s51",a)}function Ja(){w.I[0]=.5;w.I[1]=.5;var a=w.C[1]/w.C[0];Qa=Ga.V()/Ga.G();90===Math.abs(ma.rotate)&&(a=1/a);a>Qa?w.I[1]*=Qa/a:w.I[0]*=a/Qa;y.S("s52",[{name:"u44",type:"1f",value:Qa}]);w.u[0]=0;w.u[1]=0;w.u[2]=0;w.u[3]=0;switch(ma.rotate){case 0:w.u[0]=w.I[0];
w.u[3]=w.I[1];break;case 180:w.u[0]=-w.I[0];w.u[3]=-w.I[1];break;case 90:w.u[1]=w.I[0];w.u[2]=-w.I[1];break;case -90:w.u[1]=-w.I[0],w.u[2]=w.I[1]}ma.flipX&&(w.u[0]*=-1,w.u[2]*=-1);w.Ra||(w.u[1]*=-1,w.u[3]*=-1)}function zb(){var a={w:w.element.videoWidth||w.element.width,na:w.element.videoHeight||w.element.height};if(!a.w||!a.na||4>a.w||4>a.na)throw Error("INVALID VIDEO DIMENSIONS - width = "+a.w+" height = "+a.na);return a}function jb(){var a=zb(),c=w.C[0]!==a.w||w.C[1]!==a.na;c&&(w.C[0]=a.w,w.C[1]=
a.na);return c}function Ya(a,c){if(ia===ca.error)return!1;w.element=a;jb();c&&c();return!0}function Ab(a,c,d){a&&a();w.ya={video:{facingMode:{exact:ma.facingMode},width:{min:ma.minWidth,max:ma.maxWidth,ideal:ma.idealWidth},height:{min:ma.minHeight,max:ma.maxHeight,ideal:ma.idealHeight}},audio:!1};ma.deviceId&&(w.ya.deviceId=ma.deviceId);T.get(w.element?w.element:T.de(),function(e){c&&c(e);d(e)},function(){Ha("WEBCAM_UNAVAILABLE")},w.ya)}function Ha(a){ia!==ca.error&&(ia=ca.error,L.xa&&L.xa(a))}var pa=
{Rf:function(a){return Math.ceil(Math.log2(a))},pe:function(a){return Math.log2(a)},eg:function(a){return 0===Math.log2(a)%1},df:function(a){var c=[0,0,0,0];a.forEach(function(d){c[0]+=d[0];c[1]+=d[1];c[2]+=d[2];c[3]+=d[3]});return c},ef:function(a,c,d){return Math.min(Math.max(a,c),d)},hf:function(a){return a*Math.PI/180},kg:function(a,c){c=Math.pow(10,c);return Math.round(a*c)/c},lg:function(a){return Math.round(1E6*a)/1E6},Sf:function(a,c){return(100*a/c).toFixed(3)},X:function(a,c,d){return a*
(1-d)+c*d},Nd:function(a,c){return pa.Fd(a-c)},Fd:function(a){for(;a>Math.PI;)a-=2*Math.PI;for(;a<=-Math.PI;)a+=2*Math.PI;return a},kf:function(a,c){return Math.abs(pa.Nd(a,c))},We:function(a,c){return Math.atan2(Math.sin(a)+Math.sin(c),Math.cos(a)+Math.cos(c))}},wb={get:function(a,c,d){var e=new XMLHttpRequest;e.open("GET",a,!0);e.withCredentials=!1;e.onreadystatechange=function(){4===e.readyState&&(200===e.status||0===e.status?c(e.responseText):"undefined"!==typeof d&&d(e.status))};e.send()},Of:function(a,
c){wb.get(a,function(d){c(JSON.parse(d))})},ig:function(a,c,d){var e=new XMLHttpRequest;e.open("POST",a,!0);e.setRequestHeader("Content-type","application/x-www-form-urlencoded");e.onreadystatechange=function(){4!==e.readyState||200!==e.status&&0!==e.status||d(e.responseText)};e.send(c)},Df:function(a,c){var d=new XMLHttpRequest;d.open("POST",a,!0);d.responseType="arraybuffer";d.onload=function(){c(d.response)};d.send()}},kb={mb:function(a,c){if(0===c||"object"!==typeof a)return a;a=Object.assign({},
a);c=void 0===c||-1===c?-1:c-1;for(var d in a)a[d]=kb.mb(a[d],c);return a}},Xa={wg:function(a,c,d){a=Math.min(Math.max((d-a)/(c-a),0),1);return a*a*(3-2*a)},Va:function(a,c,d){return Math.min(Math.max((d-a)/(c-a),0),1)},xf:function(a,c,d,e){return Math.pow(Math.min(Math.max((e-a)/(c-a),0),1),d)},Ag:function(){return 0},hg:function(){return 1},gg:function(a){return a},uf:function(a){return a*a},zf:function(a){return a*(2-a)},rf:function(a){return.5>a?2*a*a:-1+(4-2*a)*a},pf:function(a){return a*a*a},
yf:function(a){return--a*a*a+1},qf:function(a){return.5>a?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1},vf:function(a){return a*a*a*a},Af:function(a){return 1- --a*a*a*a},sf:function(a){return.5>a?8*a*a*a*a:1-8*--a*a*a*a},wf:function(a){return a*a*a*a*a},Bf:function(a){return 1+--a*a*a*a*a},tf:function(a){return.5>a?16*a*a*a*a*a:1+16*--a*a*a*a*a}},Qb={Td:function(a,c,d){switch(a){case "relu":return d+"=max(vec4(0.,0.,0.,0.),"+c+");";case "elu":return d+"=mix(exp(-abs("+c+"))-vec4(1.,1.,1.,1.),"+c+",step(0.,"+
c+"));";case "elu01":return d+"=mix(0.1*exp(-abs("+c+"))-vec4(0.1,0.1,0.1,0.1),"+c+",step(0.,"+c+"));";case "arctan":return d+"=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}},y=function(){function a(v,t,C){t=v.createShader(t);v.shaderSource(t,C);v.compileShader(t);return v.getShaderParameter(t,v.COMPILE_STATUS)?t:!1}function c(v,t,C){t=a(v,v.VERTEX_SHADER,t);C=a(v,v.FRAGMENT_SHADER,C);v===b&&r.push(t,C);var O=v.createProgram();v.attachShader(O,t);v.attachShader(O,
C);v.linkProgram(O);return O}function d(v,t){void 0===t.la&&(t.la="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");void 0===t.Fa&&(t.Fa=["a0"]);void 0===t.ua&&(t.ua=[2]);if(void 0===t.precision||"highp"===t.precision)t.precision=x;t.id=u++;void 0!==t.ed&&(t.ed.forEach(function(O,A){t.g=t.g.replace(O,t.cb[A])}),t.ed.splice(0));t.Yb=0;t.ua.forEach(function(O){t.Yb+=4*O});t.ka=c(v,t.la,"precision "+t.precision+" float;\n"+t.g);
t.v={};t.i.forEach(function(O){t.v[O]=v.getUniformLocation(t.ka,O)});t.attributes={};t.va=[];t.Fa.forEach(function(O){var A=v.getAttribLocation(t.ka,O);t.attributes[O]=A;t.va.push(A)});if(t.j){v.useProgram(t.ka);k=t;n=t.id;for(var C in t.j)v.uniform1i(t.v[C],t.j[C])}t.Db=!0}function e(v){ua.He(W);n!==v.id&&(W.O(),n=v.id,k=v,b.useProgram(v.ka),v.va.forEach(function(t){0!==t&&b.enableVertexAttribArray(t)}))}function m(v,t,C){d(v,t,C);v.useProgram(t.ka);v.enableVertexAttribArray(0);n=-1;return k=t}function h(){return{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",
i:["u1"],j:{u1:0}}}var r=[],n=-1,k=null,u=0,g=!1,x="highp",f=["u1"],l=["u0"],B={u1:0},E={u0:0},F={u1:0,u2:1},I={u3:0},D={s0:h(),s1:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:f,j:B,precision:"lowp"},s2:{g:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",i:["u1","u2"],j:F},s3:{g:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",
i:f,j:B},s4:{g:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",i:["u1","u2"],j:F},s5:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",i:f,j:B},s6:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",i:f,j:B},s7:{g:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u4;}",
i:["u0","u4"],j:E},s8:{g:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;const vec4 f=vec4(.25,.25,.25,.25),g=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u4,f);gl_FragColor=b*g;}",i:["u0","u4"],j:E},s9:{g:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",i:f,j:B},s10:{g:"uniform sampler2D u1,u5;uniform float u6;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u5,vv0);gl_FragColor=mix(b,a,u6*f);}",
i:["u1","u5","u6"],j:{u1:0,u5:1}},s11:{g:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u7)+texture2D(u1,vv0+u7*vec2(1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,1.)));}",i:["u1","u7"],j:B},s12:{g:"uniform sampler2D u1;uniform vec4 u8;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 j(float a){if(a==0.)return vec4(0.,0.,0.,0.);float k=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),l=c+127.,b=(a/exp2(c)-1.)*8388608.,d=l/2.,m=fract(d)*2.,n=floor(d),o=e(b,0.,8.),p=e(b,8.,16.),q=m*128.+e(b,16.,23.),r=k+n;return vec4(o,p,q,r)/255.;}void main(){float a=dot(texture2D(u1,vv0),u8);gl_FragColor=j(a);}",
i:["u1","u8"],j:B},s13:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",i:l,j:E},s14:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(f,a);}",i:l,j:E},s15:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-f,a,step(0.,a));}",i:l,j:E},s16:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-f;gl_FragColor=mix(.1*b,a,step(0.,a));}",
i:l,j:E},s17:{g:"uniform sampler2D u0,u6,u9;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u6,vv0),d=texture2D(u9,vv0),b=a/d;gl_FragColor=c*mix(exp(-abs(b))-f,b,step(0.,a));}",i:["u0","u6","u9"],j:{u0:0,u6:1,u9:2}},s18:{g:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",i:l,j:E},s19:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=log(f+a);gl_FragColor=b;}",
i:l,j:E},s20:{g:"uniform sampler2D u0,u10;uniform float u11;const vec2 e=vec2(.5,.5);const float f=1e-5;const vec4 g=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u10,e);float b=u11*u11;vec4 c=max(b*a,f*g);gl_FragColor=texture2D(u0,vv0)/c;}",i:["u0","u10","u11"],j:{u0:0,u10:1}},s21:{g:"uniform sampler2D u1;uniform vec2 u12;varying vec2 vv0;void main(){float a=u12.x*u12.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u12.y),f=floor(u12.x*fract(b*u12.y)),g=(f*u12.y+d)/a;gl_FragColor=texture2D(u1,g+c/a);}",
i:["u1","u12"],j:B},s22:{g:"uniform sampler2D u13,u14,u15;varying vec2 vv0;void main(){vec4 a=texture2D(u15,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u13,b),f=texture2D(u14,c);gl_FragColor=d*f;}",i:["u13","u14","u15"],j:{u14:0,u13:1,u15:2}},s23:{g:"uniform float u16;uniform sampler2D u13,u14;varying vec2 vv0;void main(){vec2 a=fract(vv0*u16);vec4 b=texture2D(u13,vv0),c=texture2D(u14,a);gl_FragColor=b*c;}",i:["u14","u13","u16"],j:{u14:0,u13:1}},s24:{g:"uniform float u16;uniform sampler2D u13,u14,u17,u18,u19,u20;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 h=vv0*u16,l=floor(h),c=h-l;vec4 m=texture2D(u13,vv0),d=texture2D(u14,c),a=texture2D(u20,vv0);a=a*255.;vec4 n=texture2D(u17,c),o=texture2D(u18,c),p=texture2D(u19,c),i=step(-g,-a),b=e-i,j=b*step(-e-g,-a);b*=e-j;vec4 k=b*step(-2.*e-g,-a);b*=e-k;vec4 q=b;d=i*d+j*n+k*o+q*p,gl_FragColor=m*d;}",
i:"u13 u14 u16 u20 u17 u18 u19".split(" "),j:{u14:0,u13:1,u20:3,u17:4,u18:5,u19:6}},s25:{g:"uniform sampler2D u13,u14,u21;uniform float u16,u22,u23,u24;varying vec2 vv0;const vec2 j=vec2(1.,1.);void main(){vec2 a=floor(u22*vv0),b=u22*vv0-a;float c=u16/u22;vec2 d=floor(b*c),f=b*c-d,g=(a+f)/u22;float k=u22*u24/u16;vec2 l=k*d,h=(l+f*u23)/u24,i=step(h,j);vec4 m=texture2D(u13,g),n=texture2D(u14,h),o=m*n*i.x*i.y,p=texture2D(u21,g);gl_FragColor=o*u23*u23+p;}",i:"u13 u14 u16 u22 u23 u24 u21".split(" "),j:{u14:0,
u13:1,u21:2}},s26:{g:"uniform sampler2D u13,u14;varying vec2 vv0;void main(){vec4 a=texture2D(u13,vv0),b=texture2D(u14,vv0);gl_FragColor=a*b;}",i:["u13","u14"],j:{u14:0,u13:1}},s27:{g:"uniform sampler2D u1,u21;uniform float u25;varying vec2 vv0;void main(){gl_FragColor=texture2D(u21,vv0)+u25*texture2D(u1,vv0);}",i:["u1","u21","u25"],j:{u1:0,u21:1}},s28:{g:"varying vec2 vv0;uniform sampler2D u1;const vec4 f=vec4(1.,1.,1.,1.),g=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,g)*f;}",
i:f,j:B,precision:"lowp"},s29:{g:"varying vec2 vv0;uniform sampler2D u1;uniform float u26;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u26)).rgb,c=texture2D(u1,vv0+vec2(u26,u26)).rgb,d=texture2D(u1,vv0+vec2(u26,0.)).rgb;gl_FragColor=vec4(dot(a,f),dot(b,f),dot(c,f),dot(d,f));}",i:["u1","u26"],j:B,precision:"lowp"},s30:{g:"varying vec2 vv0;uniform sampler2D u1;uniform float u26;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u26)).rgb,c=texture2D(u1,vv0+vec2(u26,u26)).rgb,d=texture2D(u1,vv0+vec2(u26,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
i:["u1","u26"],j:B,precision:"lowp"},s31:{g:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u27;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u27,vv0.y-u27))*1.,a-=texture2D(u1,vec2(vv0.x-u27,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u27,vv0.y+u27))*1.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y-u27))*1.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y+u27))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u27,vv0.y-u27))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u27))*2.,b-=texture2D(u1,vec2(vv0.x+u27,vv0.y-u27))*1.,b+=texture2D(u1,vec2(vv0.x-u27,vv0.y+u27))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u27))*2.,b+=texture2D(u1,vec2(vv0.x+u27,vv0.y+u27))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),g=texture2D(u2,vv0);gl_FragColor=g.a*e.r*f;}",
i:["u1","u2","u27"],j:F},s32:{g:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u27;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float h=0.;vec2 l=k*u27,a,b;float c,d,i=0.;for(float e=-4.;e<=4.;e+=1.)for(float f=-4.;f<=4.;f+=1.)a=vec2(e,f),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,h+=d*texture2D(u1,b).r,i+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-h/i)*j;}",i:["u1","u2","u27"],j:F},s33:{g:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 g=vec2(.5,.5),h=vec2(1.,0.),i=vec2(0.,1.);void main(){vec2 a=vv0-u7*g;vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*h),d=texture2D(u3,a+u7*i),j=texture2D(u3,a+u7),k=e(b,c),l=e(d,j);gl_FragColor=e(k,l);}",
i:["u3","u7"],j:I},s34:{g:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;const vec2 k=vec2(1.,0.),l=vec2(0.,1.),m=vec2(2.,0.),n=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*k),d=texture2D(u3,a+u7*l),g=texture2D(u3,a+u7),h=e(b,c),i=e(d,g);return e(h,i);}void main(){vec2 a=vv0+u7*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u7*m),d=f(a+u7*2.),g=f(a+u7*n),h=e(b,c),i=e(d,g);gl_FragColor=e(h,i);}",i:["u3","u7"],j:I},s35:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",
i:["u1"],j:B,precision:"lowp"},s36:{g:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;const float e=15444.;void main(){vec4 a=1001./e*texture2D(u1,vv0-3.*u7)+2002./e*texture2D(u1,vv0-2.*u7)+3003./e*texture2D(u1,vv0-u7)+3432./e*texture2D(u1,vv0)+3003./e*texture2D(u1,vv0+u7)+2002./e*texture2D(u1,vv0+2.*u7)+1001./e*texture2D(u1,vv0+3.*u7);gl_FragColor=a;}",i:["u7","u1"],j:B,precision:"lowp"},s37:{g:"uniform sampler2D u1,u28,u29;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);const float g=.1;void main(){vec4 a=texture2D(u28,vv0),b=texture2D(u29,vv0),c=texture2D(u1,vv0),d=max(f*g,b-a*a),h=sqrt(d);gl_FragColor=(c-a)/h;}",
i:["u1","u28","u29"],j:{u1:0,u28:1,u29:2}}},H={s38:{g:"uniform float u16,u30;uniform sampler2D u13,u14,u21;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-5,1e-5);void main(){vec4 sum=texture2D(u21,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u16,xyTo=floor(vv0*u16+eps2);float weightSize=toSparsity*u16;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u30*(xyPatch-halfFromSparsity))/u16,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u13,uvWeight)*texture2D(u14,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:["u16","u13","u14","u21","u30"],cb:["1.1111","gl_FragColor\\*=2.2222;"]},s39:{g:"uniform float u16,u30,u24;uniform sampler2D u13,u14,u21;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u21,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u24,xyTo=floor(vv0*u16+eps2);float weightSize=fromSparsity*u24;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u16;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u30*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u24,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u13,uvWeight)*texture2D(u14,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:"u16 u24 u13 u14 u21 u30".split(" "),cb:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},G=null,R=null,W={Ta:function(){return g},B:function(){if(!g){G=kb.mb(D,2);R=kb.mb(H,2);x="highp";for(var v in G)d(b,G[v],v);y.set("s0");b.enableVertexAttribArray(0);g=!0}},qd:function(v){v.forEach(function(t){W.ac(t)})},ac:function(v){G[v.id]=v;d(b,v,v.id)},Ec:function(v,t,C){t||(t=v);G[t]=Object.create(R[v]);G[t].je=!0;R[v].cb&&R[v].cb.forEach(function(O,A){G[t].g=G[t].g.replace(new RegExp(O,"g"),C[A])});d(b,
G[t],t)},set:function(v){e(G[v])},eb:function(v){return m(v,h(),"s40")},Pb:function(v){return m(v,{g:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",i:[],precision:"highp"},"s41")},Qd:function(v){return"undefined"===typeof G[v]?!1:G[v].Db},O:function(){-1!==n&&(n=-1,k.va.forEach(function(v){0!==v&&b.disableVertexAttribArray(v)}))},Rb:function(){var v=0;k.va.forEach(function(t,C){C=k.ua[C];b.vertexAttribPointer(t,C,b.FLOAT,!1,k.Yb,v);v+=4*C})},nc:function(){b.enableVertexAttribArray(0)},pa:function(){W.fb(b)},
fb:function(v){v.vertexAttribPointer(k.va[0],2,v.FLOAT,!1,8,0)},hd:function(v,t){b.uniform1i(k.v[v],t)},F:function(v,t){b.uniform1f(k.v[v],t)},Da:function(v,t,C){b.uniform2f(k.v[v],t,C)},qg:function(v,t){b.uniform2fv(k.v[v],t)},Ie:function(v,t){b.uniform3fv(k.v[v],t)},rg:function(v,t,C,O){b.uniform3f(k.v[v],t,C,O)},sg:function(v,t,C,O,A){b.uniform4f(k.v[v],t,C,O,A)},Qb:function(v,t){b.uniform4fv(k.v[v],t)},tg:function(v,t){b.uniformMatrix2fv(k.v[v],!1,t)},ug:function(v,t){b.uniformMatrix3fv(k.v[v],
!1,t)},vg:function(v,t){b.uniformMatrix4fv(k.v[v],!1,t)},S:function(v,t){W.set(v);t.forEach(function(C){switch(C.type){case "4f":b.uniform4fv(k.v[C.name],C.value);break;case "3f":b.uniform3fv(k.v[C.name],C.value);break;case "2f":b.uniform2fv(k.v[C.name],C.value);break;case "1f":b.uniform1f(k.v[C.name],C.value);break;case "1i":b.uniform1i(k.v[C.name],C.value);break;case "mat2":b.uniformMatrix2fv(k.v[C.name],!1,C.value);break;case "mat3":b.uniformMatrix3fv(k.v[C.name],!1,C.value);break;case "mat4":b.uniformMatrix4fv(k.v[C.name],
!1,C.value)}})},Qf:function(){return"lowp"},m:function(){b.disableVertexAttribArray(0);W.O();for(var v in G){var t=G[v];t.Db&&(t.Db=!1,b.deleteProgram(t.ka));t.je&&delete G[v]}r.forEach(function(C){b.deleteShader(C)});r.splice(0);u=0;g=!1;k=null;n=-1}};return W}(),b=null,Ga=function(){function a(f){console.log("ERROR in ContextFF: ",f);return!1}function c(f){function l(){Aa.m();E.getExtension("WEBGL_lose_context").loseContext()}if(navigator.userAgent&&-1!==navigator.userAgent.indexOf("forceWebGL1"))return!1;
var B=document.createElement("canvas");B.setAttribute("width",1);B.setAttribute("height",1);var E=null;try{E=B.getContext("webgl2",f)}catch(F){return!1}if(!E)return!1;d(E);ba.oc(E);f=ba.nb(E);if(!f.da&&!f.ea)return l(),!1;f=Aa.ec(E,f);l();return f?!0:!1}function d(f){f.clearColor(0,0,0,0);f.disable(f.DEPTH_TEST);f.disable(f.BLEND);f.disable(f.DITHER);f.disable(f.STENCIL_TEST);f.disable(f.CULL_FACE);f.GENERATE_MIPMAP_HINT&&f.hint(f.GENERATE_MIPMAP_HINT,f.FASTEST);f.disable(f.SAMPLE_ALPHA_TO_COVERAGE);
f.disable(f.SAMPLE_COVERAGE);f.depthFunc(f.LEQUAL);f.clearDepth(1)}var e=null,m=null,h=null,r=null,n=null,k=!0,u=null,g=null,x={G:function(){return e.width},V:function(){return e.height},Hf:function(){return e},Ff:function(){return b},W:function(){return k},flush:function(){b.flush()},Wd:function(){u||(u=new Uint8Array(e.width*e.height*4));b.readPixels(0,0,e.width,e.height,b.RGBA,b.UNSIGNED_BYTE,u);return u},Jf:function(){return e.toDataURL("image/jpeg")},Kf:function(){sa.N();m||(m=document.createElement("canvas"),
h=m.getContext("2d"));m.width=e.width;m.height=e.height;for(var f=x.Wd(),l=h.createImageData(m.width,m.height),B=m.width,E=m.height,F=l.data,I=0;I<E;++I)for(var D=E-I-1,H=0;H<B;++H){var G=4*(I*B+H),R=4*(D*B+H);F[G]=f[R];F[G+1]=f[R+1];F[G+2]=f[R+2];F[G+3]=f[R+3]}h.putImageData(l,0,0);return m.toDataURL("image/png")},If:function(f){!m&&f&&(m=document.createElement("canvas"),h=m.getContext("2d"));var l=f?m:document.createElement("canvas");l.width=e.width;l.height=e.height;(f?h:l.getContext("2d")).drawImage(e,
0,0);return l},B:function(f){f.Id&&!f.lb?e=document.getElementById(f.Id):f.lb&&(e=f.lb);e||(e=document.createElement("canvas"));e.width=f&&void 0!==f.width?f.width:512;e.height=f&&void 0!==f.height?f.height:512;"undefined"===typeof f&&(f={});void 0===f.premultipliedAlpha&&(f.premultipliedAlpha=!1);void 0===f.Ic&&(f.Ic=!0);void 0===f.antialias&&(f.antialias=!1);if(b)k=b instanceof WebGL2RenderingContext;else{k=!0;var l={antialias:f.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:f.premultipliedAlpha,
stencil:!1,depth:f.Ic};navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("noAntialiasing")&&(l.antialias=!1);var B=c(l);!B&&l.antialias&&(l.antialias=!1,B=c(l));B&&(b=e.getContext("webgl2",l));b?k=!0:((b=e.getContext("webgl",l))||(b=e.getContext("experimental-webgl",l)),k=!1)}if(!b)return a("WebGL1 and 2 are not enabled");(r=b.getExtension("WEBGL_lose_context"))&&f.Xc&&(g=f.Xc,e.addEventListener("webglcontextlost",g,!1));if(!ba.B())return a("Not enough GL capabilities");d(b);y.B();
V.B();return Aa.ec(b,ba.Vd())?!0:a("Cannot filter float textures")},Be:function(f,l,B,E,F){if(!ba.Bd())return b.readPixels(f,l,B,E,b.RGBA,b.UNSIGNED_BYTE,F),Promise.resolve();var I=b.PIXEL_PACK_BUFFER;null===n?(n=b.createBuffer(),b.bindBuffer(I,n),b.bufferData(I,F.byteLength,b.STREAM_READ)):b.bindBuffer(I,n);b.readPixels(f,l,B,E,b.RGBA,b.UNSIGNED_BYTE,0);var D=b.fenceSync(b.SYNC_GPU_COMMANDS_COMPLETE,0);b.flush();return new Promise(function(H,G){var R=null;R=setInterval(function(){switch(b.clientWaitSync(D,
0,0)){case b.WAIT_FAILED:clearInterval(R);G();break;case b.TIMEOUT_EXPIRED:break;default:clearInterval(R),b.deleteSync(D),b.getBufferSubData(I,0,F),b.bindBuffer(I,null),H()}},.1)})},m:function(){b&&(ba.m(),Aa.m());r&&g&&(e.removeEventListener("webglcontextlost",g,!1),r=g=null);null!==n&&(b.deleteBuffer(n),n=null);b=u=h=m=e=null}};return x}(),ua=function(){function a(){null===c&&("undefined"!==typeof y?c=y:"undefined"!==typeof JEShaders&&(c=JEShaders))}var c=null;a();return{He:function(d){c!==d&&(c&&
c.O(),c=d)},Ta:function(){return c.Ta()},pa:function(){return c.pa()},fb:function(d){return c.fb(d)},Rb:function(){return c.Rb()},O:function(){return c.O()},set:function(d){return c.set(d)},eb:function(d){a();return c.eb(d)},Pb:function(d){a();return c.Pb(d)},m:function(){return c.m()}}}(),Da=function(){function a(p){b.bindTexture(b.TEXTURE_2D,p)}function c(p){t[0]=p;p=C[0];var M=p>>16&32768,K=p>>12&2047,q=p>>23&255;return 103>q?M:142<q?M|31744|((255==q?0:1)&&p&8388607):113>q?(K|=2048,M|(K>>114-q)+
(K>>113-q&1)):M=(M|q-112<<10|K>>1)+(K&1)}function d(p){var M=new Uint16Array(p.length);p.forEach(function(K,q){M[q]=c(K)});return M}function e(){if(null!==O.Ab)return O.Ab;var p=h(d([1,1,1,1]));return null===p?!0:O.Ab=p}function m(){if(null!==O.Bb)return O.Bb;var p=h(new Uint8Array([255,255,255,255]));return null===p?!0:O.Bb=p}function h(p){if(!ua.Ta()||!E)return null;var M=null;try{var K=b.getError();if("FUCKING_BIG_ERROR"===K)return!1;M=A.instance({isFloat:!1,R:!0,array:p,width:1});K=b.getError();
if(K!==b.NO_ERROR)return!1}catch(q){return!1}ka.N();b.viewport(0,0,1,1);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT);ua.set("s0");M.cc(0);la.l(!0,!0);p=new Uint8Array(4);b.readPixels(0,0,1,1,b.RGBA,b.UNSIGNED_BYTE,p);p=.9<p[0];M.remove();ka.ba();return p}var r=0,n=null,k=0,u=null,g=null,x=null,f=null,l=null,B=null,E=!1,F=[],I={isFloat:!1,isPot:!0,isLinear:!1,isMipmap:!1,isAnisotropicFiltering:!1,isMirrorX:!1,isMirrorY:!1,isSrgb:!1,isKeepArray:!1,isFlipY:null,width:0,height:0,url:null,array:null,
data:null,J:null,zb:null,ie:!1,R:!1,ia:null,Xa:4,Eb:0},D=!1,H=null,G=null,R=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],W=!1,v=!1,t=new Float32Array(1),C=new Int32Array(t.buffer),O={Ab:null,Bb:null},A={B:function(){E||(l=[b.RGB,null,b.RGB,b.RGBA],B=[b.RGB,null,b.RGB,b.RGBA],n=[b.TEXTURE0,b.TEXTURE1,b.TEXTURE2,b.TEXTURE3,b.TEXTURE4,b.TEXTURE5,b.TEXTURE6,b.TEXTURE7],W="undefined"!==typeof JEContext,v="undefined"!==typeof ba,W&&JEContext.fg()&&n.push(b.TEXTURE8,b.TEXTURE9),u=[-1,-1,-1,-1,-1,-1,-1,-1],
f=[b.UNSIGNED_BYTE,b.FLOAT,b.FLOAT],E=!0)},fe:function(){if(!g){for(var p=new Float32Array(16384),M=0;16384>M;++M)p[M]=2*Math.random()-1;g={random:A.instance({isFloat:!0,isPot:!0,array:p,width:64}),nd:A.instance({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}A.Ue()},Xf:function(){return g.nd},Ue:function(){f[1]=ba.xb(b)},Ee:function(){B=l=[b.RGBA,b.RGBA,b.RGBA,b.RGBA]},jg:function(p,M){y.set("s1");ka.N();var K=p.G(),q=p.V();b.viewport(0,0,K,q);p.h(0);la.l(!1,!1);b.readPixels(0,0,
K,q,b.RGBA,b.UNSIGNED_BYTE,M)},wc:function(p,M,K,q,ea,va,Ba){p.activeTexture(p.TEXTURE0);var qa=p.createTexture();p.bindTexture(p.TEXTURE_2D,qa);ea=ea instanceof Float32Array?ea:new Float32Array(ea);0!==pa.pe(ea.length)%1&&(p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE));p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST);p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST);p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,
va);p.texImage2D(p.TEXTURE_2D,0,p.RGBA,K,q,0,p.RGBA,p.FLOAT,ea);p.bindTexture(p.TEXTURE_2D,null);p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,!1);Ba&&(ka.ba(),y.set("s0"));p.viewport(0,0,K,q);p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,M,0);p.bindTexture(p.TEXTURE_2D,qa);Ba?la.l(!0,!0):V.Ma(p);p.deleteTexture(qa);E&&(u[0]=-1,x=null,r=0)},ib:function(p){p!==r&&(b.activeTexture(n[p]),r=p)},instance:function(p){function M(z){var N=b.getError();if("FUCKING_BIG_ERROR"===N)return!1;b.texImage2D(b.TEXTURE_2D,
0,fa,da,ha,z);N=b.getError();N!==b.NO_ERROR&&da!==b.RGBA&&(da=b.RGBA,b.texImage2D(b.TEXTURE_2D,0,fa,da,ha,z));return!0}function K(){if(!Bb){a(ra);wa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,wa);q.isPot?(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,q.isMirrorX?b.MIRRORED_REPEAT:b.REPEAT),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,q.isMirrorY?b.MIRRORED_REPEAT:b.REPEAT)):(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE));q.isAnisotropicFiltering&&
"undefined"!==typeof JESETTINGS&&b.texParameterf(b.TEXTURE_2D,JEContext.Lf().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.Xe);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,q.isLinear?b.LINEAR:b.NEAREST);q.isLinear?b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,q.isMipmap&&!Ka?b.NEAREST_MIPMAP_LINEAR:b.LINEAR):b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,q.isMipmap&&!Ka?b.NEAREST_MIPMAP_NEAREST:b.NEAREST);da=l[q.Xa-1];fa=B[q.Xa-1];ha=f[va];if(ba.W()){var z=b.RGBA32F;da===b.RGBA&&ha===b.FLOAT?
q.isMipmap||q.isLinear?fa=Aa.Yd(b):ba.fc()?z&&(fa=z):fa=b.RGBA16F||b.RGBA:da===b.RGB&&ha===b.FLOAT&&z&&(fa=z,da=b.RGBA)}if(q.R&&!q.isFloat||q.isFloat&&q.isMipmap&&Aa.oe())(z=b.RGBA16F)&&(fa=z),ha=ba.xb(b);q.Eb&&(Za=q.Eb);q.isSrgb&&4===q.Xa&&(da=JEContext.Vf());if(q.J)M(q.J);else if(q.url)M(Fa);else if(xa){z=xa;try{"FUCKING_BIG_ERROR"!==b.getError()&&(b.texImage2D(b.TEXTURE_2D,0,fa,P,Q,0,da,ha,z),b.getError()!==b.NO_ERROR&&(b.texImage2D(b.TEXTURE_2D,0,fa,P,Q,0,da,ha,null),b.getError()!==b.NO_ERROR&&
b.texImage2D(b.TEXTURE_2D,0,b.RGBA,P,Q,0,b.RGBA,b.UNSIGNED_BYTE,null)))}catch(bc){b.texImage2D(b.TEXTURE_2D,0,fa,P,Q,0,da,ha,null)}q.isKeepArray||(xa=null)}else z=b.getError(),"FUCKING_BIG_ERROR"!==z&&(b.texImage2D(b.TEXTURE_2D,0,fa,P,Q,0,da,ha,null),z=b.getError(),z!==b.NO_ERROR&&(da=b.RGBA,q.R&&ha!==b.FLOAT&&(ha=b.FLOAT,b.texImage2D(b.TEXTURE_2D,0,fa,P,Q,0,da,ha,null))));if(q.isMipmap)if(!Ka&&aa)aa.wb(),$a=!0;else if(Ka){z=Math.log2(Math.min(P,Q));Ra=Array(1+z);Ra[0]=ra;for(var N=1;N<=z;++N){var ja=
Math.pow(2,N),S=P/ja;ja=Q/ja;var La=b.createTexture();a(La);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texImage2D(b.TEXTURE_2D,0,fa,S,ja,0,da,ha,null);a(null);Ra[N]=La}$a=!0}a(null);u[r]=-1;wa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1);Ta=!0;q.ia&&aa&&(q.ia(aa),q.ia=null)}}var q=Object.assign({},I,p),ea=k++;null===q.isFlipY&&(q.isFlipY=q.url||q.array?!0:!1);q.data&&(q.array="string"===typeof q.data?Ib(q.data):q.isFloat?
new Float32Array(q.data):new Uint8Array(q.data),q.isFlipY=!1);var va=0,Ba=q.J?!0:!1,qa=null,lb=null,Cb=!1,mb=null;q.R=q.R||q.isFloat;q.R&&(va=1);q.ie||ba.W()||!q.isFloat||!v||ba.fc()||(q.isFloat=!1);q.isFloat&&(va=2);q.isAnisotropicFiltering&&W&&!JEContext.$f()&&(q.isAnisotropicFiltering=!1);var ra=q.zb||b.createTexture(),Fa=null,xa=!1,P=0,Q=0,Ta=!1,Bb=!1,ab=!1,ya=null,Ca=null,nb=null,Ua=null,fa=null,da=null,ha=null,wa=q.isFlipY,Rb=(p=q.R&&q.isMipmap)&&Aa.Ad(),Ka=p&&Rb?!0:!1,Ra=null,Za=-1,$a=!1,Ma=
{Mc:!1,dc:null,xc:null};q.width&&(P=q.width,Q=q.height?q.height:P);var aa={get:function(){return ra},G:function(){return P},V:function(){return Q},Yf:function(){return q.url},ag:function(){return q.isFloat},cg:function(){return q.R},dg:function(){return q.isLinear},wb:function(){b.generateMipmap(b.TEXTURE_2D)},yd:function(z,N){Ka?(z||(z=aa.Bc()),A.ib(N),a(Ra[z]),u[N]=-1):aa.h(N)},Bc:function(){-1===Za&&(Za=Math.log(P)/Math.log(2));return Za},Sd:function(z){if(Ka){z||(z=aa.Bc());y.set("s11");A.ib(0);
for(var N=P,ja=Q,S=1;S<=z;++S)N/=2,ja/=2,y.Da("u7",.25/N,.25/ja),b.viewport(0,0,N,ja),a(Ra[S-1]),b.framebufferTexture2D(ka.Pa(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,Ra[S],0),la.l(!1,1===S);u[0]=-1}else aa.wb()},h:function(z){if(!Ta)return!1;A.ib(z);if(u[z]===ea)return!1;a(ra);u[z]=ea;return!0},cc:function(z){b.activeTexture(n[z]);r=z;a(ra);u[z]=ea},A:function(){x=aa;b.framebufferTexture2D(ka.Pa(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,ra,0)},fa:function(){x=aa;b.viewport(0,0,P,Q);b.framebufferTexture2D(ka.Pa(),
b.COLOR_ATTACHMENT0,b.TEXTURE_2D,ra,0)},Xb:A.Xb,resize:function(z,N){P=z;Q=N;K()},clone:function(z){z=A.instance({width:P,height:Q,R:q.R,isFloat:q.isFloat,isLinear:q.isLinear,isMirrorY:q.isMirrorY,isFlipY:z?!wa:wa,isPot:q.isPot});ua.set("s0");ka.ba();z.A();b.viewport(0,0,P,Q);aa.h(0);la.l(!0,!0);return z},Je:function(){b.viewport(0,0,P,Q)},remove:function(){b.deleteTexture(ra);Bb=!0;F.splice(F.indexOf(aa),1);aa=null},refresh:function(){aa.cc(0);wa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);Ba?b.texImage2D(b.TEXTURE_2D,
0,fa,da,b.UNSIGNED_BYTE,q.J):b.texImage2D(b.TEXTURE_2D,0,fa,P,Q,0,da,ha,xa);wa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},lc:function(){var z=P*Q*4;Ca=[new Uint8Array(z),new Uint8Array(z),new Uint8Array(z),new Uint8Array(z)];ya=[new Float32Array(Ca[0].buffer),new Float32Array(Ca[1].buffer),new Float32Array(Ca[2].buffer),new Float32Array(Ca[3].buffer)];nb=new Uint8Array(4*z);Ua=new Float32Array(nb.buffer);ab=!0},bd:function(){ab||aa.lc();b.readPixels(0,0,P,4*Q,b.RGBA,b.UNSIGNED_BYTE,nb);for(var z=P*
Q,N=2*z,ja=3*z,S=0;S<z;++S)ya[0][S]=Ua[S],ya[1][S]=Ua[S+z],ya[2][S]=Ua[S+N],ya[3][S]=Ua[S+ja];return ya},Ae:function(){Ma.Mc||(Ma.dc=new Uint8Array(P*Q*4),Ma.xc=new Float32Array(Ma.buffer),Ma.Mc=!0);b.readPixels(0,0,P,Q,b.RGBA,b.UNSIGNED_BYTE,Ma.dc);return Ma.xc},mc:function(z){ka.N();y.set("s12");aa.h(0);if(z)b.viewport(0,0,P,Q),y.Qb("u8",.25,.25,.25,.25),la.l(!1,!0);else for(z=0;4>z;++z)b.viewport(0,Q*z,P,Q),y.Qb("u8",R[z]),la.l(!1,0===z)},Te:function(z){var N=ha===f[0]&&!m();a(ra);wa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,
!0);N?(Cb||(qa=document.createElement("canvas"),qa.width=P,qa.height=Q,lb=qa.getContext("2d"),mb=lb.createImageData(P,Q),Cb=!0),mb.data.set(z),lb.putImageData(mb,0,0),b.texImage2D(b.TEXTURE_2D,0,fa,da,ha,qa)):b.texImage2D(b.TEXTURE_2D,0,fa,P,Q,0,da,ha,z);u[r]=ea;wa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},zg:function(z,N){a(ra);N&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);b.texImage2D(b.TEXTURE_2D,0,fa,da,ha,z);u[r]=ea;N&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},og:function(z,N){var ja=P*Q,S=4*ja;
z=q.R?z?"RGBE":"JSON":"RGBA";N&&(z=N);N=ba.W()&&!1;var La=null;switch(z){case "RGBE":La="s42";break;case "JSON":La=N?"s0":"s12";break;case "RGBA":case "RGBAARRAY":La="s6"}ab||("RGBA"===z||"RGBE"===z||"RGBAARRAY"===z?(Ca=new Uint8Array(S),ab=!0):"JSON"!==z||N||aa.lc());ka.N();y.set(La);aa.h(0);S=null;if("RGBA"===z||"RGBE"===z||"RGBAARRAY"===z){b.viewport(0,0,P,Q);la.l(!0,!0);b.readPixels(0,0,P,Q,b.RGBA,b.UNSIGNED_BYTE,Ca);if("RGBAARRAY"===z)return{data:Ca};D||(H=document.createElement("canvas"),G=
H.getContext("2d"),D=!0);H.width=P;H.height=Q;ja=G.createImageData(P,Q);ja.data.set(Ca);G.putImageData(ja,0,0);S=H.toDataURL("image/png")}else if("JSON"===z)if(N)S=new Float32Array(ja),b.viewport(0,0,P,Q),la.l(!0,!0),b.readPixels(0,0,P,Q,b.RGBA,b.FLOAT,S);else{for(S=0;4>S;++S)b.viewport(0,Q*S,P,Q),y.Qb("u8",R[S]),la.l(!S,!S);aa.bd();S=Array(ja);for(N=0;N<ja;++N)S[4*N]=ya[0][N],S[4*N+1]=ya[1][N],S[4*N+2]=ya[2][N],S[4*N+3]=ya[3][N]}return{format:z,data:S,width:P,height:Q,isMirrorY:q.isMirrorY,isFlipY:"RGBA"===
z?q.isFlipY:!q.isFlipY}}};q.isMipmap&&!Ka&&Ta&&!$a&&(aa.wb(),$a=!0);if(q.url)a(ra),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,1,1,0,b.RGBA,b.UNSIGNED_BYTE,null),Fa=new Image,Fa.jf="Anonymous",Fa.crossOrigin="Anonymous",Fa.src=q.url,Fa.onload=function(){P=Fa.width;Q=Fa.height;K()};else if(q.J){var Db=function(){P=void 0!==q.J.videoWidth?q.J.videoWidth:q.J.width;Q=void 0!==q.J.videoHeight?q.J.videoHeight:q.J.height;P?K():setTimeout(Db,1)};Db()}else q.array?(q.R&&!q.isFloat?q.array instanceof Uint16Array?(xa=
q.array,K()):e()?(xa=d(q.array),K()):(K(),A.wc(b,ra,aa.G(),aa.V(),q.array,wa,!0)):(xa=q.isFloat?q.array instanceof Float32Array?q.array:new Float32Array(q.array):q.array instanceof Uint8Array?q.array:new Uint8Array(q.array),K()),q.isKeepArray||(xa&&xa!==q.array&&(xa=null),delete q.array)):q.zb?Ta=!0:K();aa.Uf=aa.G;q.ia&&Ta&&(q.ia(aa),q.ia=null);F.push(aa);return aa},N:function(p){p!==r&&(b.activeTexture(n[p]),r=p);u[p]=-1;a(null)},$e:function(p){g.random.h(p)},Xb:function(){x=null;b.framebufferTexture2D(ka.Pa(),
b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0)},reset:function(){for(var p=0;p<n.length;++p)u[p]=-1;r=-1},mg:function(){r=-1},Qe:function(){for(var p=0;p<n.length;++p)A.N(p)},yc:function(){g&&(g.random.remove(),g.nd.remove())},yg:function(p,M){if("RGBA"===p.format||"RGBE"===p.format){var K=new Image;K.src=p.data;K.onload=function(){A.instance({isMirrorY:p.isMirrorY,isFlipY:p.isFlipY,isFloat:!1,J:K,ia:function(q){if("RGBA"===p.format)M(q);else{var ea=p.width,va=p.height,Ba=A.instance({isMirrorY:p.isMirrorY,
isFloat:!0,width:ea,height:va,isFlipY:p.isFlipY});ka.ba();b.viewport(0,0,ea,va);y.set("s43");Ba.A();q.h(0);la.l(!0,!0);A.N(0);M(Ba);b.flush();setTimeout(q.remove,50)}}})}}else"JSON"===p.format?M(A.instance({isFloat:!0,isFlipY:p.isFlipY,width:p.width,height:p.height,array:new Float32Array(p.data)})):M(!1)},m:function(){x&&(sa.ba(),A.Xb(),sa.N());A.Qe();F.slice(0).forEach(function(p){p.remove()});F.splice(0);E=!1;k=0;"undefined"!==typeof Aa&&Aa.m();g=null}};return A}(),Kb=function(){return{instance:function(a){var c=
[Da.instance(a),Da.instance(a)],d=[c[1],c[0]],e=d,m={Ge:function(h){e[1].A();e[0].h(h);m.kd()},pg:function(h){e[1].fa();e[0].h(h);m.kd()},kd:function(){e=e===c?d:c},refresh:function(){e[0].refresh();e[1].refresh()},h:function(h){e[0].h(h)},Ze:function(h){e[1].h(h)},Pf:function(){return e[0]},remove:function(){e[0].remove();e[1].remove();e=null}};return m}}}(),la=function(){function a(k){var u={aa:null,H:null};u.aa=k.createBuffer();k.bindBuffer(k.ARRAY_BUFFER,u.aa);k.bufferData(k.ARRAY_BUFFER,new Float32Array([-1,
-1,3,-1,-1,3]),k.STATIC_DRAW);u.H=k.createBuffer();k.bindBuffer(k.ELEMENT_ARRAY_BUFFER,u.H);k.bufferData(k.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),k.STATIC_DRAW);return u}var c=null,d=0,e=!1,m=[],h=-2,r=-2,n={reset:function(){r=h=-2},B:function(){e||(c=a(b),n.wa(),e=!0)},instance:function(k){var u=d++,g=k.H?k.H.length:0,x="undefined"===typeof k.mode?b.STATIC_DRAW:k.mode,f=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,f);b.bufferData(b.ARRAY_BUFFER,k.aa instanceof Float32Array?k.aa:new Float32Array(k.aa),
x);h=u;var l=null,B=null,E=null;if(k.H){l=b.createBuffer();b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,l);var F=null;65536>k.H.length?(F=Uint16Array,B=b.UNSIGNED_SHORT,E=2):(F=Uint32Array,B=b.UNSIGNED_INT,E=4);F=k.H instanceof F?k.H:new F(k.H);b.bufferData(b.ELEMENT_ARRAY_BUFFER,F,x);r=u}var I={zd:function(D){h!==u&&(b.bindBuffer(b.ARRAY_BUFFER,f),h=u);D&&ua.Rb()},wd:function(){r!==u&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,l),r=u)},bind:function(D){I.zd(D);I.wd()},lf:function(){b.drawElements(b.TRIANGLES,g,
B,0)},mf:function(D,H){b.drawElements(b.TRIANGLES,D,B,H*E)},remove:function(){b.deleteBuffer(f);k.H&&b.deleteBuffer(l);I=null}};m.push(I);return I},wa:function(){-1!==h&&(b.bindBuffer(b.ARRAY_BUFFER,c.aa),h=-1);-1!==r&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,c.H),r=-1)},l:function(k,u){k&&la.wa();u&&ua.pa();b.drawElements(b.TRIANGLES,3,b.UNSIGNED_SHORT,0)},Ma:function(k){k=k||b;var u=a(k);k.bindBuffer(k.ARRAY_BUFFER,u.aa);k.bindBuffer(k.ELEMENT_ARRAY_BUFFER,u.H);ua.fb(k);k.drawElements(k.TRIANGLES,3,
k.UNSIGNED_SHORT,0);k.deleteBuffer(u.aa);k.deleteBuffer(u.H);n.reset();e&&(n.wa(),ua.pa())},yc:function(){var k=b,u=c;k.deleteBuffer(u.aa);k.deleteBuffer(u.H)},m:function(){n.yc();m.forEach(function(k){k.remove()});b.bindBuffer(b.ARRAY_BUFFER,null);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,null);n.reset();e=!1;m.splice(0);d=0}};return n}(),ka=function(){var a=null,c=null,d=null,e=!1,m=[],h={D:-2,vc:1},r={Ta:function(){return e},B:function(){if(!e){a=b.createFramebuffer();var n=ba.W();c=n&&b.DRAW_FRAMEBUFFER?
b.DRAW_FRAMEBUFFER:b.FRAMEBUFFER;d=n&&b.READ_FRAMEBUFFER?b.READ_FRAMEBUFFER:b.FRAMEBUFFER;e=!0}},Mf:function(){return c},Zd:function(){return d},Pa:function(){return b.FRAMEBUFFER},Tf:function(){return h},Ef:function(){return a},instance:function(n){void 0===n.Hc&&(n.Hc=!1);var k=n.L?n.L:null,u=n.width,g=void 0!==n.height?n.height:n.width,x=a,f=null,l=!1,B=!1,E=0;k&&(u=u?u:k.G(),g=g?g:k.V());var F={fd:function(){l||(x=b.createFramebuffer(),l=!0,E=h.vc++)},pd:function(){F.fd();F.A();f=b.createRenderbuffer();
b.bindRenderbuffer(b.RENDERBUFFER,f);b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,u,g);b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,f);b.clearDepth(1)},bind:function(I,D){E!==h.D&&(b.bindFramebuffer(c,x),h.D=E);k&&k.A();D&&b.viewport(0,0,u,g);I&&b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)},Ye:function(){E!==h.D&&(b.bindFramebuffer(c,x),h.D=E)},clear:function(){b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)},ff:function(){b.clear(b.COLOR_BUFFER_BIT)},gf:function(){b.clear(b.DEPTH_BUFFER_BIT)},
Je:function(){b.viewport(0,0,u,g)},A:function(){E!==h.D&&(b.bindFramebuffer(c,x),h.D=E)},rtt:function(I){k=I;h.D!==E&&(b.bindFramebuffer(b.FRAMEBUFFER,x),h.D=E);I.A()},N:function(){b.bindFramebuffer(c,null);h.D=-1},resize:function(I,D){u=I;g=D;f&&(b.bindRenderbuffer(b.RENDERBUFFER,f),b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,u,g))},remove:function(){x===a||B||(b.bindFramebuffer(c,x),b.framebufferTexture2D(c,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0),f&&b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,
b.RENDERBUFFER,null),b.bindFramebuffer(c,null),b.deleteFramebuffer(x),f&&b.deleteRenderbuffer(f));B=!0}};n.Hc&&F.pd();m.push(F);return F},N:function(){b.bindFramebuffer(c,null);h.D=-1},Re:function(){b.bindFramebuffer(c,null);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);b.viewport(0,0,ba.G(),ba.V());h.D=-1},reset:function(){h.D=-2},ba:function(){0!==h.D&&(b.bindFramebuffer(c,a),h.D=0)},clear:function(){b.viewport(0,0,ba.G(),ba.V());b.clear(b.COLOR_BUFFER_BIT)},m:function(){r.N();m.forEach(function(n){n.remove()});
b.deleteFramebuffer(a);r.reset();e=!1;m.splice(0);h.D=-2;h.vc=1}};return r}(),ba=function(){function a(){d="undefined"===typeof Ga?JEContext:Ga;e=!0}function c(g,x){for(var f=0;f<g.length;++f){var l=x.getExtension(g[f]);if(l)return l}return null}var d=null,e=!1,m={Jc:!1,Tb:null,Ub:null,Nc:!1,le:!1,Vb:null,Oc:!1,Wb:null,Kc:!1,jb:null,ge:!1,kb:null,he:!1},h=null,r={da:!0,ea:!0,vb:!0,ad:!1},n=null,k="undefined"===typeof window?{}:window,u={B:function(){if(e)return!0;h=Object.assign({},m);n=Object.assign({},
r);e||a();var g=b;if(!h.Jc){h.Tb=u.rc(g);k.GL_EXT_FLOAT=h.Tb;h.Nc=h.Tb?!0:!1;if(h.Nc||u.W())h.Ub=u.sc(g),h.le=h.Ub?!0:!1,k.GL_EXT_FLOATLINEAR=h.Ub;h.Jc=!0}if(!h.Kc){h.Vb=u.La(g);h.Vb&&(h.Oc=!0,k.GL_EXT_HALFFLOAT=h.Vb);if(h.Oc||u.W())h.Wb=u.tc(g),k.GL_EXT_HALFFLOATLINEAR=h.Wb;h.Zf=h.Wb?!0:!1;h.Kc=!0}h.jb=u.pc(g);h.ge=h.jb?!0:!1;k.GL_EXT_COLORBUFFERFLOAT=h.jb;h.kb=u.qc(g);h.he=h.kb?!0:!1;k.GL_EXT_COLORBUFFERHALFFLOAT=h.kb;ka.B();Da.B();if(!u.Kd())return!1;la.B();Da.fe();return!0},G:function(){e||a();
return d.G()},V:function(){e||a();return d.V()},W:function(){e||a();return d.W()},oc:function(g){u.pc(g);u.qc(g);u.rc(g);u.sc(g);u.La(g);u.tc(g)},pc:c.bind(null,["EXT_color_buffer_float","WEBGL_color_buffer_float","OES_color_buffer_float"]),qc:c.bind(null,["EXT_color_buffer_half_float","WEBGL_color_buffer_half_float","OES_color_buffer_half_float"]),rc:c.bind(null,["OES_texture_float","MOZ_OES_texture_float","WEBKIT_OES_texture_float"]),sc:c.bind(null,["OES_texture_float_linear","MOZ_OES_texture_float_linear",
"WEBKIT_OES_texture_float_linear"]),La:c.bind(null,["OES_texture_half_float","MOZ_OES_texture_half_float","WEBKIT_OES_texture_half_float"]),tc:c.bind(null,["OES_texture_half_float_linear","MOZ_OES_texture_half_float_linear","WEBKIT_OES_texture_half_float_linear"]),xb:function(g){var x=u.La(g);return x&&x.HALF_FLOAT_OES?x.HALF_FLOAT_OES:g.HALF_FLOAT||g.FLOAT},Vd:function(){return n},fc:function(){return n.da},bf:function(){return n.ea},af:function(){return n.vb},Bd:function(){return n.ad},gb:function(g,
x,f){function l(){g.bindTexture(g.TEXTURE_2D,null);g.bindFramebuffer(B,null);g.deleteTexture(I);g.deleteFramebuffer(F)}var B=g.FRAMEBUFFER,E=g.NEAREST,F=g.createFramebuffer();g.bindFramebuffer(B,F);var I=g.createTexture();g.bindTexture(g.TEXTURE_2D,I);g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,!1);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,E);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,E);g.texImage2D(g.TEXTURE_2D,0,x,1,1,0,g.RGBA,f,null);g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,
g.TEXTURE_2D,I,0);if(g.checkFramebufferStatus(g.READ_FRAMEBUFFER||g.FRAMEBUFFER)!==g.FRAMEBUFFER_COMPLETE)return l(),!1;ua.Pb(g);g.clearColor(0,0,0,0);g.viewport(0,0,1,1);g.disable(g.DEPTH_TEST);g.clear(g.COLOR_BUFFER_BIT);la.Ma(g);g.bindFramebuffer(B,null);ua.eb(g);g.activeTexture(g.TEXTURE0);g.bindTexture(g.TEXTURE_2D,I);la.Ma(g);x=new Uint8Array(4);g.readPixels(0,0,1,1,g.RGBA,g.UNSIGNED_BYTE,x);l();return 3<Math.abs(x[0]-127)?!1:!0},nb:function(g){var x={da:!1,ea:!1};g.disable(g.BLEND);g.clearColor(0,
0,0,0);g.clear(g.COLOR_BUFFER_BIT);g.RGBA32F&&u.gb(g,g.RGBA32F,g.FLOAT)&&(x.da=!0);!x.da&&u.gb(g,g.RGBA,g.FLOAT)&&(x.da=!0);var f=u.xb(g);g.RGBA16F&&u.gb(g,g.RGBA16F,f)&&(x.ea=!0);!x.ea&&u.gb(g,g.RGBA,f)&&(x.ea=!0);return x},Ld:function(){var g=ka.instance({width:1});g.fd();var x=Da.instance({width:1,isFloat:!0,Xa:3});g.A();x.A();b.flush();b.checkFramebufferStatus(ka.Zd())!==b.FRAMEBUFFER_COMPLETE?(Da.Ee(),n.vb=!1):n.vb=!0;g.remove();x.remove()},Md:function(){var g=!1;u.W()&&(g="PIXEL_PACK_BUFFER STREAM_READ SYNC_GPU_COMMANDS_COMPLETE WAIT_FAILED fenceSync deleteSync createBuffer".split(" ").every(function(x){return"undefined"!==
typeof b[x]}));n.ad=g},Kd:function(){var g=u.nb(b);Object.assign(n,g);if(!n.da&&!n.ea)return!1;u.Ld();u.Md();return!0},m:function(){Da.m();ua.m();ka.m();la.m();e=!1}};return u}(),V=la,sa=ka,X=Da,Aa=function(){function a(D,H,G,R){l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,R?l.NEAREST_MIPMAP_NEAREST:l.LINEAR);var W=null;if(null!==G)try{W=l.getError();if("FUCKING_BIG_ERROR"===W)return!1;l.texImage2D(l.TEXTURE_2D,0,D,2,2,0,l.RGBA,H,G);W=l.getError();if(W!==l.NO_ERROR)return!1}catch(v){return!1}R&&
l.generateMipmap(l.TEXTURE_2D);l.clear(l.COLOR_BUFFER_BIT);V.Ma(l);W=l.getError();if("FUCKING_BIG_ERROR"===W)return!1;l.readPixels(0,0,1,1,l.RGBA,l.UNSIGNED_BYTE,g);W=l.getError();W===l.INVALID_OPERATION&&"undefined"!==typeof l.PIXEL_PACK_BUFFER&&(l.bindBuffer(l.PIXEL_PACK_BUFFER,null),l.readPixels(0,0,1,1,l.RGBA,l.UNSIGNED_BYTE,g),W=l.getError());if(W!==l.NO_ERROR)return!1;if(G=0!==g[0])k.Zc=H,k.Gc=D;return G}function c(D,H){return B.da&&a(D,l.FLOAT,new Float32Array(f),H)?(n=r.$b,!0):!1}function d(D,
H,G){if(!B.ea)return!1;var R=ba.La(l);if(R&&R.HALF_FLOAT_OES&&a(D,R.HALF_FLOAT_OES,new Uint16Array(f),H)||l.HALF_FLOAT&&a(D,l.HALF_FLOAT,new Uint16Array(f),H)||a(D,l.FLOAT,new Float32Array(f),H))return n=r.ta,!0;l.bindTexture(l.TEXTURE_2D,G);l.texImage2D(l.TEXTURE_2D,0,l.RGBA,1,1,0,l.RGBA,l.UNSIGNED_BYTE,null);l.bindFramebuffer(k.Ja,I);Da.wc(l,G,1,1,new Float32Array(f),!1,!1);l.bindFramebuffer(k.Ja,null);l.bindTexture(l.TEXTURE_2D,G);return a(D,null,null,H)?(n=r.ta,!0):!1}function e(D,H,G){u=!0;if(d(D,
!0,G)||c(H,!0))return!0;u=!1;return d(D,!1,G)||c(H,!1)?!0:!1}function m(D){if(n===r.O){l=D||b;n=r.RGBA8;u=!0;ba.oc(l);B||(B=ba.nb(l));sa.reset();I=l.createFramebuffer();k.Ja=l.DRAW_FRAMEBUFFER||l.FRAMEBUFFER;l.bindFramebuffer(k.Ja,null);l.clearColor(0,0,0,0);l.viewport(0,0,1,1);y.O();E=y.eb(l);D=l.createTexture();l.activeTexture(l.TEXTURE0);l.bindTexture(l.TEXTURE_2D,D);l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.REPEAT);l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.REPEAT);l.texParameteri(l.TEXTURE_2D,
l.TEXTURE_MAG_FILTER,l.NEAREST);F=D;var H=D=l.RGBA,G=l.RGBA16F,R=l.RGBA32F;R&&(D=R);G&&(H=G);if((G||R)&&e(H,D,F))return h(),!0;D=H=l.RGBA;if(e(H,D,F))return h(),!0;n=r.RGBA8;h();return!1}}function h(){l.deleteProgram(E.ka);l.deleteTexture(F);F=E=null}var r={O:-1,$b:3,ta:2,RGBA8:0},n=r.O,k={Zc:null,Gc:null,Ja:null},u=!0,g=new Uint8Array(4),x=[.8,1,.8,1],f=[].concat(x,x,x,x),l=null,B=null,E=null,F=null,I=null;return{Ad:function(D){m(D);return u},ec:function(D,H){n===r.O&&(typeof("undefined"!==H)&&(B=
H),m(D));return n!==r.RGBA8},bg:function(D){m(D);return n===r.$b},oe:function(D){m(D);return n===r.ta},Nf:function(D){m(D);return k.Zc},Yd:function(D){m(D);return k.Gc},m:function(){l=null;u=!0;n=r.O;B=null}}}(),Sb=function(){return{instance:function(a){var c=X.instance(a.alpha),d=X.instance(a.beta);return{Od:function(){c.h(1);d.h(2)}}}}}(),Gb=function(){return{instance:function(a){var c=null,d=!1,e=!1,m=null,h=!1,r=!1,n=null,k="undefined"===typeof a.preprocessing?!1:a.preprocessing,u="undefined"===
typeof a.preprocessingSize?a.size:a.preprocessingSize;a.mask&&(d=!0,Y&&void 0!==Y.vd&&(a.mask=Y.vd+a.mask),c=X.instance({isFloat:!1,url:a.mask}));var g=!1;a.customInputShader&&(g="s44",y.ac({name:"_",id:g,g:a.customInputShader,xg:["uSource"],precision:"lowp"}),y.S(g,[{type:"1i",name:"_",value:0}]));switch(k){case "sobel":n="s31";h=!0;break;case "meanNormalization":n="s32";h=!0;break;case "grayScale":n="s28";h=!1;break;case "grayScaleTilt":n="s29";r=!0;h=!1;break;case "rgbGrayTilt":n="s30";r=!0;h=
!1;break;case "copy":n=g?g:"s0";break;case "inputLightRegulation":n=g?g:"s28";m=Tb.instance({Fc:u,Yc:a.size,Uc:a.nBlurPass,me:!1});e=!0;break;case "direct":case "none":n=!1;break;default:n="s3"}r&&y.S(n,[{name:"u26",type:"1f",value:a.tilt}]);d&&(n+="Mask");var x=X.instance({isFloat:!1,isPot:!1,width:a.size}),f={G:function(){return u},yb:function(){return f.G()},be:function(){return e?m.Cc():x},T:function(){sa.ba();n&&(y.set(n),h&&y.F("u27",1/a.size),x.fa(),d&&c.h(1),V.l(!1,!1),x.h(0),e&&m.process(x))},
m:function(){x.remove();d&&c.remove()}};return f}}}(),Hb=function(){return{instance:function(a){"undefined"===typeof a.normalize&&(a.normalize=!1);var c={input:null,Ga:null,Cb:null,Z:null,Za:null,Jb:null,Kb:null},d=null,e=[],m=[],h=!1,r=null,n=!0,k=-1,u=a.isReorganize?a.isReorganize:!1,g=a.kernelsCount?!0:!1,x=a.dynPelu?Sb.instance(a.dynPelu):!1,f=x?!0:!1,l={isEnabled:!1};a.ke?(a.sparsity="undefined"!==typeof a.sparsity?a.sparsity:a.ab.yb(),n=!1):"full"===a.connectivityUp&&(a.sparsity=a.ab.yb());
var B={elu:"s15",elu01:"s16",relu:"s14",arctan:"s18",sigmoid:"s13",copy:"s0",softplus:"s19",dynPelu:"s17"}[a.activation],E=a.sparsity*a.sparsity,F=!1,I=a.size,D="";if(a.maxPooling){switch(a.maxPooling.size){case 2:D="s33";break;case 4:D="s34"}F=!0;I/=a.maxPooling.size;c.Jb=X.instance({isFloat:!0,isPot:!1,width:I})}var H=void 0!==a.ve&&a.ve?!0:!1,G=null,R=null,W=null;if(H){G="s45"+a.index.toString();y.Ec("s45",G,[((a.normalization.n-1)/2).toFixed(1)]);y.S(G,[{type:"1i",name:"u1",value:0},{type:"2f",
name:"u7",value:[1/a.size,1/a.size]},{type:"1f",name:"u6",value:a.normalization.alpha},{type:"1f",name:"u9",value:a.normalization.beta},{type:"1f",name:"u31",value:a.normalization.k}]);var v={isFloat:!0,isPot:!0,width:a.size};R=X.instance(v);W=X.instance(v)}var t=-1,C=null;n&&(c.Z=X.instance({isFloat:!0,isPot:!1,width:a.size}));c.Ga=X.instance(a.bias);var O={G:function(){return a.size},yb:function(){return I},zc:function(){return a.classesCount},xd:function(A){d.h(A)},ye:function(){a.remap&&a.remap.isEnabled&&
(l={isEnabled:!0,re:X.instance({isFloat:!1,isFlipY:!1,array:new Uint8Array(a.remap.maskTexture.data),width:a.remap.maskTexture.width,isPot:!1}),Ua:a.remap.layers.map(function(A){return a.parent.ae(A)}),depth:a.remap.depth})},Fe:function(){switch(a.connectivityUp){case "direct":C=Ub.instance(a.connectivity);break;case "square":C=Vb.instance(a.connectivity);break;case "squareFast":C=Wb.instance(a.connectivity,a.activation);break;case "full":C=Xb.instance(a.connectivity);break;case "conv":k=a.kernelsCount,
C=Yb.instance(a.connectivity),u&&(c.Za=X.instance({width:I,isFloat:!0,isFlipY:!1,isPot:!1}))}if(C.qa){var A=a.size*a.sparsity;t=Math.log(A/a.size)/Math.log(2);c.input=X.instance({isMipmap:!0,isFloat:!0,isPot:!0,width:A,Eb:t});c.Cb=X.instance({isFloat:!0,isPot:!0,width:a.size})}},T:function(A){d=A;C.qa?(c.input.fa(),g&&c.Ga.h(2),C.T(l),c.input.h(0),c.input.Sd(t),c.Cb.fa(),g?y.set("s0"):(y.set("s27"),y.F("u25",E),c.Ga.h(1)),c.input.yd(t,0),V.l(!1,!1),y.set(B),H?R.A():c.Z.A(),c.Cb.h(0),f&&x.Od(),V.l(!1,
!1)):(c.Z.fa(),c.Ga.h(1),C.T());H&&(y.set(G),W.A(),R.h(0),V.l(!1,!1),y.set("s46"),y.F("u6",1),c.Z.A(),W.h(1),V.l(!1,!1));if(n)return F?(c.Jb.fa(),c.Z.h(0),y.set(D),y.Da("u7",1/a.size,1/a.size),V.l(!1,!1),A=c.Jb):A=c.Z,A.h(0),u&&(c.Za.A(),y.set("s21"),y.Da("u12",k,I/k),V.l(!1,!1),A=c.Za,c.Za.h(0)),A;A=c.Z;a.normalize&&(y.set("gpuRawAvg"===h?"s8":"s7"),y.F("u4",1/a.size),c.Kb.fa(),c.Z.h(0),V.l(!1,!1),A=c.Kb);switch(h){case "cpuRGBA2Float":A.mc(!1);A=O.ze(A);r(A);break;case "cpuMeanFloat":A.mc(!0);A=
A.Ae();r(A);break;case "gpuRawAvg":case "gpuRaw":A.h(0);case "none":null!==r&&r(A)}return!1},Hd:function(A){A&&(h=A.Lb||"none",r=A.Ib||null);c.Z=X.instance({isFloat:!0,isPot:!0,isMipmap:!1,width:a.size});A="undefined"!==typeof a.classesCount&&a.classesCount?a.classesCount:a.size*a.size;for(var p=0,M=0,K=0;p<A;++p)e.push(M+(a.size-1-K)*a.size),m.push([-1,-1,-1,-1]),++M,M===a.size&&(M=0,++K);a.normalize&&(c.Kb=X.instance({isFloat:!0,isPot:!0,width:a.size}))},ze:function(A){var p=A.bd();e.forEach(function(M,
K){m[K][0]=p[0][M];m[K][1]=p[1][M];m[K][2]=p[2][M];m[K][3]=p[3][M]});return m},m:function(){for(var A in c){var p=c[A];p&&p.remove()}C&&(C.m(),C=null)}};a.ab&&O.Fe(a.ab);return O}}}(),Ub=function(){return{instance:function(a){var c=X.instance(a.weights);return{qa:!0,Oa:function(){return 1},m:function(){c.remove()},ee:function(){return c},T:function(){y.set("s26");c.h(1);V.l(!1,!1)}}}}}(),Xb=function(){return{instance:function(a){var c=a.fromLayerSize,d=X.instance(a.weights);return{qa:!0,Oa:function(){return c},
m:function(){d.remove()},T:function(e){if(e.isEnabled){y.set("s24");e.re.h(3);var m,h=Math.min(e.Ua.length,e.depth);for(m=0;m<h;++m)e.Ua[m].xd(4+m)}else y.set("s23");y.F("u16",a.toLayerSize);d.h(1);V.l(!1,!1)}}}}}(),Vb=function(){return{instance:function(a){for(var c=a.fromLayerSize,d=a.toLayerSize,e=a.toSparsity,m=e*d,h=m/c,r=c/d,n=0,k=0,u=0,g=Array(e*d*e*d*4),x=Array(e*d*e*d*4),f=Array(c*c),l=0;l<f.length;++l)f[l]=0;l=Math.floor(e/2);for(var B=.5/d,E=.5/c,F=.5/m,I=0;I<d;++I)for(var D=Math.round(I*
r),H=0;H<d;++H){var G=Math.round(H*r),R=I/d,W=H/d;R+=B;W+=B;for(var v=0;v<e;++v){var t=D+v-l;0>t&&(t+=c);t>=c&&(t-=c);for(var C=0;C<e;++C){var O=n/m,A=k/m,p=G+C-l;0>p&&(p+=c);p>=c&&(p-=c);var M=t/c,K=p/c;A=1-A-1/m;M+=E;K+=E;O+=F;A+=F;var q=I*e+v,ea=H*e+C;ea=d*e-ea-1;q=ea*d*e+q;g[4*q]=O;g[4*q+1]=A;g[4*q+2]=M;g[4*q+3]=K;K=f[p*c+t]++;q=K%h;M=t*h+q;p=p*h+(K-q)/h;p=c*h-1-p;p=p*c*h+M;x[4*p]=O;x[4*p+1]=A;x[4*p+2]=R;x[4*p+3]=W;++n>=m&&(n=0,++k);++u}}}f=null;var va=X.instance(a.weights);delete a.weights.data;
var Ba=X.instance({width:m,isFloat:!0,array:new Float32Array(x),isPot:!0});x=null;var qa=X.instance({width:m,isFloat:!0,array:new Float32Array(g),isPot:!0});g=null;return{qa:!0,Oa:function(){return h},m:function(){Ba.remove();qa.remove();va.remove()},T:function(){y.set("s22");va.h(1);qa.h(2);V.l(!1,!1)}}}}}(),Yb=function(){return{instance:function(a){var c=a.kernelsCount,d=a.toSparsity,e=d*a.toLayerSize/a.fromLayerSize,m=X.instance(a.weights);return{qa:!0,Oa:function(){return e},Wf:function(){return d},
ee:function(){return m},m:function(){m.remove()},T:function(){y.set("s25");y.F("u22",c);y.F("u23",d);y.F("u16",a.toLayerSize);y.F("u24",a.fromLayerSize);m.h(1);V.l(!1,!1)}}}}}(),Wb=function(){return{instance:function(a,c){var d=a.fromLayerSize,e=a.toLayerSize,m=a.toSparsity,h=a.stride?a.stride:1,r=m*e/d,n=e<d,k=d/e,u=X.instance(a.weights),g="s47"+[d.toString(),e.toString(),m.toString(),h.toString(),c].join("_");y.Qd(g)||(a=Qb.Td(c,"gl_FragColor","gl_FragColor"),e=[{type:"1f",name:"u16",value:e},{type:"1f",
name:"u30",value:h}],n&&e.push({type:"1f",name:"u24",value:d}),d=[(n?r:m).toFixed(1),a],n&&d.push(k.toFixed(1)),y.Ec(n?"s39":"s38",g,d),y.S(g,e.concat([{type:"1i",name:"u14",value:0},{type:"1i",name:"u21",value:1},{type:"1i",name:"u13",value:3}])));return{qa:!1,Oa:function(){return r},m:function(){u.remove()},T:function(){y.set(g);u.h(3);V.l(!1,!1)}}}}}(),Tb=function(){return{instance:function(a){var c=a.Uc?a.Uc:3,d=a.Fc?a.Fc:64,e=a.Yc?a.Yc:64,m=a.me?!0:!1;a={isFloat:!1,width:d,isPot:!1,isFlipY:!1};
var h=X.instance(a),r=X.instance(a),n=X.instance(a),k=X.instance(a),u=X.instance({isFloat:!0,width:e,isPot:!1,isFlipY:!1}),g=1/d;return{process:function(x){y.set("s35");k.A();V.l(m,!1);y.set("s36");for(var f=0;f<c;++f)h.A(),y.Da("u7",g,0),V.l(m,!1),n.A(),k.h(0),V.l(m,!1),r.A(),h.h(0),y.Da("u7",0,g),V.l(m,!1),k.A(),n.h(0),V.l(m,!1),f!==c-1&&r.h(0);y.set("s37");u.A();x.h(0);r.h(1);k.h(2);V.l(m,!1);u.h(0)},Cc:function(){return u}}}}}(),T={de:function(){return T.kc()?document.createElement("video"):!1},
za:function(a,c){a[c]=!0;a.setAttribute(c,"true")},Ed:function(){var a=!1,c=navigator.userAgent||navigator.vendor||window.opera;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(c)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(c.substr(0,
4)))a=!0;return a},hc:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},Ud:function(){var a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return a&&a.length&&2<a.length?[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3]||0,10)]:[0,0,0]},Pc:function(){try{return window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(a){return window.innerHeight>window.innerWidth}},Dd:function(){return T.ic()||T.hc()},ic:function(){var a=navigator.userAgent.toLowerCase();
return-1!==a.indexOf("safari")&&-1===a.indexOf("chrome")?!0:!1},Cf:function(){return T.Ed()?T.Pc()?window.innerHeight/window.innerWidth*45:45:45},kc:function(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?!0:!1},pause:function(a){a.pause()},ng:function(a){a.play()},release:function(a){a.pause();a.videoStream&&a.videoStream.stop();a.videoStream=null},jc:function(a){if(!a)return a;var c=null;if(a.video){var d=function(e){return e&&"object"===typeof e?Object.assign({},e):e};c={};
"undefined"!==typeof a.video.width&&(c.width=d(a.video.width));"undefined"!==typeof a.video.height&&(c.height=d(a.video.height));"undefined"!==typeof a.video.facingMode&&(c.facingMode=d(a.video.facingMode))}c={audio:a.audio,video:c};"undefined"!==typeof a.deviceId&&(c.deviceId=a.deviceId);return c},ld:function(a){var c=a.video.width;a.video.width=a.video.height;a.video.height=c;return a},Gd:function(a){function c(f){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(l,
B){return Math.abs(l-f)-Math.abs(B-f)})}function d(f){var l=T.jc(a);f=f(l);m.push(f);e(f)}function e(f){if(f.video&&f.video.facingMode&&f.video.facingMode.exact){var l=f.video.facingMode.exact;f=T.jc(f);delete f.video.facingMode.exact;f.video.facingMode.ideal=l;m.push(f)}}var m=[];if(!a||!a.video)return m;e(a);if(a.video.width&&a.video.height){if(a.video.width.ideal&&a.video.height.ideal){var h=c(a.video.width.ideal).slice(0,3),r=c(a.video.height.ideal).slice(0,3),n={},k=0;for(n.ha=void 0;k<h.length;n=
{ha:n.ha},++k){n.ha=h[k];var u={},g=0;for(u.ga=void 0;g<r.length;u={ga:u.ga},++g)if(u.ga=r[g],n.ha!==a.video.width.ideal||u.ga!==a.video.height.ideal){var x=Math.max(n.ha,u.ga)/Math.min(n.ha,u.ga);x<4/3-.1||x>16/9+.1||d(function(f,l){return function(B){B.video.width.ideal=f.ha;B.video.height.ideal=l.ga;return B}}(n,u))}}}d(function(f){return T.ld(f)})}a.video.width&&a.video.height&&(a.video.width.ideal&&a.video.height.ideal&&d(function(f){delete f.video.width.ideal;delete f.video.height.ideal;return f}),
d(function(f){delete f.video.width;delete f.video.height;return f}));a.video.facingMode&&(d(function(f){delete f.video.facingMode;return f}),a.video.width&&a.video.height&&d(function(f){T.ld(f);delete f.video.facingMode;return f}));m.push({audio:a.audio,video:!0});return m},Ne:function(a){if(T.Pc()){if(!a||!a.video)return!1;var c=a.video.width,d=a.video.height;if(!c||!d)return!1;if(c.ideal&&d.ideal&&c.ideal>d.ideal)return a.video.height=c,a.video.width=d,!0}return!1},Wa:function(a){a.volume=0;T.za(a,
"muted");if(T.ic()){if(1===a.volume){var c=function(){a.volume=0;window.removeEventListener("mousemove",c,!1);window.removeEventListener("touchstart",c,!1)};window.addEventListener("mousemove",c,!1);window.addEventListener("touchstart",c,!1)}setTimeout(function(){a.volume=0;T.za(a,"muted")},5)}},md:function(a,c,d){return new Promise(function(e,m){if(a.srcObject&&a.srcObject.getVideoTracks){var h=a.srcObject.getVideoTracks();1!==h.length?m("INVALID_TRACKNUMBER"):(h=h[0],c?T.get(a,e,m,d):(h.stop(),
e()))}else m("BAD_IMPLEMENTATION")})},Dc:function(a,c,d,e){function m(r){h||(h=!0,d(r))}var h=!1;return navigator.mediaDevices.getUserMedia(e).then(function(r){function n(){setTimeout(function(){if(a.currentTime){var k=a.videoWidth,u=a.videoHeight;if(0===k||0===u)m("VIDEO_NULLSIZE");else{k&&(a.style.width=k.toString()+"px");u&&(a.style.height=u.toString()+"px");k={Cd:null,Ke:null,se:null};try{var g=r.getVideoTracks()[0];g&&(k.se=g,k.Cd=g.getCapabilities(),k.Ke=g.getSettings())}catch(x){}T.Dd()?a.parentNode&&
null!==a.parentNode?(h||c(a,r,k),setTimeout(function(){a.play()},100)):(document.body.appendChild(a),T.Wa(a),h||c(a,r,k),setTimeout(function(){a.style.transform="scale(0.0001,0.0001)";a.style.position="fixed";a.style.bottom="0px";a.style.right="0px";T.Wa(a);setTimeout(function(){a.play()},100)},80)):h||c(a,r,k)}}else m("VIDEO_NOTSTARTED")},700)}"undefined"!==typeof a.srcObject?a.srcObject=r:(a.src=window.URL.createObjectURL(r),a.videoStream=r);T.Wa(a);a.addEventListener("loadeddata",function(){var k=
a.play();T.Wa(a);"undefined"===typeof k?n():k.then(function(){n()}).catch(function(){m("VIDEO_PLAYPROMISEREJECTED")})},!1)}).catch(function(r){m(r)})},get:function(a,c,d,e){if(!a)return d&&d("VIDEO_NOTPROVIDED"),!1;if(!T.kc())return d&&d("MEDIASTREAMAPI_NOTFOUND"),!1;if(e&&e.video){if(T.hc()){var m=T.Ud();0!==m[0]&&(12>m[0]||12===m[0]&&2>m[1])&&T.Ne(e)}e.video.width&&e.video.width.ideal&&(a.style.width=e.video.width.ideal+"px");e.video.height&&e.video.height.ideal&&(a.style.height=e.video.height.ideal+
"px")}T.za(a,"autoplay");T.za(a,"playsinline");e&&e.audio?a.volume=0:T.za(a,"muted");T.Dc(a,c,function(){function h(n){if(0===n.length)d("INVALID_FALLBACKCONSTRAINTS");else{var k=n.shift();T.Dc(a,c,function(){h(n)},k)}}var r=T.Gd(e);h(r)},e)},ce:function(a){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return a(!1,"NOTSUPPORTED"),!1;navigator.mediaDevices.enumerateDevices().then(function(c){(c=c.filter(function(d){return d.kind&&-1!==d.kind.toLowerCase().indexOf("video")&&d.label&&
d.deviceId}))&&c.length&&0<c.length?a(c,!1):a(!1,"NODEVICESFOUND")}).catch(function(){a(!1,"PROMISEREJECTED")})},cf:function(a,c,d){var e={};e[c]=d;c=[];c.push(e);a.applyConstraints({advanced:c}).catch(function(){})}},za=function(){var a={n:5,Fb:1,Rc:0,Na:[30,45],Ka:[2,200],k:.7,Se:200,xe:.05},c=-1,d=null,e=-1,m=-1,h=0,r=-1,n=-1,k=0,u=0,g=a.Ka[1],x={Ac:function(){switch(c){case -1:return-1;case 0:return n+d.Rc;case 1:return k}},Gf:function(f){return Math.pow(Math.min(Math.max(r,0),d.n-1)/(d.n-1),
f||1)},B:function(f){d=Object.assign({},a,f);r=n=d.Fb;c=0;x.reset()},Oe:function(f){f=("undefined"===typeof f?Date.now():f)||0;var l=Math.min(Math.max(f-u,d.Ka[0]),d.Ka[1]);g=l;u=f;var B=-1===e?0:d.k;e=Math.min(Math.max(1E3/l,5),120)*(1-B)+e*B;f-m>d.Se&&5<++h&&(l=d.k,r=r*(1-l)+(e<d.Na[0]?n-1:e>d.Na[1]?n+1:n)*l,Math.abs(r-n)>1-d.xe&&(l=Math.min(Math.max(Math.round(r),0),d.n-1),l!==n&&(r=n=l,e=(d.Na[1]-d.Na[0])/2)),m=f)},gd:function(f){k=f;c=1},od:function(){c=0;x.reset()},reset:function(){g=a.Ka[1];
m=e=-1;h=0},Xd:function(){return g}};return x}(),ub=function(){var a={Wc:4,$a:[1.5,1.5,2],M:[.1,.1,.1],cd:1,P:-1,K:-1,Me:2,we:1,dd:!0,Pd:.8},c=null,d=[],e=0,m=[.5,.5,1];return{B:function(h){c=Object.assign({},a,h);d.splice(0);h=c.$a[0]*c.M[0];var r=c.$a[1]*c.M[1],n=1/(1+c.$a[2]*c.M[2]),k=c.cd*Math.min(c.P,c.K),u=k/c.P;k/=c.K;var g=.5*c.Pd;g*=g;for(var x=0;x<c.Wc;++x){var f=Math.pow(n,x),l=u*f,B=k*f;f=l*h;var E=B*r,F=l/2;B/=2;for(var I=1+(1-F-F)/f,D=1+(1-B-B)/E,H=0;H<D;++H)for(var G=B+H*E,R=G-.5,W=
0;W<I;++W){var v=F+W*f,t=v-.5;t*t+R*R>g||d.push([v,G,l*c.we])}}c.dd&&d.sort(function(C,O){var A=C[0]-.5;C=C[1]-.5;var p=O[0]-.5;O=O[1]-.5;return A*A+C*C-(p*p+O*O)})},get:function(){var h=d.length;if(0===h)return m;e>=h&&(e=0);var r=d[Math.floor(e)];e=(e+1/c.Me)%h;return r}}}(),Y={neuralNetworkPath:"NN_DEFAULT.json",bc:0,ud:25,hb:[2,7],Ce:{threshold:1,nScaleLevels:3,scale0Factor:.8,overlapFactors:[2,2,3],scanCenterFirst:!0,nDetectsPerLoop:-1},Pe:50,Tc:.5,
Sc:.4,te:8,Le:{translationFactorRange:[.0015,.005],rotationFactorRange:[.003,.02],qualityFactorRange:[.9,.98],alphaRange:[.05,1]},Ba:[.65,1,.262],M:[.092,.092,.3],rd:.2,td:2,sd:.1,ue:8,Vc:1,Rd:Xa.Va.bind(null,.3,.7),Ve:20,Jd:!0,jd:3},ma={facingMode:"user",idealWidth:800,idealHeight:600,minWidth:480,maxWidth:1920,minHeight:480,maxHeight:1920,rotate:0,flipX:!1},ca={Gb:-3,qe:-1,error:-2,ready:1,play:2,pause:3},ia=ca.Gb,w=null,Zb={Ra:!1,Sb:null,element:null,L:null,C:[0,0],I:[.5,.5],u:[.5,0,0,.5],bb:0,
ya:null,Qa:!1},L=null,$b={xa:null,Ha:null,antialias:!0,Zb:"./",sa:null,ca:null,Ea:Y.bc,$c:Y.bc,Sa:!1,ma:!0},Pa=null,na=null,ta=null,Qa=1,Oa={Ob:-1,ob:-1},Z=null,ac={P:0,K:0,C:[0,0],oa:null},U={ra:null,buffer:null,M:null,Ba:null,Y:Y.Vc,Aa:null},Sa=null,oa=null,Wa=null,Na=null,J={o:1,ja:0,U:null,Lc:!1,Qc:0,Hb:0},fb=[],gb=[],Eb={VERSION:"2.0.7",init:function(a){function c(){ia!==ca.error&&2===++e&&(Ja(),yb(),Ia(),L.xa&&(ia=ca.ready,L.xa(!1,{GL:b,canvasElement:L.ca,videoTexture:w.L.get(),videoTransformMat2:w.u,
maxFacesDetected:J.o,videoElement:w.element}),db()),cb())}if(ia!==ca.Gb)return a.callbackReady&&a.callbackReady("ALREADY_INITIALIZED"),!1;ia=ca.qe;w=Object.assign({},Zb);L=Object.assign({},$b);Z=Object.assign({},ac);J.U=[0];U.M=Y.M.slice(0);U.Ba=Y.Ba.slice(0);"undefined"!==typeof a.antialias&&(L.antialias=a.antialias);a.callbackReady&&(L.xa=a.callbackReady);a.callbackTrack&&(L.Ha=a.callbackTrack);a.nExpressions&&(U.Y=a.nExpressions);a.expressionsEasings&&(U.Aa=a.expressionsEasings);"undefined"!==
typeof a.animateDelay&&(L.Ea=a.animateDelay);"undefined"!==typeof a.NNCPath&&(L.Zb=a.NNCPath);"undefined"!==typeof a.NNC&&(L.sa=a.NNC);"undefined"!==typeof a.maxFacesDetected&&(J.o=Math.max(1,a.maxFacesDetected));"undefined"!==typeof a.followZRot&&(L.ma=a.followZRot?!0:!1);if(J.o>Y.te)return Ha("MAXFACES_TOOHIGH"),!1;if(!a.canvasId&&!a.canvas)return Ha("NO_CANVASID"),!1;L.ca=a.canvas?a.canvas:document.getElementById(a.canvasId);if(!L.ca)return Ha("INVALID_CANVASID"),!1;Z.P=L.ca.width;Z.K=L.ca.height;
if(!Z.P||!Z.K)return Ha("INVALID_CANVASDIMENSIONS"),!1;for(var d=0;d<J.o;++d)fb.push(new Float32Array(Y.ue)),gb.push(0);za.B({Fb:0,n:Y.hb[1]-Y.hb[0]+1,Rc:Y.hb[0]});na=Object.create(Y.Ce);a.scanSettings&&(Object.assign(na,a.scanSettings),-1!==na.nDetectsPerLoop?za.gd(na.nDetectsPerLoop):za.od());ta=Object.create(Y.Le);a.stabilizationSettings&&Object.assign(ta,a.stabilizationSettings);var e=0;a.videoSettings&&a.videoSettings.videoElement?Ya(a.videoSettings.videoElement,c):(a.videoSettings&&Object.assign(ma,
a.videoSettings),Ab(a.onWebcamAsk,a.onWebcamGet,function(m){Ya(m,c)}));Mb(function(m){if(!Nb())return!1;Pa=new Fb({Ua:m.layers,Lb:"gpuRawAvg",Ib:Pb});y.qd([{id:"s50",name:"_",la:"attribute vec2 a0;uniform mat2 u32;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=vec2(.5,.5)+u32*a0;}",Fa:["a0"],ua:[2],g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1","u32"],precision:"lowp"},{id:"s51",name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",
la:"attribute vec2 a0;uniform sampler2D u33;uniform mat2 u32;uniform vec2 u34;uniform float u35,u36,u37;varying vec2 vv0;void main(){vec4 a=texture2D(u33,vec2(.17,u35));vec2 f=a.gb,g=a.a*u34,b=a0;b.x*=u37;float c=cos(u36),d=sin(u36);vec2 h=mat2(c,d,-d,c)*b,i=f+h*.5*g,j=i-.5;vv0=.5+2.*u32*j,gl_Position=vec4(a0,0.,1.);}",Fa:["a0"],ua:[2],i:"u1 u33 u34 u35 u36 u37 u32".split(" "),precision:"lowp"},{id:"s52",name:"_",g:"uniform sampler2D u38,u33;uniform vec3 u39,u40;uniform float u41,u42,u35,u43,u36,u44;const vec4 e=vec4(.25,.25,.25,.25);void main(){vec4 d=texture2D(u38,vec2(.625,.625)),f=texture2D(u38,vec2(.875,.625)),a=texture2D(u33,vec2(.17,u35));float g=dot(d-f,e);bool h=g>u42;h?a.r=2.:a.r>u41?a.r=0.:a.r>1.9?a.r+=1.:0.,a.r*=u43;if(a.r<.9)a=vec4(1.,u39);else{a.r*=step(1.9,a.r);float i=dot(e,texture2D(u38,vec2(.875,.875))),j=dot(e,texture2D(u38,vec2(.125,.625))),k=dot(e,texture2D(u38,vec2(.375,.625))),b=cos(u36),c=sin(u36);vec2 l=mat2(b,c*u44,-c/u44,b)*vec2(i,j);a.gba+=vec3(l,k)*u40*a.a;}gl_FragColor=a;}",
la:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",i:"u38 u33 u39 u41 u40 u43 u36 u44 u42 u35".split(" ")},{id:"s53",name:"_",la:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"uniform sampler2D u38;const vec4 e=vec4(.25,.25,.25,.25);const vec3 f=vec3(.5,.5,.5);void main(){float a=dot(e,texture2D(u38,vec2(.125,.875))),b=dot(e,texture2D(u38,vec2(.375,.875))),c=dot(e,texture2D(u38,vec2(.625,.875))),d=dot(e,texture2D(u38,vec2(.625,.625)));vec3 g=vec3(a,b,c)*.5+f;gl_FragColor=vec4(g,d);}",
i:["u38"]},{id:"s54",name:"_",la:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"uniform sampler2D u38;const vec4 e=vec4(.25,.25,.25,.25);void main(){float a=dot(e,texture2D(u38,vec2(.375,.375))),b=dot(e,texture2D(u38,vec2(.625,.375))),c=dot(e,texture2D(u38,vec2(.875,.375))),d=dot(e,texture2D(u38,vec2(.125,.125)));gl_FragColor=vec4(a,b,c,d);}",i:["u38"]},{id:"s49",name:"_",g:"uniform sampler2D u33;uniform vec2 u45;uniform float u46;varying vec2 vv0;void main(){float f=step(.5,mod(gl_FragCoord.y+1.5,2.)),c=step(.33,vv0.x);vec4 a=texture2D(u33,vv0+u45);a.a=mix(a.a*u46,a.a,c);vec4 d=floor(255.*a),g=255.*(255.*a-d),b=mix(d,g,f)/255.;b.x=mix(step(a.x,1.5),b.x,c),gl_FragColor=b;}",
i:["u33","u46","u45"]}]);tb();Lb();ib();hb();c()});return!0},destroy:function(){return new Promise(function(a,c){Eb.toggle_pause(!0,!0).catch(function(){c()}).then(function(){Pa&&Pa.m();Ga.m();Pa=oa=Sa=null;fb.splice(0);gb.splice(0);Z.oa=null;U.ra=null;w.L=null;ia=ca.Gb;a()})})},toggle_pause:function(a,c){if(!Va())return Promise.reject();var d=null;d=w.Qa?Promise.resolve():c?T.md(w.element,!a,w.ya):Promise.resolve();a?pb():d.then(function(){cb()});return d},update_videoSettings:function(a){pb();return new Promise(function(c){T.md(w.element,
!1,w.ya).then(function(){Object.assign(ma,a);Ab(null,null,function(d){Ya(d,function(){Ja();Ia();cb();c()})})})})},toggle_slow:function(a){Va()&&ia===ca.play&&(a&&!L.Sa?(L.$c=L.Ea,na.nDetectsPerLoop=1,this.set_animateDelay(100),L.Sa=!0):!a&&L.Sa&&(na.nDetectsPerLoop=-1,this.set_animateDelay(L.$c),L.Sa=!1))},set_animateDelay:function(a){L.Ea=a},resize:function(){if(!Va())return!1;var a=L.ca.width,c=L.ca.height;if(!jb()&&a===Z.P&&c===Z.K)return!1;Z.P=a;Z.K=c;y.O();ib();hb();Ja();Ia();return!0},set_inputTexture:function(a,
c,d){w.C[0]=c;w.C[1]=d;w.L=X.instance({width:c,height:d,zb:a});w.Ra=!0;Ja();db();Ia()},reset_GLState:function(){db();Z.oa.remove();U.ra.remove();tb()},render_video:function(){sa.N();y.set("s50");b.viewport(0,0,Z.P,Z.K);w.L.h(0);V.l(!0,!0)},reset_inputTexture:function(){w.Ra=!1;w.L=w.Sb;jb();Ja();Ia()},get_videoDevices:function(a){return T.ce(a)},set_scanSettings:function(a){Object.assign(na,a);-1!==na.nDetectsPerLoop?za.gd(na.nDetectsPerLoop):za.od();ib();hb()},set_stabilizationSettings:function(a){Object.assign(ta,
a)},set_videoOrientation:function(a,c){Va()&&(ma.flipX=c,ma.rotate=a,Ja(),Ia())},update_videoElement:function(a,c){Ya(a?a:w.element,function(){yb();Ja();Ia();c&&c()})},create_new:function(){return window.JEEFACEFILTERAPIGEN()}};return Eb};window.JEEFACEFILTERAPI=window.JEEFACEFILTERAPIGEN();
;return JEEFACEFILTERAPI||window.JEEFACEFILTERAPI;})();